(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{120:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return le})),n.d(t,"metadata",(function(){return fe})),n.d(t,"rightToc",(function(){return pe})),n.d(t,"default",(function(){return ve}));var r={};n.r(r),n.d(r,"plugins",(function(){return y})),n.d(r,"commands",(function(){return O})),n.d(r,"defaultKeys",(function(){return w})),n.d(r,"defaultCalculateType",(function(){return k})),n.d(r,"toggleLinkSubMenu",(function(){return j})),n.d(r,"focusFloatingMenuInput",(function(){return M}));var o=n(3),i=n(7),a=n(0),c=n.n(a),u=n(129),s=(n(191),n(192),n(203)),d=(n(56),n(59),n(61),n(201)),l=n(140),f=n(173),p=n(158),m=n(128),v=n(187),h=n(207),g=n(151),b=n(135),y=function(e){var t,n=void 0===e?{}:e,r=n.key,o=void 0===r?new l.d("floatingMenuPlugin"):r,i=n.tooltipRenderOpts,a=void 0===i?{}:i,c=n.keybindings,u=void 0===c?w:c,s=n.calculateType,d=void 0===s?k:s;return[v.b.plugins({key:o,calculateType:d,tooltipRenderOpts:a}),u&&Object(g.b)((t={},t[u.hide]=Object(m.a)(Object(h.queryIsSelectionTooltipActive)(o),Object(h.hideSelectionTooltip)(o)),t[u.toggleLink]=j(o),t))]},O={focusFloatingMenuInput:M,toggleLinkSubMenu:j,updateFloatingTooltipType:h.updateSelectionTooltipType,hideFloatingMenu:h.hideSelectionTooltip,queryIsMenuActive:h.queryIsSelectionTooltipActive},w={hide:"Escape",toggleLink:"Meta-k"},k=function(e,t){return Object(p.queryIsSelectionAroundLink)()(e)||Object(p.queryIsLinkActive)()(e)?"linkSubMenu":e.selection.empty?null:"defaultMenu"};function j(e){return function(t,n,r){var o=Object(h.querySelectionTooltipType)(e)(t);return t.selection.empty?("linkSubMenu"===o&&Object(b.h)(r,M(e)),!1):"linkSubMenu"===o?Object(h.hideSelectionTooltip)(e)(r.state,r.dispatch,r):(Object(b.h)(r,M(e)),Object(h.updateSelectionTooltipType)(e,"linkSubMenu")(r.state,r.dispatch,r))}}function M(e){return function(t){var n=e.getState(t).tooltipContentDOM.querySelector("input");return!!n&&(n.focus(),!0)}}var S=n(1),E=n.n(S),A=function(e){var t=e.children,n=e.className,r=void 0===n?"":n,u=e.onSelect,s=e.style,d=void 0===s?{}:s,l=e.isActive,f=e.isDisabled,p=e.hint,m=e.hintPos,v=void 0===m?"top":m,h=e.hintBreakWhiteSpace,g=void 0===h||h,b=Object(i.a)(e,["children","className","onSelect","style","isActive","isDisabled","hint","hintPos","hintBreakWhiteSpace"]),y=Object(a.useCallback)((function(e){return console.log("mouse down",e),e.preventDefault(),u()}),[u]);return c.a.createElement("button",{"data-bangle-balloon-break":g,"aria-label":p,"data-bangle-balloon-pos":v,disabled:f,onMouseDown:u?y:void 0,className:"inline-menu-icon "+(l?"active":"")},c.a.createElement("svg",Object(o.a)({style:d,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:""+r},b),t))};function C(e){return c.a.createElement(A,Object(o.a)({viewBox:"-6 -5 24 24"},e),c.a.createElement("path",{d:"M5.997 14H1.72c-.618 0-1.058-.138-1.323-.415C.132 13.308 0 12.867 0 12.262V1.738C0 1.121.135.676.406.406.676.136 1.114 0 1.719 0h4.536c.669 0 1.248.041 1.738.124.49.083.93.242 1.318.478a3.458 3.458 0 0 1 1.461 1.752c.134.366.2.753.2 1.16 0 1.401-.7 2.426-2.1 3.075 1.84.586 2.76 1.726 2.76 3.42 0 .782-.2 1.487-.602 2.114a3.61 3.61 0 0 1-1.623 1.39 5.772 5.772 0 0 1-1.471.377c-.554.073-1.2.11-1.939.11zm-.21-6.217h-2.95v4.087h3.046c1.916 0 2.874-.69 2.874-2.072 0-.707-.248-1.22-.745-1.537-.496-.319-1.238-.478-2.225-.478zM2.837 2.13v3.619h2.597c.707 0 1.252-.067 1.638-.2.385-.134.68-.389.883-.765.16-.267.239-.566.239-.897 0-.707-.252-1.176-.755-1.409-.503-.232-1.27-.348-2.301-.348H2.836z"}))}function T(e){return c.a.createElement(A,e,c.a.createElement("path",{d:"M9.95263 16.9123L8.59323 18.3608L2.03082 12.2016L8.18994 5.63922L9.64826 7.00791L4.85783 12.112L9.95212 16.8932L9.95263 16.9123Z"}),c.a.createElement("path",{d:"M14.0474 16.9123L15.4068 18.3608L21.9692 12.2016L15.8101 5.63922L14.3517 7.00791L19.1422 12.112L14.0479 16.8932L14.0474 16.9123Z"}))}function I(e){return c.a.createElement(A,Object(o.a)({},e,{style:{transform:"scale(1.4, 1.4)"}}),c.a.createElement("path",{d:"M9 7H7V9H9V7Z"}),c.a.createElement("path",{d:"M7 13V11H9V13H7Z"}),c.a.createElement("path",{d:"M7 15V17H9V15H7Z"}),c.a.createElement("path",{d:"M11 15V17H17V15H11Z"}),c.a.createElement("path",{d:"M17 13V11H11V13H17Z"}),c.a.createElement("path",{d:"M17 7V9H11V7H17Z"}))}function L(e){return c.a.createElement(A,Object(o.a)({},e,{style:{transform:"scale(0.8, 0.8)"}}),c.a.createElement("path",{d:"M10.2426 16.3137L6 12.071L7.41421 10.6568L10.2426 13.4853L15.8995 7.8284L17.3137 9.24262L10.2426 16.3137Z"}),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 5C1 2.79086 2.79086 1 5 1H19C21.2091 1 23 2.79086 23 5V19C23 21.2091 21.2091 23 19 23H5C2.79086 23 1 21.2091 1 19V5ZM5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3Z"}))}function D(e){return c.a.createElement(A,e,c.a.createElement("path",{d:"M11.4903 5.45801H17.4903L16.7788 7.32716H14.7788L11.2212 16.6729H13.2212L12.5097 18.5421H6.5097L7.22122 16.6729H9.22122L12.7788 7.32716H10.7788L11.4903 5.45801Z"}))}function x(e){var t=e.level,n=Object(i.a)(e,["level"]);return c.a.createElement(A,n,c.a.createElement("text",{x:"12",y:"12",stroke:"currentColor",textAnchor:"middle",alignmentBaseline:"central",dominantBaseline:"middle"},"H",t))}function P(e){return c.a.createElement(A,e,c.a.createElement("path",{d:"M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z"}),c.a.createElement("path",{d:"M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z"}),c.a.createElement("path",{d:"M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z"}))}function N(e){return c.a.createElement(A,e,c.a.createElement("path",{d:"M10.2426 16.3137L6 12.071L7.41421 10.6568L10.2426 13.4853L15.8995 7.8284L17.3137 9.24262L10.2426 16.3137Z"}),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z"}))}function _(e){return c.a.createElement(A,e,c.a.createElement("path",{d:"M15.6396 7.02527H12.0181V5.02527H19.0181V12.0253H17.0181V8.47528L12.1042 13.3892L10.6899 11.975L15.6396 7.02527Z"}),c.a.createElement("path",{d:"M10.9819 6.97473H4.98193V18.9747H16.9819V12.9747H14.9819V16.9747H6.98193V8.97473H10.9819V6.97473Z"}))}function B(e){return c.a.createElement(A,e,c.a.createElement("path",{d:"M16.34 9.32a1 1 0 10-1.36-1.46l-2.93 2.73-2.73-2.93a1 1 0 00-1.46 1.36l2.73 2.93-2.93 2.73a1 1 0 101.36 1.46l2.93-2.73 2.73 2.93a1 1 0 101.46-1.36l-2.73-2.93 2.93-2.73z"}),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 12a11 11 0 1122 0 11 11 0 01-22 0zm11 9a9 9 0 110-18 9 9 0 010 18z"}))}A.propTypes={onSelect:E.a.func,children:E.a.oneOfType([E.a.element,E.a.arrayOf(E.a.element)]).isRequired};var q=n(170);function R(e){var t=e.getIsTop,n=void 0===t?function(){return!0}:t,r=Object(q.b)(),o=Object(p.queryLinkAttrs)()(r.state),i=o&&o.href||"";return c.a.createElement(V,{key:i,originalHref:i,view:r,getIsTop:n})}function V(e){var t=e.getIsTop,n=e.view,r=e.originalHref,o=void 0===r?"":r,i=Object(a.useState)(o),u=i[0],s=i[1],d=Object(a.useRef)(),l=function(){Object(p.updateLink)(u)(n.state,n.dispatch),n.focus()};return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{value:u,ref:d,onKeyDown:function(e){if(console.log(e.key),"Enter"===e.key)return e.preventDefault(),l(),void n.focus();var r=t();return r&&"ArrowDown"===e.key?(e.preventDefault(),void n.focus()):r||"ArrowUp"!==e.key?"Escape"===e.key?(e.preventDefault(),void n.focus()):void 0:(e.preventDefault(),void n.focus())},onChange:function(e){s(e.target.value),e.preventDefault()}}),c.a.createElement("a",{href:u,target:"_blank",rel:"noreferrer"},c.a.createElement(_,{hint:"Visit Link"})),u===o?c.a.createElement(B,{hint:"Clear Link",onSelect:function(){Object(p.updateLink)()(n.state,n.dispatch),n.focus()}}):c.a.createElement(N,{onSelect:function(){l(),n.focus()}}))}var H=n(24),$=n.n(H),U=n(163),z=n(160),K=n(162),W=n(166),F=n(165),Z=n(164);function G(e){var t=Object.assign({},e),n="Bold\n"+z.defaultKeys.toggleBold,r=Object(q.b)(),i=Object(a.useCallback)((function(){Object(z.toggleBold)()(r.state,r.dispatch,r)&&r.dispatch&&r.focus()}),[r]);return c.a.createElement(C,Object(o.a)({hint:n,onSelect:i,isActive:Object(z.queryIsBoldActive)()(r.state),isDisabled:!Object(z.toggleBold)()(r.state)},t))}function J(e){var t=Object.assign({},e),n="Italic\n"+U.defaultKeys.toggleItalic,r=Object(q.b)(),i=Object(a.useCallback)((function(){Object(U.toggleItalic)()(r.state,r.dispatch,r)&&r.dispatch&&r.focus()}),[r]);return c.a.createElement(D,Object(o.a)({hint:n,onSelect:i,isActive:Object(U.queryIsItalicActive)()(r.state),isDisabled:!Object(U.toggleItalic)()(r.state)},t))}function Y(e){var t=Object.assign({},e),n="Code\n"+K.defaultKeys.toggleCode,r=Object(q.b)(),i=Object(a.useCallback)((function(){Object(K.toggleCode)()(r.state,r.dispatch,r)&&r.dispatch&&r.focus()}),[r]);return c.a.createElement(T,Object(o.a)({hint:n,onSelect:i,isActive:Object(K.queryIsCodeActive)()(r.state),isDisabled:!Object(K.toggleCode)()(r.state)},t))}function X(e){var t=Object.assign({},e),n="BulletList\n"+Z.defaultKeys.toggle,r=Object(q.b)(),i=Object(a.useCallback)((function(){Object(Z.toggleBulletList)()(r.state,r.dispatch,r)&&r.dispatch&&r.focus()}),[r]);return c.a.createElement(I,Object(o.a)({hint:n,onSelect:i,isActive:Object(Z.queryIsBulletListActive)()(r.state),isDisabled:!Object(Z.toggleBulletList)()(r.state)},t))}function Q(e){var t=Object.assign({},e),n="TodoList\n"+W.defaultKeys.toggle,r=Object(q.b)(),i=Object(a.useCallback)((function(){return!!Object(W.toggleTodoList)()(r.state,void 0,r)&&(r.dispatch&&(r.focus(),Object(W.toggleTodoList)()(r.state,r.dispatch,r)),!0)}),[r]);return c.a.createElement(L,Object(o.a)({hint:n,onSelect:i,isActive:Object(W.queryIsTodoListActive)()(r.state),isDisabled:!Object(W.toggleTodoList)()(r.state,void 0,r)},t))}function ee(e){var t=e.level,n=Object(i.a)(e,["level"]),r="Heading"+t+"\n"+F.defaultKeys["toH"+t],u=Object(q.b)(),s=Object(a.useCallback)((function(){Object(F.toggleHeading)(t)(u.state,u.dispatch,u)&&u.dispatch&&u.focus()}),[u,t]);return c.a.createElement(x,Object(o.a)({level:t,hint:r,onSelect:s,isActive:Object(F.queryIsHeadingActive)(t)(u.state),isDisabled:!Object(F.toggleHeading)(t)(u.state)},n))}function te(e){var t=e.menuKey,n="Link\n"+w.toggleLink,r=Object(q.b)(),o=Object(a.useCallback)((function(){Object(m.a)((function(e){return Object(p.createLink)("")(e)}),(function(e,n,r){return n&&(j(t)(r.state,r.dispatch,r),Object(b.h)(r,M(t))),!0}))(r.state,r.dispatch,r)&&r.dispatch&&r.focus()}),[r,t]);return c.a.createElement(P,{hint:n,onSelect:o,isActive:Object(p.queryIsLinkActive)()(r.state),isDisabled:!Object(p.createLink)("")(r.state)})}function ne(e){var t=e.className,n=void 0===t?"":t,r=e.children;return c.a.createElement("div",{className:"bangle-menu "+n},r)}function re(e){var t=e.className,n=void 0===t?"":t,r=e.children;return c.a.createElement("div",{className:"bangle-menu-group  "+n},r)}function oe(e){var t=e.menuKey,n=e.renderMenuType,r=void 0===n?function(e){var t=e.type,n=e.menuKey;return"defaultMenu"===t?c.a.createElement(ne,null,c.a.createElement(re,null,c.a.createElement(G,null),c.a.createElement(J,null),c.a.createElement(Y,null),c.a.createElement(te,{menuKey:n})),c.a.createElement(re,null,c.a.createElement(ee,{level:2}),c.a.createElement(ee,{level:3}),c.a.createElement(X,null),c.a.createElement(Q,null))):"linkSubMenu"===t?c.a.createElement(ne,{className:"bangle-link-menu"},c.a.createElement(R,null)):null}:n,o=Object(d.c)(t),i=r({type:o.type,menuKey:t});return i?$.a.createPortal(i,o.tooltipContentDOM):null}ee.propTypes={level:E.a.number.isRequired},te.propTypes={menuKey:E.a.instanceOf(l.d).isRequired},oe.propTypes={menuKey:E.a.instanceOf(l.d).isRequired};var ie=new l.d("menuKey");function ae(){var e=Object(d.b)({specs:Object(f.b)(),plugins:function(){return[].concat(Object(f.a)(),[r.plugins({key:ie})])},initialValue:'<div>Hi there, try selecting me to see a floating menu.\n    <br/>\n    <span>Also, checkout this awesome <a href="https://blog.ycombinator.com/the-airbnbs/">article!</a></span>\n    </div>'});return c.a.createElement(d.a,{state:e},c.a.createElement(oe,{menuKey:ie}))}var ce=new l.d("menuKey");function ue(){var e=Object(d.b)({specs:Object(f.b)(),plugins:function(){return[].concat(Object(f.a)(),[r.plugins({key:ce,calculateType:function(e,t){return l.f.commands.queryIsHeadingActive()(e)?"headingSubMenu":e.selection.empty?null:"defaultMenu"}})])},initialValue:"<div>\n      <p>Hello I am a paragraph, please upgrade me to a heading.</p>\n      <h3>I am a heading try selecting me</h3>\n    </div>"});return c.a.createElement(d.a,{state:e},c.a.createElement(oe,{menuKey:ce,renderMenuType:function(e){var t=e.type;return"headingSubMenu"===t?c.a.createElement(ne,null,c.a.createElement("span",null,"This is a heading!")):"defaultMenu"===t?c.a.createElement(ne,null,c.a.createElement(re,null,c.a.createElement(G,null),c.a.createElement(J,null)),c.a.createElement(re,null,c.a.createElement(ee,{level:1}),c.a.createElement(ee,{level:2}),c.a.createElement(X,null))):null}}))}var se=n.p+"4c9a5a32024f68e60905421a9f93ef2e.jsx",de=n.p+"f2bf31bd2327da0ae2f617ac1f7905af.jsx",le={title:"Floating Menu",id:"react-floating-menu"},fe={unversionedId:"examples/react-floating-menu",id:"examples/react-floating-menu",isDocsHomePage:!1,title:"Floating Menu",description:"Below is an example of a floating menu which gets activated when you select something. Bangle picks some reasonable default menu types, but you are free to customize it as shown in the next example.",source:"@site/docs/examples/react-floating-menu.mdx",slug:"/examples/react-floating-menu",permalink:"/bangle-play/docs/examples/react-floating-menu",editUrl:"https://github.com/kepta/bangle-play/edit/master/_bangle-website/docs/docs/examples/react-floating-menu.mdx",version:"current",sidebar:"docs",previous:{title:"Basic Editor in React",permalink:"/bangle-play/docs/examples/react-basic-editor"},next:{title:"Emoji Suggestions\ud83e\udd14",permalink:"/bangle-play/docs/examples/react-emoji-suggest"}},pe=[{value:"Customizing floating menu type",id:"customizing-floating-menu-type",children:[]}],me={rightToc:pe};function ve(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(u.b)("wrapper",Object(o.a)({},me,n,{components:t,mdxType:"MDXLayout"}),Object(u.b)("p",null,"Below is an example of a floating menu which gets activated when you select something. Bangle picks some reasonable default menu types, but you are free to customize it as shown in the next example."),Object(u.b)(s.a,{filePath:se,language:"jsx",component:function(){return Object(u.b)(ae,{mdxType:"Example1"})},mdxType:"ReactCodeExample"}),Object(u.b)("p",null,"Try some of the following:"),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},"Try selecting some lines."),Object(u.b)("li",{parentName:"ul"},"Try to Bold the text."),Object(u.b)("li",{parentName:"ul"},"Click on the link to see a link editor."),Object(u.b)("li",{parentName:"ul"},"Select some text and try ",Object(u.b)("inlineCode",{parentName:"li"},"Command\u2013K"),"(Mac) or ",Object(u.b)("inlineCode",{parentName:"li"},"Ctrl-K"),"(PC) to add a link."),Object(u.b)("li",{parentName:"ul"},"Copy a link and try pasting it directly on a selected text.")),Object(u.b)("h3",{id:"customizing-floating-menu-type"},"Customizing floating menu type"),Object(u.b)("p",null,"In the example below we define a custom menu type ",Object(u.b)("inlineCode",{parentName:"p"},"headingSubMenu"),", which gets activated when a user is inside a ",Object(u.b)("inlineCode",{parentName:"p"},"heading")," node."),Object(u.b)(s.a,{filePath:de,language:"jsx",component:function(){return Object(u.b)(ue,{mdxType:"Example2"})},mdxType:"ReactCodeExample"}),Object(u.b)("p",null,"It is totally up to you on how you define a ",Object(u.b)("inlineCode",{parentName:"p"},"type")," in ",Object(u.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/api/react_menu#plugins---plugins"}),"calculateType"),"\nand what you render for that type, see ",Object(u.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/api/react_menu#floatingmenu-reactelement"}),"renderMenuType"),".\n",Object(u.b)("strong",{parentName:"p"},"See API docs:")),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},Object(u.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/api/react_menu"}),"@banglejs/react-menu"))))}ve.isMDXComponent=!0},128:function(e,t,n){"use strict";n.d(t,"p",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"k",(function(){return s})),n.d(t,"s",(function(){return d})),n.d(t,"r",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"l",(function(){return m})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"m",(function(){return b})),n.d(t,"i",(function(){return y})),n.d(t,"q",(function(){return O})),n.d(t,"e",(function(){return w})),n.d(t,"n",(function(){return k})),n.d(t,"j",(function(){return j})),n.d(t,"o",(function(){return M})),n.d(t,"h",(function(){return E})),n.d(t,"c",(function(){return A})),n.d(t,"t",(function(){return C}));var r=n(154),o=n(131),i=n(169),a=n(140);function c(){return r.safeInsert.apply(void 0,arguments)}var u=r.findParentNodeOfType;function s(e){return function(t){var n=t.selection,r=n.from,o=n.$from,i=n.to;return n.empty?Boolean(e.isInSet(t.tr.storedMarks||o.marks())):Boolean(t.doc.rangeHasMark(r,i,e))}}var d=function(e,t){return Number.isInteger(e)&&e>=0&&e<t.content.size},l=function(e,t){return[t.bulletList,t.orderedList,t.todoList].includes(e)};function f(e,t){var n=e.selection,r=n.from,o=n.to,i=[];e.doc.nodesBetween(r,o,(function(e){i=[].concat(i,e.marks)}));var a=i.find((function(e){return e.type.name===t.name}));return a?a.attrs:{}}function p(e){var t;if(e.isInline)return(t=e).isText?!!t.textContent.trim():"hardBreak"!==t.type.name;if(e.isBlock&&(e.isLeaf||e.isAtom))return!0;if(!e.childCount)return!1;for(var n=0;n<e.childCount;n++){if(p(e.child(n)))return!0}return!1}function m(e){if(e&&e.textContent)return!1;if(!e||!e.childCount||1===e.childCount&&v(e.firstChild))return!0;var t=[],n=[];return e.forEach((function(e){e.isInline?n.push(e):t.push(e)})),!n.length&&!t.filter((function(e){return!!e.childCount&&!(1===e.childCount&&v(e.firstChild))||e.isAtom})).length}function v(e){return!e||"paragraph"===e.type.name&&!e.textContent&&!e.childCount}function h(e,t){return function(n,r,o){return Array.isArray(e)||(e=[e]),!e.some((function(e){return!e(n,o)}))&&(t(n,r,o)||!1)}}function g(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function b(e,t,n,r){return 0===function(e,t,n){var r=[],o=function(e,t){var n=["blockquote","bulletList","orderedList"];if(1===t.depth)return t;var r=t.node(t.depth),o=t;for(;t.depth>=1;)(r=(t=e.resolve(t.before(t.depth))).node(t.depth))&&-1!==n.indexOf(r.type.name)&&(o=t);return o}(e,t).depth,i=e.resolve(t.start(o));for(;i.pos<=n.start(n.depth);){var a=Math.min(i.depth,o),c=i.node(a);if(c&&r.push(c),0===a)break;var u=e.resolve(i.after(a));if(u.start(a)>=e.nodeSize-2)break;u.depth!==i.depth&&(u=e.resolve(u.pos+2)),i=u.depth?e.resolve(u.start(u.depth)):e.resolve(u.end(u.depth))}return r}(e,t,n).filter((function(e){return e.type!==r})).length}var y=function(e){var t=e.selection,n=t.empty,r=t.$from;return n&&(0===r.parentOffset||e.selection instanceof i.a)},O=function(e,t){var n,r=e.tr.selection,o=r.from,i=r.to;return e.doc.nodesBetween(o,i,(function(r,a,c){if(r.isText||a<o||a>i)return!0;r.marks.forEach((function(o){if(!c.type.allowsMarkType(o.type)||t&&!t.allowsMarkType(o.type)){var i=r.marks.filter((function(e){return e.type!==o.type})),u=a>0?a-1:0,s=e.doc.nodeAt(u);if(!s||s.isText)return;n=(n||e.tr).setNodeMarkup(u,void 0,r.attrs,i)}}))}),o),n},w=function(e,t,n){var r=n.depth,o=t.nodes,i=o.bulletList,a=o.orderedList,c=o.todoList,u=e;u||(u=t.nodes.listItem);for(var s=n.depth;s>0;s--){var d=n.node(s);if(d.type!==i&&d.type!==a&&d.type!==c||(r=s),d.type!==i&&d.type!==a&&d.type!==c&&d.type!==u)break}return r-1};function k(e,t){for(var n=[],r=0;r<e.childCount;r++)n.push(t(e.child(r),r,e instanceof o.Fragment?e:e.content));return n}var j=function(e){var t=e.selection.$from;return!(t.depth>1)||(e.selection instanceof i.a&&0===t.parentOffset||0===t.index(t.depth-1))};function M(e,t){var n=S(e.content,t);return new o.Slice(n,e.openStart,e.openEnd)}function S(e,t,n){for(var r=[],i=0,a=e.childCount;i<a;i++){var c=e.child(i),u=c.isLeaf?t(c,n,i):t(c.copy(S(c.content,t,c)),n,i);u&&(u instanceof o.Fragment?r.push.apply(r,u.content):Array.isArray(u)?r.push.apply(r,u):r.push(u))}return o.Fragment.fromArray(r)}function E(e,t,n){void 0===t&&(t="above"),void 0===n&&(n=!1);var r="above"===t,o=n?-1:void 0;return function(t,n){var i=r?t.selection.$from.before(o):t.selection.$from.after(o),a=e.createAndFill(),u=t.tr,s=c(a,i)(t.tr);return u!==s&&(n&&n(s.scrollIntoView()),!0)}}function A(e,t,n,r){var o={start:-1,end:-1};return t.nodesBetween(n,r,(function(t,n){if(o.start>-1)return!1;-1===o.start&&e.isInSet(t.marks)&&(o={start:n,end:n+Math.max(t.textContent.length,1)})})),o}function C(e,t){return new a.c({key:e,state:{init:function(){return t},apply:function(e,t){return t}}})}},135:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"h",(function(){return l}));n(193),n(194);var r=n(131);function o(e){if(null==e)throw new Error("undefined value passed");return Array.isArray(e)?e:[e]}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=[e].concat(n);return function(e){return o.reduceRight((function(e,t){return t(e)}),e)}}function a(e,t){var n,r=[].concat(t.matchAll(e));if(0===r.length)return[{start:0,end:t.length,match:!1,subString:t}];for(var o=[],i=0,a=0;a<r.length;a++){var c=r[a],u=c.index,s=u+c[0].length;i!==u&&o.push({start:i,end:u,match:!1}),o.push({start:u,end:s,match:!0}),i=s}var d=null===(n=o[o.length-1])||void 0===n?void 0:n.end;return d&&d!==t.length&&o.push({start:d,end:t.length,match:!1}),o=o.map((function(e){return Object.assign({},e,{subString:t.slice(e.start,e.end)})}))}function c(e,t){return Object.fromEntries(Object.entries(e).map((function(e){var n=e[0],r=e[1];return[n,t(r,n)]})))}function u(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=e[0],r=e[1];return t(r,n)})))}var s=console.warn.bind(console,"Warning in bangle.js:");function d(e){var t=r.DOMSerializer.renderSpec(window.document,e),n=t.dom;if(t.contentDOM)throw new Error("createElement does not support creating contentDOM");return n}function l(e,t){requestAnimationFrame((function(){t(e.state,e.dispatch,e)}))}},136:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return f}));var r=n(154),o=n(130),i=n(135),a=n(128),c=n(131),u=n(150);function s(e){return function(t,n,i){if(!t.selection.empty)return!1;var a=Object(r.findParentNodeOfType)(e)(t.selection);if(!a)return!1;var c=t.selection,u=t.tr;u=u.setSelection(function(e,t){var n=e.selection.$from,r=n.start(t),i=n.end(t);return o.TextSelection.create(e.doc,r,i)}(t,a.depth)),n&&n(u),document.execCommand("copy");var s=i.state.tr;return n&&n(s.setSelection(o.Selection.near(s.doc.resolve(c.$from.pos)))),!0}}function d(e){return function(t,n){if(!t.selection.empty)return!1;var i=Object(r.findParentNodeOfType)(e)(t.selection);if(!i||!i.node)return!1;var a=t.tr;return a=a.setSelection(o.NodeSelection.create(a.doc,i.pos)),n&&n(a),document.execCommand("cut"),!0}}function l(e,t){return t=Object(i.a)(t),function(n){var o=Object(r.findParentNodeOfType)(e)(n.selection);if(!o)return!1;var i=o.depth-1;if(i<0)return!1;var a=n.selection.$from.node(i);return t.includes(a.type)}}function f(e,t){void 0===t&&(t="UP");var n="DOWN"===t;return function(t,i){if(!t.selection.empty)return!1;var s=t.selection.$from,d=Object(r.findParentNodeOfType)(e)(t.selection);if(!d)return!1;var l=d.node,f=d.depth-1,p=s.node(f),m=s.start(f);if(l.type!==e)return!1;var v=Object(a.n)(p,(function(e){return e})),h=v.indexOf(l),g=n?h+1:h-1;if(g>=v.length||g<0)return!1;var b=v[g].nodeSize,y=[v[g],v[h]];v[h]=y[0],v[g]=y[1];var O=t.tr,w=m,k=s.end(f),j=new c.Slice(c.Fragment.fromArray(v),0,0);return O=(O=O.step(new u.c(w,k,j,!1))).setSelection(o.Selection.near(O.doc.resolve(n?s.pos+b:s.pos-b))),i&&i(O.scrollIntoView()),!0}}},140:function(e,t,n){"use strict";n.d(t,"f",(function(){return o.h})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return y})),n.d(t,"e",(function(){return u.a})),n.d(t,"c",(function(){return h.a})),n.d(t,"d",(function(){return h.c})),n.d(t,"g",(function(){return r.b}));var r=n(144),o=n(147),i=n(131),a=n(161),c=n(130),u=n(152),s=n(168),d=n(134),l=n(132),f=n(217),p=n(133),m=n(218),v=n(135),h=n(142);function g(e,t,n){var r=void 0===n?{}:n,i=r.editorProps,a=r.defaultPlugins,c=void 0===a||a,u=r.dropCursorOpts,g=r.transformPlugins,y=void 0===g?function(e){return e}:g,O=e.schema,w=b(t,{schema:O,specRegistry:e}),k=w[0],j=w[1];if(c){var M=[];j.has("history")||M.push(o.i.plugins()),(k=function(e,t){var n=void 0===t?{}:t,r=n.inputRules,o=void 0===r||r,i=n.undoInputRule,a=void 0===i||i,c=[],u=[];e.forEach((function(e){e instanceof d.a?u.push(e):c.push(e)})),o&&(e=[].concat(c,[Object(d.b)({rules:u})]));a&&e.push(Object(l.b)({Backspace:d.d}));return e}(k=k.concat(b(M,{schema:O,specRegistry:e})[0]))).push(Object(l.b)(p.b),Object(m.a)(u),Object(f.a)())}if(i&&k.push(new h.a({props:i})),(k=y(k=k.filter(Boolean))).some((function(e){return!(e instanceof h.a)})))throw Object(v.b)("You are either using multiple versions of the library or not returning a Plugin class in your plugins. Investigate :",k.find((function(e){return!(e instanceof h.a)}))),new Error("Invalid plugin");return function(e,t){for(var n,r=e.filter((function(e){return e.props&&e.props.nodeViews})),o=new Map,i=Object(s.a)(r);!(n=i()).done;)for(var a=n.value,c=0,u=Object.keys(a.props.nodeViews);c<u.length;c++){var d=u[c];if(!t.schema.nodes[d])throw Object(v.b)("When loading your plugins, we found nodeView implementation for the node '"+d+"' did not have a corresponding spec. Check the plugin:",a,"and your specRegistry",t),new Error("NodeView validation failed. Spec for '"+d+"' not found.");if(o.has(d))throw Object(v.b)("When loading your plugins, we found more than one nodeView implementation for the node '"+d+"'. Bangle can only have a single nodeView implementation, please check the following two plugins",a,o.get(d)),new Error("NodeView validation failed. Duplicate nodeViews for '"+d+"' found.");o.set(d,a)}}(k,e),k}function b(e,t){var n=new Set;return[function e(r){if(Array.isArray(r))return r.flatMap((function(t){return e(t)})).filter(Boolean);if(r instanceof h.b){if(n.has(r.name))throw new Error("Duplicate names of pluginGroups "+r.name+" not allowed.");return n.add(r.name),e(r.plugins)}if("function"==typeof r){if(!t)throw new Error("Found a function but no payload");return e(r(t))}return r}(e),n]}var y=function(e){var t=void 0===e?{}:e,n=t.specRegistry,r=t.specs,o=t.plugins,i=void 0===o?[]:o,a=t.initialValue,s=t.editorProps,d=t.pmStateOpts;if(r&&n)throw new Error("Cannot have both specs and specRegistry defined");n||(n=new u.a(r)),this.specRegistry=n;var l=this.specRegistry.schema;this.pmState=c.EditorState.create(Object.assign({schema:l,doc:O({schema:l,content:a}),plugins:g(n,i,{editorProps:s})},d))},O=function(e){var t=e.schema,n=e.content,r=e.parseOptions;if(null==n)return t.nodeFromJSON({type:"doc",content:[{type:"paragraph"}]});if(n instanceof i.Node)return n;if("object"==typeof n)return t.nodeFromJSON(n);if("string"==typeof n){var o=document.createElement("div");return o.innerHTML=n.trim(),i.DOMParser.fromSchema(t).parse(o,r)}return!1};var w=function(){function e(e,t){var n=t.focusOnInit,r=void 0===n||n,o=t.state,i=t.pmViewOpts,c=void 0===i?{}:i;if(this.destroyed=!1,!(o instanceof y))throw new Error("state is required and must be an instance of BangleEditorState");this.view=new a.c(e,Object.assign({state:o.pmState,dispatchTransaction:function(e){var t=this.state.apply(e);this.updateState(t)},attributes:{class:"bangle-editor"}},c)),r&&this.focusView()}var t=e.prototype;return t.focusView=function(){this.view.focused||this.view.focus()},t.destroy=function(){this.destroyed||(null!==this.view.docView?(this.destroyed=!0,this.view.destroy()):this.destroyed=!0)},t.toHTMLString=function(){var e=document.createElement("div"),t=i.DOMSerializer.fromSchema(this.view.state.schema).serializeFragment(this.view.state.doc.content);return e.appendChild(t),e.innerHTML},e}();n(149)},142:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(130);n.d(t,"a",(function(){return r.Plugin})),n.d(t,"c",(function(){return r.PluginKey}));var o=function(e,t){this.name=e,this.plugins=t}},144:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if("undefined"!=typeof navigator){var o=/Edge\/(\d+)/.exec(navigator.userAgent),i=/MSIE \d/.test(navigator.userAgent),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);r.mac=/Mac/.test(navigator.platform);var c=r.ie=!!(i||a||o);r.ie_version=i?document.documentMode||6:a?+a[1]:o?+o[1]:null,r.gecko=!c&&/gecko\/\d/i.test(navigator.userAgent),r.chrome=!c&&/Chrome\//.test(navigator.userAgent),r.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1],10),r.android=/Android \d/.test(navigator.userAgent),r.ios=!c&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),r.webkit=!c&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}t.a=r;var u=r.chrome&&!r.android&&r.chrome_version>=58},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(134);function o(e,t){return new r.a(e,(function(e,n,r,o){var i=e.tr,a=n.length-1,c=o,u=r;if(n[a]){var s=r+n[0].indexOf(n[a-1]),d=s+n[a-1].length-1,l=s+n[a-1].lastIndexOf(n[a]),f=l+n[a].length;if(function(e,t,n){var r=[];return n.doc.nodesBetween(e,t,(function(e,t){r=[].concat(r,e.marks.map((function(n){return{start:t,end:t+e.nodeSize,mark:n}})))})),r}(r,o,e).filter((function(e){return e.mark.type.excluded.find((function(e){return e.name===t.name}))})).filter((function(e){return e.end>s})).length)return!1;f<d&&i.delete(f,d),l>s&&i.delete(s,l),c=(u=s)+n[a].length}return i.addMark(u,c,t.create()),i.removeStoredMark(t),i}))}},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(130),o=n(131);function i(e,t,n){var i=function r(i,a){var c=[];return i.forEach((function(o){if(o.isText){for(var i,u=o.text,s=0,d=!!o.marks.filter((function(e){return"link"===e.type.name}))[0];!d&&null!==(i=e.exec(u));)if(a&&a.type.allowsMarkType(t)&&i[1]){var l=i.index,f=l+i[0].length,p=l+i[0].indexOf(i[1]),m=p+i[1].length,v=n instanceof Function?n(i):n;l>0&&c.push(o.cut(s,l)),c.push(o.cut(p,m).mark(t.create(v).addToSet(o.marks))),s=f}s<u.length&&c.push(o.cut(s))}else c.push(o.copy(r(o.content,o)))})),o.Fragment.fromArray(c)};return new r.Plugin({props:{transformPasted:function(e){return new o.Slice(i(e.content),e.openStart,e.openEnd)}}})}},147:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return O})),n.d(t,"q",(function(){return r})),n.d(t,"u",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"p",(function(){return a})),n.d(t,"r",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return le})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return je})),n.d(t,"j",(function(){return l})),n.d(t,"n",(function(){return f})),n.d(t,"o",(function(){return p})),n.d(t,"s",(function(){return m})),n.d(t,"t",(function(){return tt})),n.d(t,"k",(function(){return v})),n.d(t,"i",(function(){return h}));var r={};n.r(r),n.d(r,"spec",(function(){return E})),n.d(r,"plugins",(function(){return A})),n.d(r,"commands",(function(){return C})),n.d(r,"defaultKeys",(function(){return T})),n.d(r,"toggleStrike",(function(){return L})),n.d(r,"queryIsStrikeActive",(function(){return D}));var o={};n.r(o),n.d(o,"spec",(function(){return x})),n.d(o,"plugins",(function(){return P})),n.d(o,"commands",(function(){return N})),n.d(o,"defaultKeys",(function(){return _})),n.d(o,"toggleUnderline",(function(){return q})),n.d(o,"queryIsUnderlineActive",(function(){return R}));var i={};n.r(i),n.d(i,"spec",(function(){return V}));var a={};n.r(a),n.d(a,"spec",(function(){return K})),n.d(a,"plugins",(function(){return W})),n.d(a,"commands",(function(){return F})),n.d(a,"defaultKeys",(function(){return Z})),n.d(a,"convertToParagraph",(function(){return Y})),n.d(a,"jumpToStartOfParagraph",(function(){return X})),n.d(a,"jumpToEndOfParagraph",(function(){return Q})),n.d(a,"queryIsTopLevelParagraph",(function(){return ee})),n.d(a,"queryIsParagraph",(function(){return te}));var c={};n.r(c),n.d(c,"spec",(function(){return ne}));var u={};n.r(u),n.d(u,"spec",(function(){return oe})),n.d(u,"plugins",(function(){return ie})),n.d(u,"commands",(function(){return ae})),n.d(u,"defaultKeys",(function(){return ce})),n.d(u,"queryIsBlockQuoteActive",(function(){return de}));var s={};n.r(s),n.d(s,"spec",(function(){return fe})),n.d(s,"plugins",(function(){return pe})),n.d(s,"commands",(function(){return me})),n.d(s,"defaultKeys",(function(){return ve})),n.d(s,"queryIsCodeActiveBlock",(function(){return be}));var d={};n.r(d),n.d(d,"spec",(function(){return ye})),n.d(d,"plugins",(function(){return Oe})),n.d(d,"defaultKeys",(function(){return we}));var l={};n.r(l),n.d(l,"spec",(function(){return Me})),n.d(l,"plugins",(function(){return Se}));var f={};n.r(f),n.d(f,"spec",(function(){return Ce})),n.d(f,"plugins",(function(){return Te})),n.d(f,"commands",(function(){return Ie})),n.d(f,"defaultKeys",(function(){return Le})),n.d(f,"indentListItem",(function(){return Pe})),n.d(f,"outdentListItem",(function(){return Ne}));var p={};n.r(p),n.d(p,"spec",(function(){return _e})),n.d(p,"plugins",(function(){return Be})),n.d(p,"commands",(function(){return qe})),n.d(p,"defaultKeys",(function(){return Re})),n.d(p,"toggleOrderedList",(function(){return He})),n.d(p,"queryIsBulletListActive",(function(){return $e}));var m={};n.r(m),n.d(m,"spec",(function(){return We})),n.d(m,"plugins",(function(){return Fe})),n.d(m,"defaultKeys",(function(){return Ze})),n.d(m,"commands",(function(){return Ge})),n.d(m,"toggleTodoItemDone",(function(){return Qe})),n.d(m,"queryTodoItemAttrs",(function(){return et}));var v={};n.r(v),n.d(v,"spec",(function(){return ct})),n.d(v,"plugins",(function(){return ut})),n.d(v,"commands",(function(){return st})),n.d(v,"updateImageNodeAttribute",(function(){return ht}));var h={};n.r(h),n.d(h,"plugins",(function(){return yt})),n.d(h,"commands",(function(){return Ot})),n.d(h,"defaultKeys",(function(){return wt})),n.d(h,"undo",(function(){return kt})),n.d(h,"redo",(function(){return jt}));var g=n(160),b=n(162),y=n(163),O=n(158),w=n(145),k=n(146),j=n(133),M=n(132),S=n(128),E=function(e){void 0===e&&(e={});return{type:"mark",name:I,schema:{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function(e){return"line-through"===e}}],toDOM:function(){return["s",0]}},markdown:{toMarkdown:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{s:{mark:"strike"}}}}},A=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?T:t;return function(e){var t,r=function(e){return e.marks.strike}(e.schema);return[Object(k.a)(/~([^~]+)~/g,r),Object(w.a)(/~([^~]+)~$/,r),n&&Object(M.b)((t={},t[n.toggleStrike]=Object(j.f)(r),t))]}},C={toggleStrike:L,queryIsStrikeActive:D},T={toggleStrike:"Mod-d"},I="strike";function L(){return function(e,t,n){return Object(j.f)(e.schema.marks.strike)(e,t,n)}}function D(){return function(e){return Object(S.k)(e.schema.marks.strike)(e)}}var x=function(e){void 0===e&&(e={});return{type:"mark",name:B,schema:{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:function(e){return e===B}}],toDOM:function(){return["u",0]}},markdown:{toMarkdown:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0}}}},P=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?_:t;return function(e){var t,r=function(e){return e.marks.underline}(e.schema);return[Object(w.a)(/~([^~]+)~$/,r),Object(k.a)(/~([^~]+)~/g,r),n&&Object(M.b)((t={},t[n.toggleUnderline]=Object(j.f)(r),t))]}},N={toggleUnderline:q,queryIsUnderlineActive:R},_={toggleUnderline:"Mod-u"},B="underline";function q(){return function(e,t,n){return Object(j.f)(e.schema.marks.underline)(e,t,n)}}function R(){return function(e){return Object(S.k)(e.schema.marks.underline)(e)}}var V=function(e){var t=(void 0===e?{}:e).content;return{type:"node",topNode:!0,name:"doc",schema:{content:void 0===t?"block+":t}}};var H=n(130),$=n(151),U=n(136),z=n(144),K=function(e){void 0===e&&(e={});return{type:"node",name:G,schema:{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},markdown:{toMarkdown:function(e,t){e.renderInline(t),e.closeBlock(t)},parseMarkdown:{paragraph:{block:"paragraph"}}}}},W=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?Z:t;return function(e){var t,r=e.schema,o=J(r),i=Object(U.d)(o,r.nodes.doc);return[n&&Object($.b)((t={},t[n.toggleParagraph]=Y(),t[n.moveUp]=Object(S.a)(i,Object(U.c)(o,"UP")),t[n.moveDown]=Object(S.a)(i,Object(U.c)(o,"DOWN")),t[n.jumpToStartOfParagraph]=X(),t[n.jumpToEndOfParagraph]=Q(),t[n.emptyCopy]=Object(S.a)(i,Object(U.a)(o)),t[n.emptyCut]=Object(S.a)(i,Object(U.b)(o)),t[n.insertEmptyParaAbove]=Object(S.a)(i,Object(S.h)(o,"above")),t[n.insertEmptyParaBelow]=Object(S.a)(i,Object(S.h)(o,"below")),t))]}},F={setParagraph:Y,jumpToStartOfParagraph:X,jumpToEndOfParagraph:Q},Z={jumpToEndOfParagraph:z.a.mac?"Ctrl-e":"Ctrl-End",jumpToStartOfParagraph:z.a.mac?"Ctrl-a":"Ctrl-Home",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter",toggleParagraph:"Ctrl-Shift-0"},G="paragraph",J=function(e){return e.nodes.paragraph};function Y(){return function(e,t){return Object(j.e)(J(e.schema))(e,t)}}function X(){return function(e,t){var n=J(e.schema),r=Object(S.d)(n)(e.selection);if(!r)return!1;var o=r.start;return t(e.tr.setSelection(H.TextSelection.create(e.doc,o))),!0}}function Q(){return function(e,t){var n=J(e.schema),r=Object(S.d)(n)(e.selection);if(!r)return!1;var o=r.node,i=r.start;return t(e.tr.setSelection(H.TextSelection.create(e.doc,i+o.content.size))),!0}}function ee(){return function(e,t,n){var r=J(e.schema);return Object(U.d)(r,e.schema.nodes.doc)}}function te(){return function(e,t,n){var r=J(e.schema);return Object(U.d)(r,e.schema.nodes.doc)}}var ne=function(e){void 0===e&&(e={});return{type:"node",name:"text",schema:{group:"inline"},markdown:{toMarkdown:function(e,t){e.text(t.text)}}}};var re=n(134),oe=function(e){void 0===e&&(e={});return{type:"node",name:ue,schema:{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},markdown:{toMarkdown:function(e,t){e.wrapBlock("> ",null,t,(function(){return e.renderContent(t)}))},parseMarkdown:{blockquote:{block:ue}}}}},ie=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,r=void 0===n||n,o=t.keybindings,i=void 0===o?ce:o;return function(e){var t,n=e.schema,o=se(n),a=de();return[r&&Object(re.e)(/^\s*>\s$/,o),i&&Object(M.b)((t={},t[i.wrapIn]=Object(S.a)((function(e){return!a(e)}),(function(e,t,n){return Object(j.g)(o)(e,t,n)})),t[i.moveUp]=Object(U.c)(o,"UP"),t[i.moveDown]=Object(U.c)(o,"DOWN"),t[i.emptyCopy]=Object(U.a)(o),t[i.emptyCut]=Object(U.b)(o),t[i.insertEmptyParaAbove]=Object(S.a)(a,Object(S.h)(n.nodes.paragraph,"above",!0)),t[i.insertEmptyParaBelow]=Object(S.a)(a,Object(S.h)(n.nodes.paragraph,"below",!0)),t))]}},ae={queryIsBlockQuoteActive:de},ce={wrapIn:"Ctrl-ArrowRight",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},ue="blockquote",se=function(e){return e.nodes.blockquote};function de(){return function(e){var t=se(e.schema);return Boolean(Object(S.d)(t)(e.selection))}}var le=n(164),fe=function(e){void 0===e&&(e={});return{type:"node",name:he,schema:{attrs:{language:{default:""}},content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},markdown:{toMarkdown:function(e,t){e.write("```"+(t.attrs.language||"")+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parseMarkdown:{code_block:{block:he,noCloseToken:!0},fence:{block:he,getAttrs:function(e){return{language:e.info||""}},noCloseToken:!0}}}}},pe=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,r=void 0===n||n,o=t.keybindings,i=void 0===o?ve:o;return function(e){var t,n=e.schema,o=ge(n);return[r&&Object(re.c)(/^```$/,o),i&&Object(M.b)((t={},t[i.toCodeBlock]=Object(j.e)(o),t[i.moveUp]=Object(U.c)(o,"UP"),t[i.moveDown]=Object(U.c)(o,"DOWN"),t[i.insertEmptyParaAbove]=Object(S.a)(be(),Object(S.h)(n.nodes.paragraph,"above",!1)),t[i.insertEmptyParaBelow]=Object(S.a)(be(),Object(S.h)(n.nodes.paragraph,"below",!1)),t))]}},me={queryIsCodeActiveBlock:be},ve={toCodeBlock:"Shift-Ctrl-\\",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},he="codeBlock",ge=function(e){return e.nodes.codeBlock};function be(){return function(e){var t=ge(e.schema);return Boolean(Object(S.d)(t)(e.selection))}}var ye=function(e){void 0===e&&(e={});return{type:"node",name:ke,schema:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},markdown:{toMarkdown:function(e,t,n,r){for(var o=r+1;o<n.childCount;o++)if(n.child(o).type!==t.type)return void e.write("\\\n")},parseMarkdown:{hardbreak:{node:"hardBreak"}}}}},Oe=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?we:t;return function(e){var t,r=function(e){return e.nodes[ke]}(e.schema),o=Object(j.c)(j.d,(function(e,t){return t&&t(e.tr.replaceSelectionWith(r.create()).scrollIntoView()),!0}));return[n&&Object(M.b)((t={},t[n.insert]=o,t))]}},we={insert:"Shift-Enter"},ke="hardBreak";var je=n(165),Me=function(e){void 0===e&&(e={});return{type:"node",name:Ee,schema:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},markdown:{toMarkdown:function(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},parseMarkdown:{hr:{node:Ee}}}}},Se=function(e){var t=(void 0===e?{}:e).markdownShortcut,n=void 0===t||t;return function(e){var t=function(e){return e.nodes.horizontalRule}(e.schema);return[n&&new re.a(/^(?:---|___\s|\*\*\*\s)$/,(function(e,n,r,o){if(!n[0])return null;var i=e.tr.replaceWith(r-1,o,t.createChecked());return Object(S.p)(e.schema.nodes.paragraph.createChecked(),i.selection.end)(i)}))]}},Ee="horizontalRule";var Ae=n(148),Ce=function(e){void 0===e&&(e={});return{type:"node",name:De,schema:{content:"(paragraph) (paragraph | bulletList | orderedList)*",defining:!0,draggable:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}},markdown:{toMarkdown:function(e,t){e.renderContent(t)},parseMarkdown:{list_item:{block:De}}}}},Te=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?Le:t;return function(e){var t,r=e.schema,o=xe(r),i=Object(U.d)(o,[r.nodes.bulletList,r.nodes.orderedList]),a=function(e){return Object(j.c)(Object(U.c)(o,e),Object(Ae.d)(o,e))};return[n&&Object(M.b)((t={Backspace:Object(Ae.a)(o),Enter:Object(Ae.b)(o)},t[n.indent]=Pe(),t[n.outdent]=Ne(),t[n.moveUp]=Object(S.a)(i,a("UP")),t[n.moveDown]=Object(S.a)(i,a("DOWN")),t[n.emptyCut]=Object(S.a)(i,Object(U.b)(o)),t[n.emptyCopy]=Object(S.a)(i,Object(U.a)(o)),t[n.insertEmptyListAbove]=Object(S.a)(i,Object(S.h)(o,"above",!0)),t[n.insertEmptyListBelow]=Object(S.a)(i,Object(S.h)(o,"below",!0)),t))]}},Ie={indentListItem:Pe,outdentListItem:Ne},Le={indent:"Tab",outdent:"Shift-Tab",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyListAbove:"Mod-Shift-Enter",insertEmptyListBelow:"Mod-Enter"},De="listItem",xe=function(e){return e.nodes.listItem};function Pe(){return function(e,t,n){var r=xe(e.schema);return Object(Ae.c)(r)(e,t,n)}}function Ne(){return function(e,t,n){var r=xe(e.schema);return Object(Ae.e)(r)(e,t,n)}}var _e=function(e){void 0===e&&(e={});return{type:"node",name:Ve,schema:{attrs:{order:{default:1}},content:"listItem+",group:"block",parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1===e.attrs.order?["ol",0]:["ol",{start:e.attrs.order},0]}},markdown:{toMarkdown:function(e,t){var n=t.attrs.order||1,r=String(n+t.childCount-1).length,o=e.repeat(" ",r+2);e.renderList(t,o,(function(t){var o=String(n+t);return e.repeat(" ",r-o.length)+o+". "}))},parseMarkdown:{ordered_list:{block:Ve}}}}},Be=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?Re:t;return function(e){var t,r=function(e){return e.nodes.orderedList}(e.schema);return[Object(re.e)(/^(1)[\.\)] $/,r,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order===+e[1]})),n&&Object(M.b)((t={},t[n.toggle]=Object(Ae.g)(r),t))]}},qe={},Re={toggle:"Shift-Ctrl-9"},Ve="orderedList";function He(){return function(e,t,n){return Object(Ae.g)(e.schema.nodes.orderedList,e.schema.nodes.listItem)(e,t,n)}}function $e(){return function(e){var t=e.schema;return Object(U.d)(t.nodes.listItem,[t.nodes.orderedList])(e)}}var Ue=n(149),ze=n(196),Ke=n(135),We=function(e){var t=void 0===e?{}:e,n=t.nested,r=void 0===n||n,o=t.draggable,i=void 0===o||o,a=Object(ze.a)(Ye,{tag:"li",parsingPriority:51,content:0}),c=a.toDOM,u=a.parseDOM;return{type:"node",name:Ye,schema:{attrs:{done:{default:!1}},draggable:i,content:r?"(paragraph) (paragraph | todoList | bulletList | orderedList)*":"(paragraph) (paragraph | bulletList | orderedList)*",toDOM:c,parseDOM:u},markdown:{toMarkdown:function(e,t){e.write(t.attrs.done?"[x] ":"[ ] "),e.renderContent(t)},parseMarkdown:{todo_item:{block:Ye,getAttrs:function(e){return{"data-name":Ye,done:e.attrGet("isDone")||!1}}}}},options:{nested:r}}},Fe=function(e){var t=void 0===e?{}:e,n=t.nodeView,r=void 0===n||n,o=t.keybindings,i=void 0===o?Ze:o;return function(e){var t,n=e.schema,o=e.specRegistry.options.todoItem.nested,a=Xe(n),c=function(e){return Object(j.c)(Object(U.c)(a,e),Object(Ae.d)(a,e))},u=Object(U.d)(a,n.nodes.todoList);return[i&&Object(M.b)((t={},t[i.toggleDone]=Object(S.a)(u,Object(Ae.h)(a,(function(e){return Object.assign({},e,{done:!e.done})}))),t.Enter=Object(Ae.b)(a),t.Backspace=Object(Ae.a)(a),t[i.indent]=o?Object(Ae.c)(a):function(){},t[i.outdent]=Object(Ae.e)(a),t[i.moveUp]=Object(S.a)(u,c("UP")),t[i.moveDown]=Object(S.a)(u,c("DOWN")),t[i.emptyCut]=Object(S.a)(u,Object(U.b)(a)),t[i.emptyCopy]=Object(S.a)(u,Object(U.a)(a)),t[i.insertEmptyTodoAbove]=Object(S.a)(u,Object(S.h)(a,"above",!0)),t[i.insertEmptyTodoBelow]=Object(S.a)(u,Object(S.h)(a,"below",!0)),t)),r&&Ue.a.createPlugin({name:Ye,containerDOM:["li",{"data-bangle-name":Ye}],contentDOM:["span",{}],renderHandlers:{create:function(e,t){var n=t.attrs,r=t.updateAttrs,o=(t.getPos,Object(Ke.d)(["span",{contentEditable:!1},["input",{type:"checkbox"}]])),i=o.querySelector("input");n.done&&i.setAttribute("checked",""),e.containerDOM.appendChild(o),e.containerDOM.appendChild(e.contentDOM),i.addEventListener("input",(function(e){Je("change event",i.checked),r({done:i.checked})}))},update:function(e,t){var n=t.attrs,r=e.containerDOM.querySelector("input"),o=n.done,i=r.hasAttribute("checked");o!==i?(Je("updating inputElement"),o?r.setAttribute("checked","true"):r.removeAttribute("checked")):Je("skipping update",o,i)},destroy:function(){}}})]}},Ze={toggleDone:z.a.mac?"Ctrl-Enter":"Ctrl-I",indent:"Tab",outdent:"Shift-Tab",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyTodoAbove:"Mod-Shift-Enter",insertEmptyTodoBelow:"Mod-Enter"},Ge={toggleTodoItemDone:Qe,queryTodoItemAttrs:et},Je=function(){},Ye="todoItem",Xe=function(e){return e.nodes.todoItem};function Qe(){return function(e,t,n){var r=Xe(e.schema);return Object(Ae.h)(r,(function(e){return Object.assign({},e,{done:!e.done})}))(e,t,n)}}function et(){return function(e,t,n){var r=Xe(e.schema);return Object(Ae.f)(r)(e,t,n)}}var tt=n(166),nt=n(193),rt=n.n(nt),ot=n(168),it=n(194),at=n(154),ct=function(e){void 0===e&&(e={});return{type:"node",name:dt,schema:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){return["img",e.attrs]}},markdown:{toMarkdown:function(e,t){var n=e.esc(t.attrs.alt||""),r=e.esc(t.attrs.src)+(t.attrs.title?" "+e.quote(t.attrs.title):"");e.write("!["+n+"]("+r+")")},parseMarkdown:{image:{node:dt,getAttrs:function(e){return{src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null}}}}}}},ut=function(e){var t=void 0===e?{}:e,n=t.handleDragAndDrop,r=void 0===n||n;t.keybindings;return function(e){var t=e.schema,n=lt(t);return[new re.a(/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,(function(e,t,r,o){var i=t[1],a=t[2],c=t[3];if(a)return c||(c=i),e.tr.replaceWith(r,o,n.create({src:a,alt:i,title:c}))})),r&&new H.Plugin({key:new H.PluginKey("image-drop-paste"),props:{handleDOMEvents:{drop:function(e,t){if(null==t.dataTransfer)return!1;var n=vt(t.dataTransfer,"image/*",!0);if(!n||0===n.length)return!1;t.preventDefault();var r=e.posAtCoords({left:t.clientX,top:t.clientY});return ft(e,null==r?void 0:r.pos,n.map((function(e){return mt(e)}))),!0}},handlePaste:function(e,t,n){var r=t;if(!r.clipboardData)return!1;var o=vt(r.clipboardData,"image/*",!0);return!(!o||0===o.length)&&(ft(e,e.state.selection.from,o.map((function(e){return mt(e)}))).catch((function(e){return console.error(e)})),!0)}}})]}},st={},dt="image",lt=function(e){return e.nodes.image};function ft(e,t,n){return pt.apply(this,arguments)}function pt(){return(pt=Object(it.a)(rt.a.mark((function e(t,n,r){var o,i,a,c,u,s,d;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object(ot.a)(r);case 1:if((i=o()).done){e.next=14;break}return a=i.value,e.next=5,a;case 5:if(c=e.sent,u=lt(t.state.schema).create({src:c}),s=t.state.tr,(d=Object(at.safeInsert)(u,n)(s))!==s){e.next=11;break}return e.abrupt("continue",12);case 11:t.dispatch(d);case 12:e.next=1;break;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e){return new Promise((function(t,n){var r=new FileReader;r.onerror=function(){n(new Error("Error reading file"+e.name))},"readAsDataURL"in r?(r.onload=function(e){t(e.target.result)},r.readAsDataURL(e)):(r.onload=function(n){var r=btoa(n.target.result);t("data:"+e.type+";base64,"+r)},r.readAsBinaryString(e))}))}function vt(e,t,n){var r=function(e,t,n){var r,o=Array.from(e);if(""===t)return r=o.filter((function(e){return"file"===e.kind})),n?r:[r[0]];var i=t.toLowerCase().split(",").map((function(e){return e.split("/").map((function(e){return e.trim()}))})).filter((function(e){return 2===e.length})),a=function(e){if("file"!==e.kind)return!1;for(var t,n=e.type.toLowerCase().split("/").map((function(e){return e.trim()})),r=n[0],o=n[1],a=Object(ot.a)(i);!(t=a()).done;){var c=t.value,u=c[0],s=c[1];if(r===u&&("*"===s||o===s))return!0}return!1};r=r=o.filter(a),!1===n&&(r=[r[0]]);return r}(e.items,t,n),o=[];return r.forEach((function(e){var t=null==e?void 0:e.getAsFile();null!=t&&o.push(t)})),o}var ht=function(e){return void 0===e&&(e={}),function(t,n,r){if(!t.selection instanceof H.NodeSelection||!t.selection.node)return!1;var o=t.selection.node;return o.type===lt(t.schema)&&(n&&n(t.tr.setNodeMarkup(t.selection.$from.pos,void 0,Object.assign({},o.attrs,e))),!0)}},gt=n(227),bt=n(142),yt=function(e){var t=void 0===e?{}:e,n=t.historyOpts,r=void 0===n?{}:n,o=t.keybindings,i=void 0===o?wt:o;return function(){var e;return new bt.b("history",[gt.a(r),i&&Object($.a)((e={},e[i.undo]=kt(),e[i.redo]=jt(),e))])}},Ot={undo:kt,redo:jt},wt={undo:"Mod-z",redo:"Mod-y Shift-Mod-z"};function kt(){return gt.c}function jt(){return gt.b}},148:function(e,t,n){"use strict";n.d(t,"g",(function(){return g})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return O})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return M})),n.d(t,"d",(function(){return A})),n.d(t,"h",(function(){return C})),n.d(t,"f",(function(){return T}));var r=n(150),o=n(216),i=n(133),a=n(131),c=n(154),u=n(130),s=n(135),d=n(128),l=n(169);function f(e,t,n,o){var i=n.$from,c=n.$to,u=e;u||(u=t.schema.nodes.listItem);var s=i.blockRange(c,(function(e){return!!e.childCount&&!!e.firstChild&&e.firstChild.type===u}));if(!s||s.depth<2||i.node(s.depth-1).type!==u)return o;var d=s.end,l=c.end(s.depth);return d<l&&(o.step(new r.b(d-1,l,d,l,new a.Slice(a.Fragment.from(u.create(void 0,s.parent.copy())),1,0),1,!0)),s=new a.NodeRange(o.doc.resolve(i.pos),o.doc.resolve(l),s.depth)),o.lift(s,Object(r.j)(s)).scrollIntoView()}var p=function(e,t){for(var n=t.bulletList,r=t.orderedList,o=t.todoList,i=0,a=e.depth-1;a>0;a--){var c=e.node(a);c.type!==n&&c.type!==r&&c.type!==o||(i+=1)}return i},m=function(e){return function(t){var n=t.selection.$from.parent,r=e;r||(r=t.schema.nodes.listItem);var o=t.schema.nodes.paragraph;return t.selection instanceof l.a?n.type===r:n.type===o&&Object(c.hasParentNodeOfType)(r)(t.selection)}};var v=function(e){return function(t){var n=t.selection.$from,r=e;r||(r=t.schema.nodes.listItem);var o=t.schema.nodes.paragraph;return t.selection instanceof l.a?n.parent.type===r:Object(c.hasParentNodeOfType)(r)(t.selection)&&n.parent.type===o}};function h(e){var t=e.selection.$from,n=e.schema.nodes,r=n.bulletList,o=n.orderedList,i=n.todoList,a=e.doc.resolve(t.pos-1),c=a?a.nodeBefore:null;return e.selection instanceof l.a&&(c=t.nodeBefore),!!c&&[r,o,i].indexOf(c.type)>-1}function g(e,t){return function(n,r,a){var c=n.selection,s=c.$from.node(c.$from.depth-2),l=c.$to.node(c.$to.depth-2);if(s&&s.type.name===e.name&&l&&l.type.name===e.name){var p=t||n.schema.nodes.listItem,m=function(e,t,n){for(var r,o=e,i=n.bulletList,a=n.orderedList,c=n.todoList,u=t.depth-1;u>0;u--){var s=t.node(u);if(s.type!==i&&s.type!==a&&s.type!==c||(r=u),s.type!==i&&s.type!==a&&s.type!==o)break}return r}(p,c.$to,n.schema.nodes),v=c.$to.pos;c instanceof u.NodeSelection&&c.node.type===p&&(v=c.$from.pos+c.node.firstChild.content.size);var h=function(e,t,n,r,o,i){var a=e;a||(a=t.schema.nodes.listItem);var c=!1;return i.doc.nodesBetween(n,r,(function(e,r){if(!c&&e.type===a&&r>n){c=!0;for(var s=o+3;s>o+2;){var d=i.doc.resolve(i.mapping.map(r));s=d.depth;var l=i.doc.resolve(i.mapping.map(r+e.textContent.length)),p=new u.TextSelection(d,l);i=f(a,t,p,i)}}})),i}(p,n,v,c.$to.end(m),m||0,n.tr);return h=function(e,t,n){var r=t.selection,o=r.from,i=r.to,a=t.schema.nodes.paragraph,c=[];n.doc.nodesBetween(o,i,(function(e,t){e.type===a&&c.push({node:e,pos:t})}));for(var u=c.length-1;u>=0;u--){var s=c[u],l=n.doc.resolve(n.mapping.map(s.pos));if(l.depth>0){var f=void 0;f=s.node.textContent&&s.node.textContent.length>0?n.doc.resolve(n.mapping.map(s.pos+s.node.textContent.length)):n.doc.resolve(n.mapping.map(s.pos+1));var p=l.blockRange(f);p&&n.lift(p,Object(d.e)(e,t.schema,l))}}return n}(p,n,h),r&&r(h),!0}return function(e){return function(t,n,r){if(n&&n(t.tr.setSelection(function(e,t){var n=t.$from,r=t.$to,o=n.pos===r.pos,i=n.pos,a=r.pos;if(o&&i===e.nodeSize-3)return t;if(n.nodeBefore&&!o){i++;for(var c=e.nodeAt(i);!c||c&&!c.isText;)i++,c=e.nodeAt(i)}if(a===i)return new u.TextSelection(e.resolve(i));return new u.TextSelection(e.resolve(i),e.resolve(a))}(t.doc,t.selection))),!r)return!1;var a=(t=r.state).selection,c=a.$from,s=a.$to,l=Object(d.m)(t.doc,c,s,e);if(function(e,t){var n=e.selection.$from,r=n.node(-2),o=n.node(-3);return r&&r.type===t||o&&o.type===t}(t,e)&&l)return b()(t,n);l||(b()(t,n),t=r.state);var f,p=Object(d.q)(t,e);return p&&n&&(n(p),t=r.state),(f=e,i.a(o.c(f),(function(e,t){return e.type===t.type&&e.type===f})))(t,n)}}(e)(n,r,a)}}function b(){return function(e,t){var n=e.tr,o=e.selection,i=o.$from,a=o.$to;return n.doc.nodesBetween(i.pos,a.pos,(function(t,o){if(t.isTextblock){var i=new u.NodeSelection(n.doc.resolve(n.mapping.map(o))),a=i.$from.blockRange(i.$to);if(!a||![e.schema.nodes.listItem,e.schema.nodes.todoItem].includes(i.$from.parent.type))return!1;var c=a&&Object(r.j)(a);if(null==c)return!1;n.lift(a,c)}})),t&&t(n),!0}}function y(e){return function(t,n){var r=e;return r||(r=t.schema.nodes.listItem),!!v(r)(t)&&(function(e,t){var n,r=t.tr.selection.$to.pos;do{var o=t.doc.resolve(r);if((n=p(o,t.schema.nodes))>4)return!1;r++}while(n>=e);return!0}(p(t.selection.$from,t.schema.nodes),t)&&o.b(r)(t,n),!0)}}function O(e){return function(t,n){var r=e;r||(r=t.schema.nodes.listItem);var i=t.selection,a=i.$from,c=i.$to;if(v(r)(t)){var u=a.blockRange(c,(function(e){return e.childCount>0&&e.firstChild.type===r}));return!!u&&Object(s.c)(function(e,t){return function(n){return function(r,o){return n(r,(function(n){var i=r.doc.resolve(t.start),a=r.doc.resolve(t.end),c=n.doc.resolve(n.mapping.map(t.end-1));c.nodeBefore&&c.nodeAfter&&c.nodeBefore.type===c.nodeAfter.type&&a.nodeAfter&&a.nodeAfter.type===e&&a.parent.type===i.parent.type&&n.join(c.pos),o&&o(n.scrollIntoView())}))}}}(r,u),o.a)(r)(t,n)}return!1}}var w=function(e){var t=e.selection.$from,n=t.node(t.depth-4),r=e.schema.nodes.todoList;return n.type===r},k=function(e){var t=e.selection.$from,n=t.node(t.depth-2),r=e.schema.nodes;return[r.bulletList,r.orderedList].includes(n.type)},j=function(e){return function(){return i.c(Object(d.a)([v(e),d.i,d.j,function(e){return w(e)&&k(e)},function(e){return m(e.schema.nodes.todoItem)(e)}],(function(e,t,n){return!!g(e.schema.nodes.todoList,e.schema.nodes.todoItem)(e,t,n)&&O((e=n.state).schema.nodes.todoItem)(e,t,n)})),Object(d.a)([v(e),d.i,d.j,m(e)],i.c(E(e),O(e))),Object(d.a)([d.i,h],S(e))).apply(void 0,arguments)}};function M(e){return function(t,n,r){var o,i=t.selection;if(i.empty){var u=i.$from,s=e;s||(s=t.schema.nodes.listItem);var l=t.schema.nodes,f=l.codeBlock,p=l.todoItem,m=u.node(u.depth),v=u.node(u.depth-1);if(v&&v.type===s){var h=Object(d.g)(v);if(Object(d.l)(m)&&!h)return w(t)&&s!==p?!!g(t.schema.nodes.todoList,t.schema.nodes.todoItem)(t,n,r)&&O(t.schema.nodes.todoItem)(r.state,n,r):O(s)(t,n);if(!Object(c.hasParentNodeOfType)(f)(i))return(o=s,function(e,t){var n=e.selection,r=n.$from,i=n.$to,c=n.node;if(c&&c.isBlock||r.depth<2||!r.sameParent(i))return!1;var u=r.node(-1);if(u.type!==o)return!1;if(u.content.content.length<=1&&0===r.parent.content.size&&0!==u.content.size){if(2===r.depth||r.node(-3).type!==o||r.index(-2)!==r.node(-2).childCount-1)return!1;if(t){for(var s=a.Fragment.empty,d=r.index(-1)>0,l=r.depth-(d?1:2);l>=r.depth-3;l--)s=a.Fragment.from(r.node(l).copy(s));s=s.append(a.Fragment.from(o.createAndFill()));var f=e.tr.replace(r.before(d?void 0:-1),r.after(-3),new a.Slice(s,d?3:2,2));f.setSelection(e.selection.constructor.near(f.doc.resolve(r.pos+(d?3:2)))),t(f.scrollIntoView())}return!0}var p=i.pos===r.end()?u.contentMatchAt(0).defaultType:void 0,m=e.tr.delete(r.pos,i.pos),v=p&&[void 0,{type:p}];return t&&t(m.split(r.pos,2,v).scrollIntoView()),!0})(t,n)}}return!1}}function S(e){return function(t,n){var o=e;o||(o=t.schema.nodes.listItem);var i=t.selection.$from,u=t.schema.nodes,s=u.paragraph,f=u.codeBlock,p=u.bulletList,m=u.orderedList,v=u.todoList,h=t.selection instanceof l.a,g=h?t.doc.resolve(i.pos+1):i,b=Object(d.b)(g);if(!b)return!1;if(b.nodeBefore&&[p,m,v].indexOf(b.nodeBefore.type)>-1&&b.nodeAfter&&(b.nodeAfter.type===s||b.nodeAfter.type===f)){for(var y=b.doc.resolve(b.pos-1);y.parent.type!==s;)y=t.doc.resolve(y.pos-1);var O=t.tr;if(h){var w=Object(c.findPositionOfNodeBefore)(O.selection);if("number"!=typeof w)return!1;var k=b.nodeBefore.copy(b.nodeBefore.content.append(a.Fragment.from(o.createChecked({},b.nodeAfter))));O.replaceWith(w,i.pos+b.nodeAfter.nodeSize,k)}else O=t.tr.step(new r.b(y.pos,b.pos+b.nodeAfter.nodeSize,b.pos+1,b.pos+b.nodeAfter.nodeSize-1,t.tr.doc.slice(y.pos,b.pos),0,!0));var j=O.doc.resolve(O.mapping.map(b.pos+b.nodeAfter.nodeSize));return j.nodeBefore&&j.nodeAfter&&j.nodeBefore.type===j.nodeAfter.type&&[p,m,v].indexOf(j.nodeBefore.type)>-1&&(O=O.join(j.pos)),n&&n(O.scrollIntoView()),!0}return!1}}function E(e){return function(t,n){var r=t.selection.$from,o=e;o||(o=t.schema.nodes.listItem);var i=Object(d.b)(r);if(!i||!i.nodeBefore||i.nodeBefore.type!==o)return!1;if(1===i.nodeBefore.childCount&&i.nodeBefore.firstChild.nodeSize<=2){var a=t.tr;return n&&n(a.delete(i.pos-i.nodeBefore.nodeSize,r.pos).scrollIntoView()),!0}return!1}}function A(e,t){void 0===t&&(t="UP");var n="DOWN"===t;return Object(d.a)([function(t){var r=Object(c.findParentNodeOfType)(e)(t.selection);if(!r)return!1;var o=r.node,i=t.selection.$from.node(r.depth-1),a=null==i?void 0:i[n?"lastChild":"firstChild"];return!(!o||a!==o)}],(function(t,r){var o=e;if(o||(o=t.schema.nodes.listItem),!t.selection.empty)return!1;var i=Object(c.findParentNode)((function(e){return Object(d.r)(e.type,t.schema.nodes)}))(t.selection),a=Object(c.findParentNodeOfType)(o)(t.selection);if(null==i||!i.node||null==a||!a.node)return!1;if(3===t.selection.$from.depth)return O(o)(t,r);var u=1===i.node.childCount?i:a,s=t.tr.delete(u.pos,u.pos+u.node.nodeSize),l=t.selection.$from.before(-3);if(n){var f=t.selection.$from.after(-3);l=f-u.node.nodeSize;var p=Object(d.s)(f,t.doc)&&t.doc.nodeAt(f);p&&p.type===o&&(l+=p.nodeSize)}var m=a.node;w(t)&&(m=t.schema.nodes.todoItem.createChecked({},m.content,m.marks));var v=Object(c.safeInsert)(m,l)(s);return v!==s&&(r&&r(v),!0)}))}function C(e,t){return function(n,r){var o=n.selection.$from,i=o.node(-1);if(i&&i.type===e){var a=n.tr,c=o.before(-1);if(t(i.attrs)!==i.attrs)return a.setNodeMarkup(c,void 0,t(i.attrs)),r(a),!0}return!1}}function T(e){return function(t,n){var r=t.selection.$from.node(-1);return!(!r||r.type!==e)&&r.attrs}}},149:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var r=n(4),o=n(195),i=n(142),a=n(135),c=function(){},u=new WeakMap,s=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e),t.createPlugin=function(e){var n,r=e.name,o=e.containerDOM,c=e.contentDOM,u=e.renderHandlers;return new i.a({key:new i.c(r+"NodeView"),props:{nodeViews:(n={},n[r]=function(e,n,r,i){var s,d=Object(a.d)(o);return c&&(s=Object(a.d)(c)),new t({node:e,view:n,getPos:r,decorations:i,containerDOM:d,contentDOM:s,renderHandlers:u})},n)}})};var n=t.prototype;return n.update=function(e,t){return c("update node"),this._node.type===e.type&&(this._node===e&&this._decorations===t?(c("update node no change"),!0):(this._node=e,this._decorations=t,c("update node execute"),this.renderHandlers.update(this,this.getNodeViewProps()),!0))},n.selectNode=function(){this.containerDOM.classList.add("ProseMirror-selectednode"),this._selected=!0,c("select node"),this.renderHandlers.update(this,this.getNodeViewProps())},n.deselectNode=function(){this.containerDOM.classList.remove("ProseMirror-selectednode"),this._selected=!1,c("deselectNode node"),this.renderHandlers.update(this,this.getNodeViewProps())},n.ignoreMutation=function(e){return"selection"!==e.type&&(!this.contentDOM||!this.contentDOM.contains(e.target))},n.destroy=function(){this.renderHandlers.destroy(this,this.getNodeViewProps()),this.containerDOM=void 0,this.contentDOM=void 0},t}(function(){var e=t.prototype;function t(e,t){var n=e.node,r=e.view,o=e.getPos,i=e.decorations,c=e.containerDOM,s=e.contentDOM,d=e.mountDOM,l=e.renderHandlers,f=void 0===l?function(e){var t=e.dom.parentNode;return u.get(t)}(r):l,p=(void 0===t?{}:t).selectionSensitive,m=void 0===p||p;if(this._node=n,this._view=r,this._getPos=o,this._decorations=i,this._selected=!1,!f)throw Object(a.b)("It appears the view =",r," was not associated with renderHandlers. You are either using nodeViews accidentally or have incorrectly setup nodeViews"),new Error("You either did not pass the renderHandlers correct or it cannot find render handlers associated with the view.");this.renderHandlers=f,this.containerDOM=c,this.contentDOM=s,this.mountDOM=d||c,this.contentDOM&&this.contentDOM.classList.add("bangle-content-mount"),this.opts={selectionSensitive:m},this.renderHandlers.create(this,this.getNodeViewProps())}return e.getAttrs=function(){return this._node.attrs},e.getNodeViewProps=function(){var e=this;return{node:this._node,view:this._view,getPos:this._getPos,decorations:this._decorations,selected:this._selected,attrs:this._node.attrs,updateAttrs:function(t){var n,r,o;e._view.dispatch((n=e._getPos(),r=e._node,o=t,e._view.state.tr.setNodeMarkup(n,void 0,Object.assign({},r.attrs,o))))}}},Object(o.a)(t,[{key:"dom",get:function(){return this.containerDOM}}]),t}());function d(e,t){if(u.has(e))throw new Error("It looks like renderHandlers were already set by someone else.");u.set(e,t)}},151:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(132),o="undefined"==typeof window||window.BANGLE_DEBUG_KEYBINDINGS,i=new WeakMap;function a(e,t){var n=(void 0===t?{}:t).monitor,a=void 0===n?o:n,c=Object.entries(e).flatMap((function(e){var t=e[0],n=e[1];return t&&"undefined"!==t&&"null"!==t&&"false"!==t?t.split(" ").map((function(e){return[e,n]})):[]})).filter((function(e){e[0];return null!=e[1]})),u=Object.fromEntries(c),s=Object(r.b)(u);return a&&i.set(s,u),s}function c(){return a.apply(void 0,arguments)}},152:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(168),o=n(195),i=n(131),a=n(147),c=n(135),u=(console.log.bind(console,"SpecRegistry"),function(){function e(e,t){void 0===e&&(e=[]);var n=(void 0===t?{}:t).defaultSpecs,o=void 0===n||n,u=d(e);u.forEach(s);var l=new Set(u.map((function(e){return e.name})));if(u.length!==l.size)throw Object(c.b)("The specRegistry has one or more specs with the same name",u),new Error("Duplicate spec error, please check your specRegistry");if(o){var f=[];l.has("paragraph")||f.unshift(a.p.spec()),l.has("text")||f.unshift(a.r.spec()),l.has("doc")||f.unshift(a.f.spec()),u=[].concat(d(f),u)}this._spec=u,this._schema=function(e){for(var t,n,o=[],a=[],c=Object(r.a)(e);!(n=c()).done;){var u=n.value;if("node"===u.type)o.push([u.name,u.schema]);else if("mark"===u.type)a.push([u.name,u.schema]);else if("component"!==u.type)throw new Error(u.name+" unknown type: "+u.type);!0===u.topNode&&(t=u.name)}return new i.Schema({topNode:t,nodes:Object.fromEntries(o),marks:Object.fromEntries(a)})}(this._spec),this._options=Object.fromEntries(this._spec.filter((function(e){return e.options})).map((function(e){return[e.name,e.options]})))}return Object(o.a)(e,[{key:"spec",get:function(){return this._spec}},{key:"schema",get:function(){return this._schema}},{key:"options",get:function(){return this._options}}]),e}());function s(e){if(!e.name)throw Object(c.b)("The spec didn't have a name field",e),new Error("Invalid spec. Spec must have a name");if(!["node","mark","component"].includes(e.type))throw Object(c.b)("The spec must be of type node, mark or component ",e),new Error("Invalid spec type");if(["node","mark"].includes(e.type)&&!e.schema)throw Object(c.b)("The spec of type 'mark' or 'node' must have a schema field",e),new Error("Invalid spec schema")}function d(e){return function e(t){return Array.isArray(t)?t.flatMap((function(t){return e(t)})).filter(Boolean):t}(e)}},158:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return a})),n.d(t,"plugins",(function(){return c})),n.d(t,"commands",(function(){return u})),n.d(t,"createLink",(function(){return p})),n.d(t,"updateLink",(function(){return m})),n.d(t,"queryLinkAttrs",(function(){return v})),n.d(t,"queryIsLinkAllowedInRange",(function(){return h})),n.d(t,"queryIsLinkActive",(function(){return g})),n.d(t,"queryIsSelectionAroundLink",(function(){return b}));var r=n(130),o=n(135),i=n(128),a=function(e){var t=(void 0===e?{}:e).openOnClick;return{type:"mark",name:s,schema:{attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href")}}}],toDOM:function(e){return["a",Object.assign({},e.attrs,{rel:"noopener noreferrer nofollow"}),0]}},markdown:{toMarkdown:{open:function(e,t,n,r){return l(t,n,r,1)?"<":"["},close:function(e,t,n,r){return l(t,n,r,-1)?">":"]("+e.esc(t.attrs.href)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")"}},parseMarkdown:{link:{mark:"link",getAttrs:function(e){return{href:e.attrGet("href"),title:e.attrGet("title")||null}}}}},options:{openOnClick:void 0!==t&&t}}},c=function(){return function(e){var t,n=e.schema,a=e.specRegistry.options.link.openOnClick,c=function(e){return e.marks.link}(n);return[(t=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,new r.Plugin({props:{handlePaste:function(e,n,r){var i=n;if(!i.clipboardData)return!1;var a=i.clipboardData.getData("text/plain"),c=i.clipboardData.getData("text/html"),u=a&&!c;if(!u||e.state.selection.empty)return!1;var s=e.state,d=e.dispatch,l=Object(o.e)(t,a),f=1===l.length&&l.every((function(e){return e.match}));return!!f&&p(a)(s,d)}}})),d(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,c,(function(e){return{href:e}})),a&&new r.Plugin({props:{handleClick:function(e,t,n){var r=e.state.schema,o=Object(i.f)(e.state,r.marks.link);o.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(o.href))}}})]}},u={createLink:p,updateLink:m,queryLinkAttrs:v,queryIsLinkAllowedInRange:h,queryIsLinkActive:g,queryIsSelectionAroundLink:b},s="link";function d(e,t,n){return new r.Plugin({props:{transformPasted:function(r){return Object(i.o)(r,(function(r){if(!r.isText)return r;var i=r.text;return Object(o.e)(e,i).map((function(e){var o=e.start,i=e.end,a=e.match,c=e.subString,u=r.cut(o,i);if(a){var s=n instanceof Function?n(c):n;u=u.mark(t.create(s).addToSet(r.marks))}return u}))}))}}})}function l(e,t,n,r){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;var o=t.child(n+(r<0?-1:0));if(!o.isText||o.text!==e.attrs.href||o.marks[o.marks.length-1]!==e)return!1;if(n===(r<0?1:t.childCount-1))return!0;var i=t.child(n+(r<0?-2:1));return!e.isInSet(i.marks)}function f(e,t,n){return n=n&&n.trim(),Object(i.a)((function(t){return(n=e,function(e){var t=e.doc.nodeAt(n);return!!t&&t.isText})(t);var n}),(function(r,o){var i=r.schema.marks.link,a=r.tr.removeMark(e,t,i);if(n){var c=r.schema.marks.link.create({href:n});a.addMark(e,t,c)}return o&&o(a),!0}))}function p(e){return Object(i.a)((function(e){return h(e.selection.$from.pos,e.selection.$to.pos)(e)}),(function(t,n){var r=[t.selection.$from.pos,t.selection.$to.pos],o=r[0],i=r[1],a=t.schema.marks.link,c=t.tr.removeMark(o,i,a);if(e.trim()){var u=t.schema.marks.link.create({href:e});c.addMark(o,i,u)}return n&&n(c),!0}))}function m(e){return function(t,n){if(!t.selection.empty)return f(t.selection.$from.pos,t.selection.$to.pos,e)(t,n);var r=t.selection.$from,o=r.pos-r.textOffset,i=t.doc.nodeAt(o),a=o;return i&&(a+=i.nodeSize),f(o,a,e)(t,n)}}function v(){return function(e){var t=e.selection.$from,n=t.pos-t.textOffset,r=e.doc.resolve(n),o=e.doc.nodeAt(n),i=r.nodeAfter;if(i){var a=e.schema.marks.link.isInSet(i.marks||[]);return a?{href:a.attrs.href,text:o.textContent}:void 0}}}function h(e,t){return function(n){var r=n.doc.resolve(e),o=n.doc.resolve(t),i=n.schema.marks.link;if(r.parent===o.parent&&r.parent.isTextblock)return r.parent.type.allowsMarkType(i)}}function g(){return function(e){return!!e.doc.type.schema.marks.link.isInSet(e.selection.$from.marks())}}function b(){return function(e){var t=e.selection,n=t.$from,r=t.$to,o=n.nodeAfter;return!!o&&0===n.textOffset&&r.pos-n.pos===o.nodeSize&&!!e.doc.type.schema.marks.link.isInSet(o.marks)}}},160:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return u})),n.d(t,"plugins",(function(){return s})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleBold",(function(){return p})),n.d(t,"queryIsBoldActive",(function(){return m}));var r=n(145),o=n(146),i=n(133),a=n(128),c=n(132),u=function(e){void 0===e&&(e={});return{type:"mark",name:f,schema:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong",0]}},markdown:{toMarkdown:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{strong:{mark:f}}}}},s=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,i=void 0===n||n,a=t.keybindings,u=void 0===a?l:a;return function(e){var t,n=function(e){return e.marks.bold}(e.schema);return[i&&Object(o.a)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,n),i&&Object(r.a)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,n),u&&Object(c.b)((t={},t[u.toggleBold]=p(),t))]}},d={toggleBold:p,queryIsBoldActive:m},l={toggleBold:"Mod-b"},f="bold";function p(){return function(e,t,n){return Object(i.f)(e.schema.marks.bold)(e,t,n)}}function m(){return function(e){return Object(a.k)(e.schema.marks.bold)(e)}}},162:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return s})),n.d(t,"plugins",(function(){return d})),n.d(t,"commands",(function(){return l})),n.d(t,"defaultKeys",(function(){return f})),n.d(t,"toggleCode",(function(){return O})),n.d(t,"queryIsCodeActive",(function(){return w}));var r=n(145),o=n(146),i=n(133),a=n(128),c=n(132),u=n(130),s=function(e){void 0===e&&(e={});return{type:"mark",name:p,schema:{excludes:"_",parseDOM:[{tag:p}],toDOM:function(){return[p,0]}},markdown:{toMarkdown:{open:function(e,t,n,r){return b(n.child(r),-1)},close:function(e,t,n,r){return b(n.child(r-1),1)},escape:!1},parseMarkdown:{code_inline:{mark:p,noCloseToken:!0}}}}},d=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,u=void 0===n||n,s=t.escapeAtEdge,d=void 0===s||s,l=t.keybindings,p=void 0===l?f:l;return function(e){var t,n=function(e){return e.marks.code}(e.schema),s=[function(e){return e.selection.empty&&e.selection.$cursor}];return[u&&Object(o.a)(/(?:`)([^`]+)(?:`)/g,n),u&&Object(r.a)(/(?:`)([^`]+)(?:`)$/,n),p&&Object(c.b)((t={},t[p.toggleCode]=Object(i.f)(n),t)),d&&Object(c.b)({ArrowRight:Object(a.a)(s,h),ArrowLeft:Object(a.a)(s,g)})]}},l={toggleCode:O,queryIsCodeActive:w},f={toggleCode:"Mod-`"},p="code",m=function(e){return e.schema.marks.code};var v=function(e,t){if(t<0||t>e.doc.content.size)return!1;var n=m(e),r=e.doc.nodeAt(t);return!!r&&r.marks.some((function(e){return e.type===n}))};function h(e,t,n){var r=e.schema.marks.code,o=e.selection.$cursor,i=e.tr.storedMarks,a=y(e,r),c=e.doc.rangeHasMark(o.pos,o.pos,r),u=e.doc.rangeHasMark(o.pos,o.pos+1,r),s=!c&&u&&!(i&&i.length>0);if(!a&&s)return t&&t(e.tr.addStoredMark(r.create())),!0;var d=!(c||u||i&&0===i.length);return!(!a||!d)&&(t&&t(e.tr.removeStoredMark(r)),!0)}function g(e,t,n){var r=m(e),o=y(e,r),i=e.selection.$cursor,a=e.tr.storedMarks,c=v(e,i.pos),s=v(e,i.pos-1),d=v(e,i.pos-2),l=c&&!s&&Array.isArray(a),f=s&&!d&&(null===a||Array.isArray(a)&&!!a.length),p=(l&&Array.isArray(a)&&!a.length||!l&&null===a)&&!s&&d,h=!c&&s&&Array.isArray(a)&&!a.length;if(!o&&p){var g=e.tr.setSelection(u.Selection.near(e.doc.resolve(i.pos-1)));return t&&t(g.removeStoredMark(r)),!0}if(!o&&h)return t&&t(e.tr.addStoredMark(r.create())),!0;if(o&&f){var b=e.tr.setSelection(u.Selection.near(e.doc.resolve(i.pos-1)));return t&&t(b.addStoredMark(r.create())),!0}var O=0===i.index(i.depth-1);return o&&(l||!i.nodeBefore&&O)?(t&&t(e.tr.removeStoredMark(r)),!0):void 0}function b(e,t){var n,r=/`+/g,o=0;if(e.isText)for(;n=r.exec(e.text);)o=Math.max(o,n[0].length);for(var i=o>0&&t>0?" `":"`",a=0;a<o;a++)i+="`";return o>0&&t<0&&(i+=" "),i}function y(e,t){var n=e.selection,r=n.from,o=n.to;if(n.empty)return!!t.isInSet(e.tr.storedMarks||e.selection.$from.marks());var i=!1;return e.doc.nodesBetween(r,o,(function(e){i=i||t.isInSet(e.marks)})),i}function O(){return function(e,t,n){return Object(i.f)(e.schema.marks.code)(e,t,n)}}function w(){return function(e){return Object(a.k)(e.schema.marks.code)(e)}}},163:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return u})),n.d(t,"plugins",(function(){return s})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleItalic",(function(){return p})),n.d(t,"queryIsItalicActive",(function(){return m}));var r=n(145),o=n(146),i=n(133),a=n(128),c=n(132),u=function(e){void 0===e&&(e={});return{type:"mark",name:f,schema:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},markdown:{toMarkdown:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{em:{mark:f}}}}},s=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?l:t;return function(e){var t,a=function(e){return e.marks[f]}(e.schema);return[Object(o.a)(/_([^_]+)_/g,a),Object(o.a)(/\*([^*]+)\*/g,a),Object(r.a)(/(?:^|[^_])(_([^_]+)_)$/,a),Object(r.a)(/(?:^|[^*])(\*([^*]+)\*)$/,a),n&&Object(c.b)((t={},t[n.toggleItalic]=Object(i.f)(a),t))]}},d={toggleItalic:p,queryIsItalicActive:m},l={toggleItalic:"Mod-i"},f="italic";function p(){return function(e,t,n){return Object(i.f)(e.schema.marks[f])(e,t,n)}}function m(){return function(e){return Object(a.k)(e.schema.marks[f])(e)}}},164:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return c})),n.d(t,"plugins",(function(){return u})),n.d(t,"commands",(function(){return s})),n.d(t,"defaultKeys",(function(){return d})),n.d(t,"toggleBulletList",(function(){return f})),n.d(t,"queryIsBulletListActive",(function(){return p}));var r=n(132),o=n(134),i=n(136),a=n(148),c=function(e){void 0===e&&(e={});return{type:"node",name:l,schema:{content:"listItem+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}},markdown:{toMarkdown:function(e,t){e.renderList(t,"  ",(function(){return(t.attrs.bullet||"-")+" "}))},parseMarkdown:{bullet_list:{block:l}}}}},u=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,i=void 0===n||n,c=t.keybindings,u=void 0===c?d:c;return function(e){var t,n=e.schema,c=function(e){return e.nodes[l]}(n);return[u&&Object(r.b)((t={},t[u.toggle]=Object(a.g)(c,n.nodes.listItem),t)),i&&Object(o.e)(/^\s*([-+*])\s$/,c)]}},s={toggleBulletList:f,queryIsBulletListActive:p},d={toggle:"Shift-Ctrl-8"},l="bulletList";function f(){return function(e,t,n){return Object(a.g)(e.schema.nodes.bulletList,e.schema.nodes.listItem)(e,t,n)}}function p(){return function(e){var t=e.schema;return Object(i.d)(t.nodes.listItem,[t.nodes.bulletList])(e)}}},165:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return u})),n.d(t,"plugins",(function(){return s})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleHeading",(function(){return v})),n.d(t,"queryIsHeadingActive",(function(){return h}));var r=n(133),o=n(134),i=n(151),a=n(136),c=n(128),u=function(e){var t=(void 0===e?{}:e).levels,n=void 0===t?p:t;if(n.some((function(e){return"number"!=typeof e})))throw new Error("levels must be number");return{type:"node",name:f,schema:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:n.map((function(e){return{tag:"h"+e,attrs:{level:m(e)}}})),toDOM:function(e){return["h"+e.attrs.level,{},0]}},markdown:{toMarkdown:function(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t),e.closeBlock(t)},parseMarkdown:{heading:{block:f,getAttrs:function(e){return{level:m(e.tag.slice(1))}}}}},options:{levels:n}}},s=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,u=void 0===n||n,s=t.keybindings,d=void 0===s?l:s;return function(e){var t,n=e.schema,s=e.specRegistry.options[f].levels,l=function(e){return e.nodes[f]}(n),p=function(e){return Object(c.d)(l)(e.selection)},m=Object.fromEntries(s.map((function(e){return[d["toH"+e],Object(r.e)(l,{level:e})]})));return[d&&Object(i.b)(Object.assign({},m,(t={},t[d.moveUp]=Object(a.c)(l,"UP"),t[d.moveDown]=Object(a.c)(l,"DOWN"),t[d.emptyCopy]=Object(a.a)(l),t[d.emptyCut]=Object(a.b)(l),t[d.insertEmptyParaAbove]=Object(c.a)(p,Object(c.h)(n.nodes.paragraph,"above",!1)),t[d.insertEmptyParaBelow]=Object(c.a)(p,Object(c.h)(n.nodes.paragraph,"below",!1)),t)))].concat((u?s:[]).map((function(e){return Object(o.c)(new RegExp("^(#{1,"+e+"})\\s$"),l,(function(){return{level:e}}))})))}},d={toggleHeading:v,queryIsHeadingActive:h},l={toH1:"Shift-Ctrl-1",toH2:"Shift-Ctrl-2",toH3:"Shift-Ctrl-3",toH4:"Shift-Ctrl-4",toH5:"Shift-Ctrl-5",toH6:"Shift-Ctrl-6",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},f="heading",p=[1,2,3,4,5,6],m=function(e){return e=parseInt(e,10),Number.isNaN(e)?void 0:e};function v(e){return void 0===e&&(e=3),function(t,n,o){return h(e)(t)?Object(r.e)(t.schema.nodes.paragraph)(t,n,o):Object(r.e)(t.schema.nodes[f],{level:e})(t,n,o)}}function h(e){return function(t){var n=Object(c.d)(t.schema.nodes[f])(t.selection);if(!n)return!1;var r=n.node;return null==e||r.attrs.level===e}}},166:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return u})),n.d(t,"plugins",(function(){return s})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleTodoList",(function(){return f})),n.d(t,"queryIsTodoListActive",(function(){return p}));var r=n(134),o=n(148),i=n(132),a=n(136),c="todoList",u=function(e){void 0===e&&(e={});return{type:"node",name:c,schema:{group:"block",content:"todoItem+",toDOM:function(){return["ul",{"data-bangle-name":c},0]},parseDOM:[{priority:51,tag:'[data-bangle-name="todoList"]'}]},markdown:{toMarkdown:function(e,t){e.renderList(t,"  ",(function(){return"- "}))},parseMarkdown:{todo_list:{block:c}}}}},s=function(e){var t=void 0===e?{}:e,n=t.keybindings,a=void 0===n?l:n,u=t.markdownShortcut,s=void 0===u||u;return function(e){var t,n=e.schema,u=function(e){return e.nodes[c]}(n);return[s&&Object(r.e)(/^\s*(\[ \])\s$/,u),a&&Object(i.b)((t={},t[a.toggle]=Object(o.g)(u,n.nodes.todoItem),t))]}},d={toggleTodoList:f,queryIsTodoListActive:p},l={toggle:"Shift-Ctrl-7"};function f(){return function(e,t,n){var r=e.schema;return Object(o.g)(r.nodes[c],r.nodes.todoItem)(e,t,n)}}function p(){return function(e){var t=e.schema;return Object(a.d)(t.nodes.todoItem,t.nodes[c])(e)}}},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4),o=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t}(n(130).Selection)},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n(0),o=(n(152),n(140)),i=(n(173),n(172)),a=function(){};function c(e){if(e.plugins&&"function"!=typeof e.plugins)throw new Error("plugins error: plugins must be a function");return Object(r.useState)((function(){return new o.b(e)}))[0]}function u(e){var t=s(),n=Object(r.useState)(e.getState(t.state)),i=n[0],c=n[1];return Object(r.useEffect)((function(){a("Setup plugin",e);var n=new o.c({key:new o.d("withPluginState_"+e.key),view:function(){return{update:function(t,n){var r=t.state;if(n!==r){var o=e.getState(r);o!==e.getState(n)&&c(o)}}}}});return t._updatePluginWatcher(n),function(){a("removing plugin",e),t._updatePluginWatcher(n,!0)}}),[t,e]),i}function s(){return Object(r.useContext)(i.b)}},172:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return E}));var r=n(0),o=n.n(r),i=n(24),a=n.n(i),c=n(1),u=n.n(c),s=n(4),d=n(225),l=0,f=new(function(e){function t(){return e.apply(this,arguments)||this}return Object(s.a)(t,e),t.prototype.get=function(t){var n=e.prototype.get.call(this,t);return n||(n=(l++).toString(),this.set(t,n),n)},t}(Object(d.a)(WeakMap))),p=n(140),m=n(149),v=n(135),h=n(182),g=n(161),b=function(){},y=function(e){function t(t){var n;return(n=e.call(this,t)||this).update=function(){n.setState((function(e,t){return{nodeViewProps:t.nodeView.getNodeViewProps()}}))},n.attachToContentDOM=function(e){if(e){var t=n.props.nodeView.contentDOM;e.contains(t)||(t.parentNode&&t.parentNode.removeChild(t),e.appendChild(t))}},t.nodeViewUpdateStore.set(t.nodeView,n.update),n.state={nodeViewProps:n.props.nodeView.getNodeViewProps()},n}Object(s.a)(t,e);var n=t.prototype;return n.getChildren=function(){return this.props.nodeView.contentDOM?this.state.nodeViewProps.node.isInline?o.a.createElement("span",{className:"bangle-content-mount",ref:this.attachToContentDOM}):o.a.createElement("div",{className:"bangle-content-mount",ref:this.attachToContentDOM}):null},n.render=function(){b("react rendering",f.get(this.props.nodeView));var e=this.props.renderNodeViews(Object.assign({},this.state.nodeViewProps,{children:this.getChildren()}));if(!e)throw Object(v.b)("renderNodeView prop must return a react element for the node",this.state.nodeViewProps.node),new Error('renderNodeView must handle rendering for node of type "'+this.state.nodeViewProps.node.type.name+'"');return e},t}(o.a.PureComponent);y.propTypes={nodeView:u.a.object.isRequired,renderNodeViews:u.a.func.isRequired,nodeViewUpdateStore:u.a.instanceOf(WeakMap).isRequired};var O={selected:u.a.bool.isRequired,node:u.a.instanceOf(h.c).isRequired,view:u.a.instanceOf(g.c).isRequired,getPos:u.a.func.isRequired,decorations:u.a.object.isRequired,attrs:u.a.object.isRequired,updateAttrs:u.a.func.isRequired},w=(Object.assign({},O,{children:u.a.oneOfType([u.a.element,u.a.arrayOf(u.a.element)]).isRequired}),function(){}),k=new WeakMap,j=function(e){return{create:function(t,n){w("create",f.get(t)),e((function(e){return[].concat(e,[t])}))},update:function(e,t){w("update",f.get(e));var n=k.get(e);n&&n()},destroy:function(t){w("destroy",f.get(t)),e((function(e){return e.filter((function(e){return e!==t}))}))}}};var M=console.log.bind(console,"react-editor"),S=o.a.createContext();function E(e){var t=e.id,n=e.state,i=e.children,c=e.focusOnInit,u=void 0===c||c,s=e.pmViewOpts,d=e.renderNodeViews,l=e.onReady,v=void 0===l?function(){}:l,h=Object(r.useRef)(),g=Object(r.useRef)(v),b=Object(r.useRef)({state:n,focusOnInit:u,pmViewOpts:s}),O=Object(r.useState)([]),w=O[0],M=O[1],E=Object(r.useState)(),C=E[0],T=E[1];return Object(r.useEffect)((function(){var e=!1;Object(m.b)(h.current,j((function(t){e||M((function(e){return t(e)}))})));var t=new p.a(h.current,b.current);return t.view._updatePluginWatcher=A(t),g.current(t),T(t),function(){e=!0,t.destroy()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{ref:h,id:t}),w.map((function(e){return a.a.createPortal(o.a.createElement(y,{debugKey:f.get(e),nodeViewUpdateStore:k,nodeView:e,renderNodeViews:d}),e.mountDOM,f.get(e))})),C?o.a.createElement(S.Provider,{value:C.view},i):null)}var A=function(e){return function(t,n){if(void 0===n&&(n=!1),!e.destroyed){var r=e.view.state,o=n?r.plugins.filter((function(e){return e!==t})):[].concat(r.plugins,[t]);r=r.reconfigure({plugins:o}),M("Adding watching to existing state",t),e.view.updateState(r)}}};E.propTypes={id:u.a.string,renderNodeViews:u.a.func,onReady:u.a.func,children:u.a.oneOfType([u.a.element,u.a.arrayOf(u.a.element)]),state:u.a.instanceOf(p.b).isRequired,pmViewOpts:u.a.object}},173:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(147);function o(){return[].concat([r.b.spec(),r.d.spec(),r.l.spec(),r.q.spec(),r.m.spec(),r.u.spec()],[r.f.spec(),r.r.spec(),r.p.spec(),r.a.spec(),r.c.spec(),r.e.spec(),r.g.spec(),r.h.spec(),r.j.spec(),r.n.spec(),r.o.spec(),r.s.spec(),r.t.spec(),r.k.spec()])}function i(){return[r.b.plugins(),r.d.plugins(),r.l.plugins(),r.q.plugins(),r.m.plugins(),r.u.plugins(),r.p.plugins(),r.a.plugins(),r.c.plugins(),r.e.plugins(),r.g.plugins(),r.h.plugins(),r.j.plugins(),r.n.plugins(),r.o.plugins(),r.s.plugins(),r.t.plugins(),r.k.plugins(),r.i.plugins()]}},182:function(e,t,n){"use strict";var r=n(131);n.d(t,"c",(function(){return r.Node})),n.d(t,"b",(function(){return r.Fragment})),n.d(t,"a",(function(){return r.DOMSerializer}))},187:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return b}));var r={};n.r(r),n.d(r,"plugins",(function(){return m}));var o=n(182);function i(e,t){void 0===e&&(e=["div",{class:"bangle-tooltip",role:"tooltip"},["div",{class:"bangle-tooltip-content"},0]]);var n=o.a.renderSpec(window.document,e),r=n.dom,i=n.contentDOM;if(t&&!r.querySelector(".bangle-tooltip-arrow")){var a=o.a.renderSpec(window.document,["div",{class:"bangle-tooltip-arrow","data-popper-arrow":""}]);r.appendChild(a)}return{dom:r,contentDOM:i}}var a=n(140),c=n(135),u=n(224),s=n(222),d=n(228),l=n(226),f=n(223),p=n(209),m=function(e){var t=e.stateKey,n=e.renderOpts,r=n.tooltipDOMSpec,o=n.placement,m=void 0===o?"top":o,g=n.getReferenceElement,b=n.getScrollContainer,y=void 0===b?function(e){return e.dom.parentElement}:b,O=n.onUpdateTooltip,w=void 0===O?function(e,t,n){}:O,k=n.onHideTooltip,j=void 0===k?function(e,t,n){}:k,M=n.tooltipOffset,S=void 0===M?function(){return[0,.5*h]}:M,E=n.fallbackPlacements,A=void 0===E?["bottom","top"]:E,C=n.customPopperModifiers,T=new a.c({view:function(e){return new I(e)}}),I=function(){function e(e){var n=this;this.popperInstance=null,this._hideTooltip=function(){v("hiding"),n.popperInstance&&(n._tooltip.removeAttribute("data-show"),n.popperInstance.destroy(),n.popperInstance=null,j.call(n,n._view.state,n._view.dispatch,n._view))},this._showTooltip=function(){n._tooltip.setAttribute("data-show",""),n._createPopperInstance(n._view),n.popperInstance.update()},this._view=e;var o=i(r).dom;this._tooltip=o,this._scrollContainerDOM=y(e),this._view.dom.parentNode.appendChild(this._tooltip);var a=t.getState(e.state);!function(e){if("boolean"!=typeof e.show)throw Object(c.b)('Tooltip must be controlled by a plugin having a boolean field "show" in its state, but received the state=',e),new Error('"show" field required.')}(a),a.show&&this._showTooltip()}var n=e.prototype;return n.update=function(e,n){var r=t.getState(e.state);r!==t.getState(n)&&(r.show?(v("calling update toolip"),w.call(this,e.state,e.dispatch,e),this._showTooltip()):(v("calling hide tooltip"),this._hideTooltip()))},n.destroy=function(){this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=null),this._view.dom.parentNode.removeChild(this._tooltip)},n._createPopperInstance=function(e){if(!this.popperInstance){var t=this._tooltip.querySelector("[data-popper-arrow]"),n=[s.a,d.a,l.a,{name:"offset",options:{offset:function(e){return S(e)}}},{name:"flip",options:{fallbackPlacements:A,padding:10}},{name:"preventOverflow",options:{boundary:this._scrollContainerDOM}},p.a,t?f.a:void 0,t?{name:"arrow",options:{element:t}}:void 0].filter(Boolean);this.popperInstance=Object(u.a)(g(e,this._tooltip,this._scrollContainerDOM),this._tooltip,{placement:m,modifiers:C?C(e,this._tooltip,this._scrollContainerDOM,n):n}),w.call(this,e.state,e.dispatch,e)}},e}();return T},v=function(){},h="undefined"==typeof window?12:parseFloat(getComputedStyle(document.documentElement).fontSize);var g=n(207),b=n(208)},196:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(135);function o(e,t){var n=void 0===t?{}:t,o=n.tag,i=void 0===o?"div":o,a=n.content,c=n.ignoreAttrs,u=void 0===c?[]:c,s=n.parsingPriority,d=function(e){return JSON.stringify(Object(r.f)(e.attrs||{},(function(e,t){return!u.includes(t)})))};return{toDOM:function(t){var n=[i,{"data-bangle-name":e,"data-bangle-attrs":d(t)}];return void 0!==a&&("function"==typeof a?n.push(a(t)):n.push(a)),n},parseDOM:[{priority:void 0===s?51:s,tag:i+'[data-bangle-name="'+e+'"]',getAttrs:function(e){var t=e.getAttribute("data-bangle-attrs");return t?JSON.parse(t):{}}}]}}},201:function(e,t,n){"use strict";var r=n(172);n.d(t,"a",(function(){return r.a}));var o=n(170);n.d(t,"b",(function(){return o.a})),n.d(t,"c",(function(){return o.c}))},203:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p}));var r=n(0),o=n.n(r),i=n(1),a=n.n(i),c=n(186),u=n(191),s=n(192),d=n(202);function l(e){var t=e.filePath,n=e.language,i=e.createEditor,a=e.onEditorReady,c=Object(r.useRef)(i),u=Object(r.useState)(!1),s=u[0],d=u[1],l=Object(r.useCallback)((function(){return o.a.createElement(f,{createEditor:c.current,onReady:d})}),[c,d]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(p,{filePath:t,language:n,component:l}),s?a(s):null)}function f(e){var t=e.createEditor,n=e.onReady,i=Object(r.useRef)();return Object(r.useEffect)((function(){var e=t(i.current);return n(e),function(){e.destroy()}}),[t,n]),o.a.createElement("div",{ref:i})}function p(e){var t=e.filePath,n=e.language,r=e.component;return o.a.createElement(u.a,{defaultValue:"example",values:[{label:"Example",value:"example"},{label:"Source code",value:"src"}]},o.a.createElement(s.a,{value:"example"},o.a.createElement(d.a,null,r)),o.a.createElement(s.a,{value:"src"},o.a.createElement(m,{filePath:t,language:n})))}function m(e){var t=e.filePath,n=e.language,i=void 0===n?"js":n,a=Object(r.useState)(),u=a[0],s=a[1];return Object(r.useEffect)((function(){var e=!1;return function(e){return fetch(e).then((function(e){return e.text()}))}(t).then((function(t){e||s(t)})).catch((function(n){console.error(n),e||s("Error: Could not load source code at "+t)})),function(){e=!0}}),[s,t]),u?o.a.createElement(c.a,{className:"language-"+i},u):"loading..."}p.propTypes={component:a.a.func.isRequired,language:a.a.string,filePath:a.a.string.isRequired}},207:function(e,t,n){"use strict";n.r(t),n.d(t,"plugins",(function(){return a})),n.d(t,"commands",(function(){return c})),n.d(t,"_syncTooltipOnUpdate",(function(){return l})),n.d(t,"updateSelectionTooltipType",(function(){return f})),n.d(t,"hideSelectionTooltip",(function(){return p})),n.d(t,"queryIsSelectionTooltipActive",(function(){return m})),n.d(t,"querySelectionTooltipType",(function(){return v}));var r=n(140),o=n(187),i=n(210),a=function(e){var t=e.key,n=void 0===t?new r.d("selectionTooltipPlugin"):t,i=e.calculateType,a=void 0===i?function(e,t){return e.selection.empty?null:"default"}:i,c=e.tooltipRenderOpts,u=void 0===c?{}:c;return function(){var e,t,i,c=Object(o.a)(u.tooltipDOMSpec);return[s({key:n,tooltipDOMSpec:c,calculateType:a}),(e={stateKey:n},t=e.stateKey,i=!1,new r.c({props:{handleDOMEvents:{mousedown:function(e,t){return i=!0,!1},mouseup:function(e,n){return i=!1,l(t)(e.state,e.dispatch,e),!1}}},view:function(){return{update:function(e,n){var r=e.state;if(!(i||n===r||n&&n.doc.eq(r.doc)&&n.selection.eq(r.selection)))return l(t)(e.state,e.dispatch,e)}}}})),o.d.plugins({stateKey:n,renderOpts:Object.assign({getReferenceElement:d},u,{tooltipDOMSpec:c})})]}},c={updateSelectionTooltipType:f,hideSelectionTooltip:p,queryIsSelectionTooltipActive:m,querySelectionTooltipType:v},u=function(){};function s(e){var t=e.key,n=e.calculateType,o=e.tooltipDOMSpec;return new r.c({key:t,state:{init:function(e,t){var r=n(t,null);return{type:r,tooltipContentDOM:o.contentDOM,show:"string"==typeof r,calculateType:n}},apply:function(e,n){var r=e.getMeta(t);return void 0===r||null==r.type&&null==n.type?n:(u("update tooltip state to ",r.type),Object.assign({},n,{type:r.type,show:"string"==typeof r.type}))}}})}function d(e){return{getBoundingClientRect:function(){var t=e.state.selection,n=t.head,r=t.from,o=t instanceof i.a?r:n,a=e.coordsAtPos(o),c=a.top,u=a.bottom,s=a.left,d=a.right,l=d-s;if(t instanceof i.a){var f=e.nodeDOM(o);l=f?f.clientWidth:l}return{width:l,height:u-c,top:c,right:d,bottom:u,left:s}}}}function l(e){return function(t,n,r){var o=e.getState(t),i=o.calculateType(t,o.type);return"string"==typeof i?f(e,i)(t,n,r):null==i&&null!=o.type&&p(e)(t,n,r)}}function f(e,t){return function(n,r){return u("updateSelectionTooltipType",t),r&&r(n.tr.setMeta(e,{type:t}).setMeta("addToHistory",!1)),!0}}function p(e){return function(t,n){return u("hideSelectionTooltip"),n&&n(t.tr.setMeta(e,{type:null}).setMeta("addToHistory",!1)),!0}}function m(e){return function(t){var n=e.getState(t);return!(!n||"string"!=typeof n.type)}}function v(e){return function(t){var n=e.getState(t);return n&&n.type}}},208:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return l})),n.d(t,"plugins",(function(){return f})),n.d(t,"commands",(function(){return p})),n.d(t,"defaultKeys",(function(){return m})),n.d(t,"queryTriggerText",(function(){return b})),n.d(t,"queryIsSuggestTooltipActive",(function(){return y})),n.d(t,"replaceSuggestMarkWith",(function(){return O})),n.d(t,"removeSuggestMark",(function(){return w})),n.d(t,"incrementSuggestTooltipCounter",(function(){return k})),n.d(t,"decrementSuggestTooltipCounter",(function(){return j})),n.d(t,"resetSuggestTooltipCounter",(function(){return M}));var r=n(182),o=n(151),i=n(210),a=n(128),c=n(140),u=n(187),s=n(134);function d(e,t,n){var r=new RegExp("(^|[.!?\\s\ufffc])("+n+")$");return new s.a(r,(function(n,r){var o=r[3]||r[2];if(o){var i=e.mark(t,{trigger:o}),a=n.tr,c=n.selection.$from.marks();return a.replaceSelectionWith(e.text(o,[i].concat(c)),!1)}}))}console.log.bind(console,"plugins/suggest-tooltip");var l=function(e){var t=e.markName,n=e.trigger,r=e.markColor,o=void 0===r?"#005893":r;return{name:t,type:"mark",schema:{inclusive:!0,group:"suggestTriggerMarks",parseDOM:[{tag:"span[data-"+t+"]"}],toDOM:function(e){return["span",{"data-bangle-name":t,"data-suggest-trigger":e.attrs.trigger,style:"color: "+o}]},attrs:{trigger:{default:n}}},markdown:{toMarkdown:{open:"",close:"",mixable:!0}}}},f=function(e){var t=void 0===e?{}:e,n=t.key,r=void 0===n?new c.d("suggest_tooltip"):n,i=t.markName,s=t.trigger,l=t.tooltipRenderOpts,f=void 0===l?{}:l,p=t.keybindings,h=void 0===p?m:p,b=t.onEnter,O=void 0===b?function(e,t,n){return w(r)(e,t,n)}:b,M=t.onArrowDown,S=void 0===M?k(r):M,E=t.onArrowUp,A=void 0===E?j(r):E,C=t.onEscape,T=void 0===C?function(e,t,n){return w(r)(e,t,n)}:C;return function(e){var t,n,l=e.schema,p=y(r);return[new c.c({key:r,state:{init:function(e,t){return{trigger:s,markName:i,triggerText:"",show:!1,counter:0}},apply:function(e,t,n,o){var a=e.getMeta(r);if(void 0===a)return t;if("SHOW_TOOLTIP"===a.type)return Object.assign({},t,{triggerText:g(o,i,s),show:!0});if("HIDE_TOOLTIP"===a.type)return!1===t.show?t:Object.assign({},t,{triggerText:"",show:!1});if("INCREMENT_COUNTER"===a.type)return Object.assign({},t,{counter:t.counter+1});if("RESET_COUNTER"===a.type)return Object.assign({},t,{counter:0});if("DECREMENT_COUNTER"===a.type)return Object.assign({},t,{counter:t.counter-1});throw new Error("Unknown type")}}}),u.d.plugins({stateKey:r,renderOpts:Object.assign({getReferenceElement:(n=function(e){var t=l.marks[i],n=e.selection;return Object(a.c)(t,e.doc,n.from-1,n.to)},function(e,t,r){return{getBoundingClientRect:function(){var t=e.state,r=n(t),o=r.start>-1?r.start+1:0,i=e.coordsAtPos(o),a=e.coordsAtPos(r.end>-1?r.end:o),c=i.left,u=i.right,s=a.top,d=a.bottom,l={width:u-c,height:d-s,top:s,right:c,bottom:d,left:c};return l}}})},f)}),d(l,i,s),v({trigger:s,markName:i,key:r}),h&&Object(o.b)((t={},t[h.select]=function(e,t,n){return Object(a.a)(p,O)(e,t,n)},t[h.up]=Object(a.a)(p,A),t[h.down]=Object(a.a)(p,S),t[h.hide]=Object(a.a)(p,T),t))]}},p={queryTriggerText:b,queryIsSuggestTooltipActive:y,replaceSuggestMarkWith:O,incrementSuggestTooltipCounter:k,decrementSuggestTooltipCounter:j,resetSuggestTooltipCounter:M},m={select:"Enter",up:"ArrowUp",down:"ArrowDown",hide:"Escape"};function v(e){var t=e.key,n=e.trigger,r=e.markName;return new c.c({view:function(){return{update:function(e,o){var i=e.state;if(o!==i&&i.selection.empty){var a=i.schema.marks[r];if(!o.doc.eq(i.doc)||!i.selection.eq(o&&o.selection)||h(i,a)!==h(o,a)){var c=function(e,t,n){return function(t){var n=t.selection,r=n.from,o=n.to,i=t.schema.marks[e];return t.doc.rangeHasMark(r-1,o,i)}}(r)(i);!c||function(e,t,n){var r=e.selection.$from.nodeBefore;if(!r)return!1;if(!t.isInSet(r.marks||[]))return!1;return(r.textContent||"").includes(n)}(i,a,n)?c?function(e){return function(t,n,r){return n&&n(t.tr.setMeta(e,{type:"SHOW_TOOLTIP"}).setMeta("addToHistory",!1)),!0}}(t)(e.state,e.dispatch,e):function(e){return function(t,n,r){return n&&n(t.tr.setMeta(e,{type:"HIDE_TOOLTIP"}).setMeta("addToHistory",!1)),!0}}(t)(e.state,e.dispatch,e):w(t)(i,e.dispatch,e)}}}}}})}function h(e,t){return e&&e.storedMarks&&t.isInSet(e.storedMarks)}function g(e,t,n){var r=e.schema.marks[t],o=e.selection.$from.nodeBefore;return o&&r.isInSet(o.marks||[])?(o.textContent||"").replace(/^([^\x00-\xFF]|[\s\n])+/g,"").replace(n,""):""}function b(e){return function(t){var n=e.getState(t),r=n.trigger;return g(t,n.markName,r)}}function y(e){return function(t){var n;return null===(n=e.getState(t))||void 0===n?void 0:n.show}}function O(e,t){return function(n,o,u){var s=e.getState(n).markName,d=n.schema.marks[s],l=n.selection,f=Object(a.c)(d,n.doc,l.from-1,l.to);if(!f||-1===f.start)return!1;var p=function(){var e=f.start,o=f.end,u=n.tr.removeStoredMark(d).replaceWith(e,o,r.b.empty);if(!t)return u;var s,l=t instanceof r.b;try{s=t instanceof r.c||l?t:"string"==typeof t?n.schema.text(t):r.c.fromJSON(n.schema,t)}catch(v){return console.error(v),u}if(s.isText)u=u.replaceWith(e,e,s);else if(s.isBlock)u=Object(a.p)(s)(u);else if(s.isInline||l){var p=l?s:r.b.fromArray([s,n.schema.text(" ")]);if(u=u.replaceWith(e,e,p),c.g){var m=document.getSelection();m&&m.empty()}return u=u.setSelection(i.b.near(u.doc.resolve(e+p.size)))}return u}();return o&&(u.focus(),o(p)),!0}}function w(e){return function(t,n){var r=e.getState(t).markName,o=t.schema,i=t.selection,c=o.marks[r],u=Object(a.c)(c,t.doc,i.from-1,i.to),s=u.start,d=u.end;return-1===s&&t.storedMarks&&c.isInSet(t.storedMarks)?(n&&n(t.tr.removeStoredMark(c)),!0):-1!==s&&(n&&n(t.tr.removeMark(s,d,c).removeStoredMark(c).setMeta("addToHistory",!1)),!0)}}function k(e){return function(t,n,r){return n&&n(t.tr.setMeta(e,{type:"INCREMENT_COUNTER"}).setMeta("addToHistory",!1)),!0}}function j(e){return function(t,n,r){return n&&n(t.tr.setMeta(e,{type:"DECREMENT_COUNTER"}).setMeta("addToHistory",!1)),!0}}function M(e){return function(t,n,r){return n&&n(t.tr.setMeta(e,{type:"RESET_COUNTER"}).setMeta("addToHistory",!1)),!0}}},210:function(e,t,n){"use strict";var r=n(130);n.d(t,"a",(function(){return r.NodeSelection})),n.d(t,"b",(function(){return r.Selection}))}}]);