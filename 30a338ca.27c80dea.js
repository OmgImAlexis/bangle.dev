(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{123:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return w})),n.d(t,"metadata",(function(){return j})),n.d(t,"rightToc",(function(){return k})),n.d(t,"default",(function(){return A}));var r=n(3),o=n(7),i=n(0),a=n.n(i),c=n(140),u=n.p+"4fe5b8bffe1b1b645462dd2ab853a4ff.jsx",s=(n(53),n(181)),d=n(171),l=n(170),f=n(131),p=n(148),m=n(141),h=function(){var e=Object(d.a)("speech",{tag:"div",content:0});return{type:"node",name:"speech",schema:{content:"inline*",group:"block",draggable:!1,toDOM:e.toDOM,parseDOM:e.parseDOM}}},v=function(){return[Object(p.b)({"Ctrl-d":g()}),m.c.createPlugin({name:"speech",containerDOM:["div"],contentDOM:["span"]})]};function b(){var e=Object(s.c)({specs:[].concat(Object(l.b)(),[h()]),plugins:function(){return[].concat(Object(l.a)(),[v()])},initialValue:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:"Let us play some sound"}]},{type:"speech",content:[{type:"text",text:"I am a robot"}]},{type:"paragraph",content:[{type:"text",text:"Press Ctrl-d to create more nodes"}]}]}});return a.a.createElement(s.a,{state:e,renderNodeViews:function(e){var t=e.node,n=e.updateAttrs,r=e.children;if("speech"===t.type.name)return a.a.createElement(O,{node:t,updateAttrs:n},r)}})}function g(e){return void 0===e&&(e="Hello !"),function(t,n){var r=t.schema.nodes.speech.createChecked(void 0,t.schema.text(e)),o=Object(f.p)(r,t.selection.from)(t.tr);return n&&n(o),!0}}function O(e){var t=e.node,n=e.children,r=Object(i.useState)(""),o=r[0],c=r[1],u=Object(i.useState)(speechSynthesis.getVoices()),s=u[0],d=u[1];return Object(i.useEffect)((function(){speechSynthesis.addEventListener("voiceschanged",(function(){d(speechSynthesis.getVoices())}))}),[]),a.a.createElement("div",{style:{backgroundColor:"lightsteelblue",borderRadius:4,margin:"0.5rem 1rem",padding:"0.5rem 1rem"}},a.a.createElement("div",{className:"your-land",contentEditable:!1,style:{userSelect:"none"}},a.a.createElement("select",{value:o,onChange:function(e){c(e.target.value)}},s.map((function(e){return a.a.createElement("option",{key:e.name,value:e.lang},e.name," (",e.lang,")")}))),a.a.createElement("button",{onClick:function(){window.speechSynthesis.cancel();var e=new SpeechSynthesisUtterance(t.textContent);e.lang=o,speechSynthesis.speak(e)}},"Play")),n)}var y=n(176),w={title:"Custom Rendering"},j={unversionedId:"guides/custom-rendering-speech",id:"guides/custom-rendering-speech",isDocsHomePage:!1,title:"Custom Rendering",description:"Up untill this point you might be wondering what is the best way if you want",source:"@site/docs/guides/custom-rendering-speech.mdx",slug:"/guides/custom-rendering-speech",permalink:"/bangle-play/docs/guides/custom-rendering-speech",editUrl:"https://github.com/kepta/bangle-play/edit/master/_bangle-website/docs/docs/guides/custom-rendering-speech.mdx",version:"current",sidebar:"docs",previous:{title:"Your first Bangle Editor",permalink:"/bangle-play/docs/guides/first-editor"},next:{title:"Understanding Bangle",permalink:"/bangle-play/docs/guides/understanding-bangle"}},k=[{value:"Spec",id:"spec",children:[]},{value:"Plugins",id:"plugins",children:[]},{value:"Rendering",id:"rendering",children:[]}],M={rightToc:k};function A(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(c.b)("wrapper",Object(r.a)({},M,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"Up untill this point you might be wondering what is the best way if you want\nto change the way a particular node is rendered in the browser. You should definitely\ntry to see if you can achieve the results you want by just changing some CSS in your\nstylesheet, but if that is not enough NodeView is just the right tool."),Object(c.b)("p",null,"In this guide we will create a component that speaks the words written in it with the help of the node view API."),Object(c.b)(y.a,{filePath:u,language:"jsx",component:function(){return Object(c.b)(b,{mdxType:"Component"})},mdxType:"ReactCodeExample"}),Object(c.b)("h3",{id:"spec"},"Spec"),Object(c.b)("p",null,"We create a spec named ",Object(c.b)("inlineCode",{parentName:"p"},"speech")," having the following fields:"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"{\n  type: 'node',\n  name: 'speech',\n  schema: {\n    attrs: {\n      lang: {\n        default: '',\n      },\n    },\n    content: 'inline*',\n    group: 'block',\n    draggable: false,\n    toDOM,\n    parseDOM,\n  },\n}\n")),Object(c.b)("p",null,"The schema defines that this component can have 0 or more content of group ",Object(c.b)("inlineCode",{parentName:"p"},"inline")," (see ",Object(c.b)("a",Object(r.a)({parentName:"p"},{href:"https://prosemirror.net/docs/guide/#schema"}),"Prosemirror.Schema"),")."),Object(c.b)("p",null,"Next we define the ",Object(c.b)("inlineCode",{parentName:"p"},"toDOM")," and ",Object(c.b)("inlineCode",{parentName:"p"},"parseDOM")," fields of the schema. They control how editor serializes and parses\nyour node. For node views, these fields dictate the exporting of HTML, copy pasting and dragging."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"const { toDOM, parseDOM } = domSerializationHelpers(name, {\n  tag: 'div',\n  content: 0, // '0' in Prosemirror world is a convention for tell its a hole -- content can be put in it\n});\n")),Object(c.b)("p",null,"\ud83d\udca1 ",Object(c.b)("inlineCode",{parentName:"p"},"'0'")," in Prosemirror world is what ",Object(c.b)("inlineCode",{parentName:"p"},"props.children")," is in React i.e. dom content can be put in it. See ",Object(c.b)("a",Object(r.a)({parentName:"p"},{href:"https://prosemirror.net/docs/ref/#model.DOMOutputSpec"}),"Proseemirror.DOMOutputSpec")," for more details"),Object(c.b)("p",null,"Since we donot really care about the semantics of the output, we use the helper function ",Object(c.b)("inlineCode",{parentName:"p"},"domSerializationHelpers"),"\nwhich generates a good enough pair of ",Object(c.b)("inlineCode",{parentName:"p"},"toDOM")," and ",Object(c.b)("inlineCode",{parentName:"p"},"parseDOM"),"."),Object(c.b)("h3",{id:"plugins"},"Plugins"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"plugins() {\n  return [\n    keymap({\n      'Ctrl-d': createSpeechNode(),\n    }),\n    NodeView.createPlugin({\n      name: 'speech',\n      containerDOM: ['div'],\n      contentDOM: ['span'],\n    }),\n  ];\n}\n")),Object(c.b)("p",null,"In the plugins, we define a keyboard shortcut which allows us to create a new speech node whenever\nuser presses ",Object(c.b)("inlineCode",{parentName:"p"},"Ctrl-d"),". Here, ",Object(c.b)("inlineCode",{parentName:"p"},"createSpeechNode()")," is a command which will insert a new ",Object(c.b)("inlineCode",{parentName:"p"},"speech")," node for us."),Object(c.b)("p",null,"In the second plugin, we tell Bangle to use a NodeView plugin for rendering the ",Object(c.b)("inlineCode",{parentName:"p"},"speech")," node. With this\nwe are on our own on deciding the rendering of this node."),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"contentDOM")," and ",Object(c.b)("inlineCode",{parentName:"p"},"containerDOM")," (Prosemirror calls this ",Object(c.b)("inlineCode",{parentName:"p"},"dom"),") are names you will hear often in the docs:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("inlineCode",{parentName:"p"},"contentDOM"),": Is the dom node which will be the parent of the content. As you know, in our spec\nwe defined our node to have any content which is of the group ",Object(c.b)("inlineCode",{parentName:"p"},"inline"),". So anything that you type\nin the speech node, will be directly housed by this dom node.")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("inlineCode",{parentName:"p"},"containerDOM"),": This is the outermost node of ",Object(c.b)("inlineCode",{parentName:"p"},"speech")," node."))),Object(c.b)("p",null,"The bangle editor will directly interface with these two nodes and leave the things in between for you.\nYou can visualize this relationship something like this,\nwhere you only control the part demarcated as ",Object(c.b)("inlineCode",{parentName:"p"},"YOUR LAND"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-html"}),"<DOC>\n  || EDITOR LAND ||\n  <containerDOM>\n    || YOUR LAND ||\n    <contentDOM> || EDITOR LAND || </contentDOM>\n  </containerDOM>\n  || EDITOR LAND ||\n</DOC>\n")),Object(c.b)("h2",{id:"rendering"},"Rendering"),Object(c.b)("p",null,"Fully aborbing the visualization above, we create a React component:"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),'<div>\n  <div className="your-land" contentEditable={false}>\n    <select\n      onChange={(e) => {\n        setLang(e.target.value);\n      }}\n    >\n      <option>some option</option>\n    </select>\n    <button onClick={onPlay}>Play</button>\n  </div>\n  {children}\n</div>\n')),Object(c.b)("p",null,"We put all our customization under the div ",Object(c.b)("inlineCode",{parentName:"p"},".your-land"),". Bangle will automatically insert ",Object(c.b)("inlineCode",{parentName:"p"},"contentDOM")," in the ",Object(c.b)("inlineCode",{parentName:"p"},"children")," to allow for typing in our speech component."),Object(c.b)("p",null,"As you notice we have marked just a part of the UI as ",Object(c.b)("inlineCode",{parentName:"p"},"contentEditable=false"),", this\ntells the browser that unlike the rest, this content is not meant to be editable."),Object(c.b)("p",null,"\ud83d\udca1 When creating NodeView UI make sure that all the dom\nancestors of ",Object(c.b)("inlineCode",{parentName:"p"},"{children}")," are free of ",Object(c.b)("inlineCode",{parentName:"p"},"contentEditable=true")," or ",Object(c.b)("inlineCode",{parentName:"p"},"contentEditable=false"),". This helps prevent\n",Object(c.b)("inlineCode",{parentName:"p"},"contentEditable")," islands, which hamper the free flow of the cursor in your document. Like the example above, tuck\nall the custom UI in a single ",Object(c.b)("inlineCode",{parentName:"p"},"div")," or ",Object(c.b)("inlineCode",{parentName:"p"},"span"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),'// \ud83d\udeab donot do this as it creates `contentEditable` islands\n<div contentEditable={true}>\n  <div className="your-land" contentEditable={false}>\n    <button onClick={onPlay}>Play</button>\n  </div>\n  {children}\n</div>\n\n// \ud83d\udeab donot do this as it creates `contentEditable` islands\n<div contentEditable={true}>\n  <div className="your-land" contentEditable={false}>\n    <button onClick={onPlay}>Play</button>\n    <div contentEditable={true}>\n      {children}\n    </div>\n  </div>\n</div>\n\n// \ud83d\udc4d this is good\n<div>\n  <div className="your-land" contentEditable={false}>\n    <button onClick={onPlay}>Play</button>\n  </div>\n  <div>\n   {children}\n  </div>\n</div>\n')))}A.isMDXComponent=!0},131:function(e,t,n){"use strict";n.d(t,"p",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"k",(function(){return s})),n.d(t,"t",(function(){return d})),n.d(t,"s",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"l",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return b})),n.d(t,"m",(function(){return g})),n.d(t,"i",(function(){return O})),n.d(t,"q",(function(){return y})),n.d(t,"e",(function(){return w})),n.d(t,"n",(function(){return j})),n.d(t,"j",(function(){return k})),n.d(t,"o",(function(){return M})),n.d(t,"h",(function(){return S})),n.d(t,"c",(function(){return C})),n.d(t,"u",(function(){return D})),n.d(t,"r",(function(){return E}));var r=n(150),o=n(135),i=n(165),a=n(141);function c(){return r.safeInsert.apply(void 0,arguments)}var u=r.findParentNodeOfType;function s(e){return function(t){var n=t.selection,r=n.from,o=n.$from,i=n.to;return n.empty?Boolean(e.isInSet(t.tr.storedMarks||o.marks())):Boolean(t.doc.rangeHasMark(r,i,e))}}var d=function(e,t){return Number.isInteger(e)&&e>=0&&e<t.content.size},l=function(e,t){return[t.bulletList,t.orderedList,t.todoList].includes(e)};function f(e,t){var n=e.selection,r=n.from,o=n.to,i=[];e.doc.nodesBetween(r,o,(function(e){i=[].concat(i,e.marks)}));var a=i.find((function(e){return e.type.name===t.name}));return a?a.attrs:{}}function p(e){var t;if(e.isInline)return(t=e).isText?!!t.textContent.trim():"hardBreak"!==t.type.name;if(e.isBlock&&(e.isLeaf||e.isAtom))return!0;if(!e.childCount)return!1;for(var n=0;n<e.childCount;n++){if(p(e.child(n)))return!0}return!1}function m(e){if(e&&e.textContent)return!1;if(!e||!e.childCount||1===e.childCount&&h(e.firstChild))return!0;var t=[],n=[];return e.forEach((function(e){e.isInline?n.push(e):t.push(e)})),!n.length&&!t.filter((function(e){return!!e.childCount&&!(1===e.childCount&&h(e.firstChild))||e.isAtom})).length}function h(e){return!e||"paragraph"===e.type.name&&!e.textContent&&!e.childCount}function v(e,t){return function(n,r,o){return Array.isArray(e)||(e=[e]),!e.some((function(e){return!e(n,o)}))&&(t(n,r,o)||!1)}}function b(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function g(e,t,n,r){return 0===function(e,t,n){var r=[],o=function(e,t){var n=["blockquote","bulletList","orderedList"];if(1===t.depth)return t;var r=t.node(t.depth),o=t;for(;t.depth>=1;)(r=(t=e.resolve(t.before(t.depth))).node(t.depth))&&-1!==n.indexOf(r.type.name)&&(o=t);return o}(e,t).depth,i=e.resolve(t.start(o));for(;i.pos<=n.start(n.depth);){var a=Math.min(i.depth,o),c=i.node(a);if(c&&r.push(c),0===a)break;var u=e.resolve(i.after(a));if(u.start(a)>=e.nodeSize-2)break;u.depth!==i.depth&&(u=e.resolve(u.pos+2)),i=u.depth?e.resolve(u.start(u.depth)):e.resolve(u.end(u.depth))}return r}(e,t,n).filter((function(e){return e.type!==r})).length}var O=function(e){var t=e.selection,n=t.empty,r=t.$from;return n&&(0===r.parentOffset||e.selection instanceof i.a)},y=function(e,t){var n,r=e.tr.selection,o=r.from,i=r.to;return e.doc.nodesBetween(o,i,(function(r,a,c){if(r.isText||a<o||a>i)return!0;r.marks.forEach((function(o){if(!c.type.allowsMarkType(o.type)||t&&!t.allowsMarkType(o.type)){var i=r.marks.filter((function(e){return e.type!==o.type})),u=a>0?a-1:0,s=e.doc.nodeAt(u);if(!s||s.isText)return;n=(n||e.tr).setNodeMarkup(u,void 0,r.attrs,i)}}))}),o),n},w=function(e,t,n){var r=n.depth,o=t.nodes,i=o.bulletList,a=o.orderedList,c=o.todoList,u=e;u||(u=t.nodes.listItem);for(var s=n.depth;s>0;s--){var d=n.node(s);if(d.type!==i&&d.type!==a&&d.type!==c||(r=s),d.type!==i&&d.type!==a&&d.type!==c&&d.type!==u)break}return r-1};function j(e,t){for(var n=[],r=0;r<e.childCount;r++)n.push(t(e.child(r),r,e instanceof o.Fragment?e:e.content));return n}var k=function(e){var t=e.selection.$from;return!(t.depth>1)||(e.selection instanceof i.a&&0===t.parentOffset||0===t.index(t.depth-1))};function M(e,t){var n=A(e.content,t);return new o.Slice(n,e.openStart,e.openEnd)}function A(e,t,n){for(var r=[],i=0,a=e.childCount;i<a;i++){var c=e.child(i),u=c.isLeaf?t(c,n,i):t(c.copy(A(c.content,t,c)),n,i);u&&(u instanceof o.Fragment?r.push.apply(r,u.content):Array.isArray(u)?r.push.apply(r,u):r.push(u))}return o.Fragment.fromArray(r)}function S(e,t,n){void 0===t&&(t="above"),void 0===n&&(n=!1);var r="above"===t,o=n?-1:void 0;return function(t,n){var i=r?t.selection.$from.before(o):t.selection.$from.after(o),a=e.createAndFill(),u=t.tr,s=c(a,i)(t.tr);return u!==s&&(n&&n(s.scrollIntoView()),!0)}}function C(e,t,n,r){var o={start:-1,end:-1};return t.nodesBetween(n,r,(function(t,n){if(o.start>-1)return!1;-1===o.start&&e.isInSet(t.marks)&&(o={start:n,end:n+Math.max(t.textContent.length,1)})})),o}function D(e,t){return new a.d({key:e,state:{init:function(){return t},apply:function(e,t){return t}}})}function E(e){var t=document.createElement("div"),n=o.DOMSerializer.fromSchema(e.schema).serializeFragment(e.doc.content);return t.appendChild(n),t.innerHTML}},137:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"h",(function(){return f}));n(173),n(174);var r=n(135);function o(e){if(null==e)throw new Error("undefined value passed");return Array.isArray(e)?e:[e]}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=[e].concat(n);return function(e){return o.reduceRight((function(e,t){return t(e)}),e)}}function a(e,t){var n,r=[].concat(t.matchAll(e));if(0===r.length)return[{start:0,end:t.length,match:!1,subString:t}];for(var o=[],i=0,a=0;a<r.length;a++){var c=r[a],u=c.index,s=u+c[0].length;i!==u&&o.push({start:i,end:u,match:!1}),o.push({start:u,end:s,match:!0}),i=s}var d=null===(n=o[o.length-1])||void 0===n?void 0:n.end;return d&&d!==t.length&&o.push({start:d,end:t.length,match:!1}),o=o.map((function(e){return Object.assign({},e,{subString:t.slice(e.start,e.end)})}))}function c(e,t){return Object.fromEntries(Object.entries(e).map((function(e){var n=e[0],r=e[1];return[n,t(r,n)]})))}function u(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=e[0],r=e[1];return t(r,n)})))}function s(e){var t=[],n=null,r=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t=o,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r}var d=console.warn.bind(console,"Warning in bangle.js:");function l(e){var t=r.DOMSerializer.renderSpec(window.document,e),n=t.dom;if(t.contentDOM)throw new Error("createElement does not support creating contentDOM");return n}function f(e,t){requestAnimationFrame((function(){t(e.state,e.dispatch,e)}))}},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return f}));var r=n(150),o=n(134),i=n(137),a=n(131),c=n(135),u=n(151);function s(e){return function(t,n,i){if(!t.selection.empty)return!1;var a=Object(r.findParentNodeOfType)(e)(t.selection);if(!a)return!1;var c=t.selection,u=t.tr;u=u.setSelection(function(e,t){var n=e.selection.$from,r=n.start(t),i=n.end(t);return o.TextSelection.create(e.doc,r,i)}(t,a.depth)),n&&n(u),document.execCommand("copy");var s=i.state.tr;return n&&n(s.setSelection(o.Selection.near(s.doc.resolve(c.$from.pos)))),!0}}function d(e){return function(t,n){if(!t.selection.empty)return!1;var i=Object(r.findParentNodeOfType)(e)(t.selection);if(!i||!i.node)return!1;var a=t.tr;return a=a.setSelection(o.NodeSelection.create(a.doc,i.pos)),n&&n(a),document.execCommand("cut"),!0}}function l(e,t){return t=Object(i.a)(t),function(n){var o=Object(r.findParentNodeOfType)(e)(n.selection);if(!o)return!1;var i=o.depth-1;if(i<0)return!1;var a=n.selection.$from.node(i);return t.includes(a.type)}}function f(e,t){void 0===t&&(t="UP");var n="DOWN"===t;return function(t,i){if(!t.selection.empty)return!1;var s=t.selection.$from,d=Object(r.findParentNodeOfType)(e)(t.selection);if(!d)return!1;var l=d.node,f=d.depth-1,p=s.node(f),m=s.start(f);if(l.type!==e)return!1;var h=Object(a.n)(p,(function(e){return e})),v=h.indexOf(l),b=n?v+1:v-1;if(b>=h.length||b<0)return!1;var g=h[b].nodeSize,O=[h[b],h[v]];h[v]=O[0],h[b]=O[1];var y=t.tr,w=m,j=s.end(f),k=new c.Slice(c.Fragment.fromArray(h),0,0);return y=(y=y.step(new u.c(w,j,k,!1))).setSelection(o.Selection.near(y.doc.resolve(n?s.pos+g:s.pos-g))),i&&i(y.scrollIntoView()),!0}}},139:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(134);n.d(t,"a",(function(){return r.Plugin})),n.d(t,"c",(function(){return r.PluginKey}));var o=function(e,t){this.name=e,this.plugins=t}},141:function(e,t,n){"use strict";n.d(t,"g",(function(){return o.b})),n.d(t,"h",(function(){return o.c})),n.d(t,"j",(function(){return o.i})),n.d(t,"m",(function(){return o.o})),n.d(t,"n",(function(){return o.p})),n.d(t,"o",(function(){return o.t})),n.d(t,"p",(function(){return o.u})),n.d(t,"k",(function(){return o.l})),n.d(t,"i",(function(){return o.g})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return k.a})),n.d(t,"f",(function(){return u.a})),n.d(t,"d",(function(){return v.a})),n.d(t,"e",(function(){return v.c})),n.d(t,"l",(function(){return r.b}));var r=n(142),o=n(146),i=n(169),a=n(134),c=n(135),u=n(149),s=n(164),d=n(136),l=n(132),f=n(193),p=n(133),m=n(194),h=n(137),v=n(139);function b(e,t,n){var r=void 0===n?{}:n,i=r.editorProps,a=r.defaultPlugins,c=void 0===a||a,u=r.dropCursorOpts,b=r.transformPlugins,O=void 0===b?function(e){return e}:b,y=e.schema,w=g(t,{schema:y,specRegistry:e}),j=w[0],k=w[1];if(c){var M=[];k.has("history")||M.push(o.j.plugins()),k.has("editorStateCounter")||M.push(o.g.plugins()),(j=function(e,t){var n=void 0===t?{}:t,r=n.inputRules,o=void 0===r||r,i=n.undoInputRule,a=void 0===i||i,c=[],u=[];e.forEach((function(e){e instanceof d.a?u.push(e):c.push(e)})),o&&(e=[].concat(c,[Object(d.b)({rules:u})]));a&&e.push(Object(l.b)({Backspace:d.d}));return e}(j=j.concat(g(M,{schema:y,specRegistry:e})[0]))).push(Object(l.b)(p.b),Object(m.a)(u),Object(f.a)())}if(i&&j.push(new v.a({props:i})),(j=O(j=j.filter(Boolean))).some((function(e){return!(e instanceof v.a)})))throw Object(h.b)("You are either using multiple versions of the library or not returning a Plugin class in your plugins. Investigate :",j.find((function(e){return!(e instanceof v.a)}))),new Error("Invalid plugin");return function(e,t){for(var n,r=e.filter((function(e){return e.props&&e.props.nodeViews})),o=new Map,i=Object(s.a)(r);!(n=i()).done;)for(var a=n.value,c=0,u=Object.keys(a.props.nodeViews);c<u.length;c++){var d=u[c];if(!t.schema.nodes[d])throw Object(h.b)("When loading your plugins, we found nodeView implementation for the node '"+d+"' did not have a corresponding spec. Check the plugin:",a,"and your specRegistry",t),new Error("NodeView validation failed. Spec for '"+d+"' not found.");if(o.has(d))throw Object(h.b)("When loading your plugins, we found more than one nodeView implementation for the node '"+d+"'. Bangle can only have a single nodeView implementation, please check the following two plugins",a,o.get(d)),new Error("NodeView validation failed. Duplicate nodeViews for '"+d+"' found.");o.set(d,a)}}(j,e),j}function g(e,t){var n=new Set;return[function e(r){if(Array.isArray(r))return r.flatMap((function(t){return e(t)})).filter(Boolean);if(r instanceof v.b){if(n.has(r.name))throw new Error("Duplicate names of pluginGroups "+r.name+" not allowed.");return n.add(r.name),e(r.plugins)}if("function"==typeof r){if(!t)throw new Error("Found a function but no payload");return e(r(t))}return r}(e),n]}var O=function(e){var t=void 0===e?{}:e,n=t.specRegistry,r=t.specs,o=t.plugins,i=void 0===o?[]:o,c=t.initialValue,s=t.editorProps,d=t.pmStateOpts;if(r&&n)throw new Error("Cannot have both specs and specRegistry defined");n||(n=new u.a(r)),this.specRegistry=n;var l=this.specRegistry.schema;this.pmState=a.EditorState.create(Object.assign({schema:l,doc:y({schema:l,content:c}),plugins:b(n,i,{editorProps:s})},d))},y=function(e){var t=e.schema,n=e.content,r=e.parseOptions;if(null==n)return t.nodeFromJSON({type:"doc",content:[{type:"paragraph"}]});if(n instanceof c.Node)return n;if("object"==typeof n)return t.nodeFromJSON(n);if("string"==typeof n){var o=document.createElement("div");return o.innerHTML=n.trim(),c.DOMParser.fromSchema(t).parse(o,r)}return!1};var w=n(131),j=function(){function e(e,t){var n=t.focusOnInit,r=void 0===n||n,o=t.state,a=t.pmViewOpts,c=void 0===a?{}:a;if(this.destroyed=!1,!(o instanceof O))throw new Error("state is required and must be an instance of BangleEditorState");this.view=new i.c(e,Object.assign({state:o.pmState,dispatchTransaction:function(e){var t=this.state.apply(e);this.updateState(t)},attributes:{class:"bangle-editor"}},c)),r&&this.focusView()}var t=e.prototype;return t.focusView=function(){this.view.focused||this.view.focus()},t.destroy=function(){this.destroyed||(null!==this.view.docView?(this.destroyed=!0,this.view.destroy()):this.destroyed=!0)},t.toHTMLString=function(){return Object(w.r)(this.view.state)},e}(),k=n(147)},142:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if("undefined"!=typeof navigator){var o=/Edge\/(\d+)/.exec(navigator.userAgent),i=/MSIE \d/.test(navigator.userAgent),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);r.mac=/Mac/.test(navigator.platform);var c=r.ie=!!(i||a||o);r.ie_version=i?document.documentMode||6:a?+a[1]:o?+o[1]:null,r.gecko=!c&&/gecko\/\d/i.test(navigator.userAgent),r.chrome=!c&&/Chrome\//.test(navigator.userAgent),r.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1],10),r.android=/Android \d/.test(navigator.userAgent),r.ios=!c&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),r.webkit=!c&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}t.a=r;var u=r.chrome&&!r.android&&r.chrome_version>=58},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(136);function o(e,t){return new r.a(e,(function(e,n,r,o){var i=e.tr,a=n.length-1,c=o,u=r;if(n[a]){var s=r+n[0].indexOf(n[a-1]),d=s+n[a-1].length-1,l=s+n[a-1].lastIndexOf(n[a]),f=l+n[a].length;if(function(e,t,n){var r=[];return n.doc.nodesBetween(e,t,(function(e,t){r=[].concat(r,e.marks.map((function(n){return{start:t,end:t+e.nodeSize,mark:n}})))})),r}(r,o,e).filter((function(e){return e.mark.type.excluded.find((function(e){return e.name===t.name}))})).filter((function(e){return e.end>s})).length)return!1;f<d&&i.delete(f,d),l>s&&i.delete(s,l),c=(u=s)+n[a].length}return i.addMark(u,c,t.create()),i.removeStoredMark(t),i}))}},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(134),o=n(135);function i(e,t,n){var i=function r(i,a){var c=[];return i.forEach((function(o){if(o.isText){for(var i,u=o.text,s=0,d=!!o.marks.filter((function(e){return"link"===e.type.name}))[0];!d&&null!==(i=e.exec(u));)if(a&&a.type.allowsMarkType(t)&&i[1]){var l=i.index,f=l+i[0].length,p=l+i[0].indexOf(i[1]),m=p+i[1].length,h=n instanceof Function?n(i):n;l>0&&c.push(o.cut(s,l)),c.push(o.cut(p,m).mark(t.create(h).addToSet(o.marks))),s=f}s<u.length&&c.push(o.cut(s))}else c.push(o.copy(r(o.content,o)))})),o.Fragment.fromArray(c)};return new r.Plugin({props:{transformPasted:function(e){return new o.Slice(i(e.content),e.openStart,e.openEnd)}}})}},145:function(e,t,n){"use strict";n.d(t,"g",(function(){return b})),n.d(t,"c",(function(){return O})),n.d(t,"e",(function(){return y})),n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return M})),n.d(t,"d",(function(){return C})),n.d(t,"h",(function(){return D})),n.d(t,"f",(function(){return E}));var r=n(151),o=n(192),i=n(133),a=n(135),c=n(150),u=n(134),s=n(137),d=n(131),l=n(165);function f(e,t,n,o){var i=n.$from,c=n.$to,u=e;u||(u=t.schema.nodes.listItem);var s=i.blockRange(c,(function(e){return!!e.childCount&&!!e.firstChild&&e.firstChild.type===u}));if(!s||s.depth<2||i.node(s.depth-1).type!==u)return o;var d=s.end,l=c.end(s.depth);return d<l&&(o.step(new r.b(d-1,l,d,l,new a.Slice(a.Fragment.from(u.create(void 0,s.parent.copy())),1,0),1,!0)),s=new a.NodeRange(o.doc.resolve(i.pos),o.doc.resolve(l),s.depth)),o.lift(s,Object(r.j)(s)).scrollIntoView()}var p=function(e,t){for(var n=t.bulletList,r=t.orderedList,o=t.todoList,i=0,a=e.depth-1;a>0;a--){var c=e.node(a);c.type!==n&&c.type!==r&&c.type!==o||(i+=1)}return i},m=function(e){return function(t){var n=t.selection.$from.parent,r=e;r||(r=t.schema.nodes.listItem);var o=t.schema.nodes.paragraph;return t.selection instanceof l.a?n.type===r:n.type===o&&Object(c.hasParentNodeOfType)(r)(t.selection)}};var h=function(e){return function(t){var n=t.selection.$from,r=e;r||(r=t.schema.nodes.listItem);var o=t.schema.nodes.paragraph;return t.selection instanceof l.a?n.parent.type===r:Object(c.hasParentNodeOfType)(r)(t.selection)&&n.parent.type===o}};function v(e){var t=e.selection.$from,n=e.schema.nodes,r=n.bulletList,o=n.orderedList,i=n.todoList,a=e.doc.resolve(t.pos-1),c=a?a.nodeBefore:null;return e.selection instanceof l.a&&(c=t.nodeBefore),!!c&&[r,o,i].indexOf(c.type)>-1}function b(e,t){return function(n,r,a){var c=n.selection,s=c.$from.node(c.$from.depth-2),l=c.$to.node(c.$to.depth-2);if(s&&s.type.name===e.name&&l&&l.type.name===e.name){var p=t||n.schema.nodes.listItem,m=function(e,t,n){for(var r,o=e,i=n.bulletList,a=n.orderedList,c=n.todoList,u=t.depth-1;u>0;u--){var s=t.node(u);if(s.type!==i&&s.type!==a&&s.type!==c||(r=u),s.type!==i&&s.type!==a&&s.type!==o)break}return r}(p,c.$to,n.schema.nodes),h=c.$to.pos;c instanceof u.NodeSelection&&c.node.type===p&&(h=c.$from.pos+c.node.firstChild.content.size);var v=function(e,t,n,r,o,i){var a=e;a||(a=t.schema.nodes.listItem);var c=!1;return i.doc.nodesBetween(n,r,(function(e,r){if(!c&&e.type===a&&r>n){c=!0;for(var s=o+3;s>o+2;){var d=i.doc.resolve(i.mapping.map(r));s=d.depth;var l=i.doc.resolve(i.mapping.map(r+e.textContent.length)),p=new u.TextSelection(d,l);i=f(a,t,p,i)}}})),i}(p,n,h,c.$to.end(m),m||0,n.tr);return v=function(e,t,n){var r=t.selection,o=r.from,i=r.to,a=t.schema.nodes.paragraph,c=[];n.doc.nodesBetween(o,i,(function(e,t){e.type===a&&c.push({node:e,pos:t})}));for(var u=c.length-1;u>=0;u--){var s=c[u],l=n.doc.resolve(n.mapping.map(s.pos));if(l.depth>0){var f=void 0;f=s.node.textContent&&s.node.textContent.length>0?n.doc.resolve(n.mapping.map(s.pos+s.node.textContent.length)):n.doc.resolve(n.mapping.map(s.pos+1));var p=l.blockRange(f);p&&n.lift(p,Object(d.e)(e,t.schema,l))}}return n}(p,n,v),r&&r(v),!0}return function(e){return function(t,n,r){if(n&&n(t.tr.setSelection(function(e,t){var n=t.$from,r=t.$to,o=n.pos===r.pos,i=n.pos,a=r.pos;if(o&&i===e.nodeSize-3)return t;if(n.nodeBefore&&!o){i++;for(var c=e.nodeAt(i);!c||c&&!c.isText;)i++,c=e.nodeAt(i)}if(a===i)return new u.TextSelection(e.resolve(i));return new u.TextSelection(e.resolve(i),e.resolve(a))}(t.doc,t.selection))),!r)return!1;var a=(t=r.state).selection,c=a.$from,s=a.$to,l=Object(d.m)(t.doc,c,s,e);if(function(e,t){var n=e.selection.$from,r=n.node(-2),o=n.node(-3);return r&&r.type===t||o&&o.type===t}(t,e)&&l)return g()(t,n);l||(g()(t,n),t=r.state);var f,p=Object(d.q)(t,e);return p&&n&&(n(p),t=r.state),(f=e,i.a(o.c(f),(function(e,t){return e.type===t.type&&e.type===f})))(t,n)}}(e)(n,r,a)}}function g(){return function(e,t){var n=e.tr,o=e.selection,i=o.$from,a=o.$to;return n.doc.nodesBetween(i.pos,a.pos,(function(t,o){if(t.isTextblock){var i=new u.NodeSelection(n.doc.resolve(n.mapping.map(o))),a=i.$from.blockRange(i.$to);if(!a||![e.schema.nodes.listItem,e.schema.nodes.todoItem].includes(i.$from.parent.type))return!1;var c=a&&Object(r.j)(a);if(null==c)return!1;n.lift(a,c)}})),t&&t(n),!0}}function O(e){return function(t,n){var r=e;return r||(r=t.schema.nodes.listItem),!!h(r)(t)&&(function(e,t){var n,r=t.tr.selection.$to.pos;do{var o=t.doc.resolve(r);if((n=p(o,t.schema.nodes))>4)return!1;r++}while(n>=e);return!0}(p(t.selection.$from,t.schema.nodes),t)&&o.b(r)(t,n),!0)}}function y(e){return function(t,n){var r=e;r||(r=t.schema.nodes.listItem);var i=t.selection,a=i.$from,c=i.$to;if(h(r)(t)){var u=a.blockRange(c,(function(e){return e.childCount>0&&e.firstChild.type===r}));return!!u&&Object(s.c)(function(e,t){return function(n){return function(r,o){return n(r,(function(n){var i=r.doc.resolve(t.start),a=r.doc.resolve(t.end),c=n.doc.resolve(n.mapping.map(t.end-1));c.nodeBefore&&c.nodeAfter&&c.nodeBefore.type===c.nodeAfter.type&&a.nodeAfter&&a.nodeAfter.type===e&&a.parent.type===i.parent.type&&n.join(c.pos),o&&o(n.scrollIntoView())}))}}}(r,u),o.a)(r)(t,n)}return!1}}var w=function(e){var t=e.selection.$from,n=t.node(t.depth-4),r=e.schema.nodes.todoList;return n.type===r},j=function(e){var t=e.selection.$from,n=t.node(t.depth-2),r=e.schema.nodes;return[r.bulletList,r.orderedList].includes(n.type)},k=function(e){return function(){return i.c(Object(d.a)([h(e),d.i,d.j,function(e){return w(e)&&j(e)},function(e){return m(e.schema.nodes.todoItem)(e)}],(function(e,t,n){return!!b(e.schema.nodes.todoList,e.schema.nodes.todoItem)(e,t,n)&&y((e=n.state).schema.nodes.todoItem)(e,t,n)})),Object(d.a)([h(e),d.i,d.j,m(e)],i.c(S(e),y(e))),Object(d.a)([d.i,v],A(e))).apply(void 0,arguments)}};function M(e){return function(t,n,r){var o,i=t.selection;if(i.empty){var u=i.$from,s=e;s||(s=t.schema.nodes.listItem);var l=t.schema.nodes,f=l.codeBlock,p=l.todoItem,m=u.node(u.depth),h=u.node(u.depth-1);if(h&&h.type===s){var v=Object(d.g)(h);if(Object(d.l)(m)&&!v)return w(t)&&s!==p?!!b(t.schema.nodes.todoList,t.schema.nodes.todoItem)(t,n,r)&&y(t.schema.nodes.todoItem)(r.state,n,r):y(s)(t,n);if(!Object(c.hasParentNodeOfType)(f)(i))return(o=s,function(e,t){var n=e.selection,r=n.$from,i=n.$to,c=n.node;if(c&&c.isBlock||r.depth<2||!r.sameParent(i))return!1;var u=r.node(-1);if(u.type!==o)return!1;if(u.content.content.length<=1&&0===r.parent.content.size&&0!==u.content.size){if(2===r.depth||r.node(-3).type!==o||r.index(-2)!==r.node(-2).childCount-1)return!1;if(t){for(var s=a.Fragment.empty,d=r.index(-1)>0,l=r.depth-(d?1:2);l>=r.depth-3;l--)s=a.Fragment.from(r.node(l).copy(s));s=s.append(a.Fragment.from(o.createAndFill()));var f=e.tr.replace(r.before(d?void 0:-1),r.after(-3),new a.Slice(s,d?3:2,2));f.setSelection(e.selection.constructor.near(f.doc.resolve(r.pos+(d?3:2)))),t(f.scrollIntoView())}return!0}var p=i.pos===r.end()?u.contentMatchAt(0).defaultType:void 0,m=e.tr.delete(r.pos,i.pos),h=p&&[void 0,{type:p}];return t&&t(m.split(r.pos,2,h).scrollIntoView()),!0})(t,n)}}return!1}}function A(e){return function(t,n){var o=e;o||(o=t.schema.nodes.listItem);var i=t.selection.$from,u=t.schema.nodes,s=u.paragraph,f=u.codeBlock,p=u.bulletList,m=u.orderedList,h=u.todoList,v=t.selection instanceof l.a,b=v?t.doc.resolve(i.pos+1):i,g=Object(d.b)(b);if(!g)return!1;if(g.nodeBefore&&[p,m,h].indexOf(g.nodeBefore.type)>-1&&g.nodeAfter&&(g.nodeAfter.type===s||g.nodeAfter.type===f)){for(var O=g.doc.resolve(g.pos-1);O.parent.type!==s;)O=t.doc.resolve(O.pos-1);var y=t.tr;if(v){var w=Object(c.findPositionOfNodeBefore)(y.selection);if("number"!=typeof w)return!1;var j=g.nodeBefore.copy(g.nodeBefore.content.append(a.Fragment.from(o.createChecked({},g.nodeAfter))));y.replaceWith(w,i.pos+g.nodeAfter.nodeSize,j)}else y=t.tr.step(new r.b(O.pos,g.pos+g.nodeAfter.nodeSize,g.pos+1,g.pos+g.nodeAfter.nodeSize-1,t.tr.doc.slice(O.pos,g.pos),0,!0));var k=y.doc.resolve(y.mapping.map(g.pos+g.nodeAfter.nodeSize));return k.nodeBefore&&k.nodeAfter&&k.nodeBefore.type===k.nodeAfter.type&&[p,m,h].indexOf(k.nodeBefore.type)>-1&&(y=y.join(k.pos)),n&&n(y.scrollIntoView()),!0}return!1}}function S(e){return function(t,n){var r=t.selection.$from,o=e;o||(o=t.schema.nodes.listItem);var i=Object(d.b)(r);if(!i||!i.nodeBefore||i.nodeBefore.type!==o)return!1;if(1===i.nodeBefore.childCount&&i.nodeBefore.firstChild.nodeSize<=2){var a=t.tr;return n&&n(a.delete(i.pos-i.nodeBefore.nodeSize,r.pos).scrollIntoView()),!0}return!1}}function C(e,t){void 0===t&&(t="UP");var n="DOWN"===t;return Object(d.a)([function(t){var r=Object(c.findParentNodeOfType)(e)(t.selection);if(!r)return!1;var o=r.node,i=t.selection.$from.node(r.depth-1),a=null==i?void 0:i[n?"lastChild":"firstChild"];return!(!o||a!==o)}],(function(t,r){var o=e;if(o||(o=t.schema.nodes.listItem),!t.selection.empty)return!1;var i=Object(c.findParentNode)((function(e){return Object(d.s)(e.type,t.schema.nodes)}))(t.selection),a=Object(c.findParentNodeOfType)(o)(t.selection);if(null==i||!i.node||null==a||!a.node)return!1;if(3===t.selection.$from.depth)return y(o)(t,r);var u=1===i.node.childCount?i:a,s=t.tr.delete(u.pos,u.pos+u.node.nodeSize),l=t.selection.$from.before(-3);if(n){var f=t.selection.$from.after(-3);l=f-u.node.nodeSize;var p=Object(d.t)(f,t.doc)&&t.doc.nodeAt(f);p&&p.type===o&&(l+=p.nodeSize)}var m=a.node;w(t)&&(m=t.schema.nodes.todoItem.createChecked({},m.content,m.marks));var h=Object(c.safeInsert)(m,l)(s);return h!==s&&(r&&r(h),!0)}))}function D(e,t){return function(n,r){var o=n.selection.$from,i=o.node(-1);if(i&&i.type===e){var a=n.tr,c=o.before(-1);if(t(i.attrs)!==i.attrs)return a.setNodeMarkup(c,void 0,t(i.attrs)),r(a),!0}return!1}}function E(e){return function(t,n){var r=t.selection.$from.node(-1);return!(!r||r.type!==e)&&r.attrs}}},146:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return v})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return g})),n.d(t,"r",(function(){return r})),n.d(t,"v",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"q",(function(){return R})),n.d(t,"s",(function(){return a})),n.d(t,"a",(function(){return V})),n.d(t,"c",(function(){return U})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return ne})),n.d(t,"k",(function(){return s})),n.d(t,"o",(function(){return d})),n.d(t,"p",(function(){return he})),n.d(t,"t",(function(){return l})),n.d(t,"u",(function(){return Ee})),n.d(t,"l",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"g",(function(){return m}));var r={};n.r(r),n.d(r,"spec",(function(){return M})),n.d(r,"plugins",(function(){return A})),n.d(r,"commands",(function(){return S})),n.d(r,"defaultKeys",(function(){return C})),n.d(r,"toggleStrike",(function(){return E})),n.d(r,"queryIsStrikeActive",(function(){return I}));var o={};n.r(o),n.d(o,"spec",(function(){return P})),n.d(o,"plugins",(function(){return N})),n.d(o,"commands",(function(){return x})),n.d(o,"defaultKeys",(function(){return L})),n.d(o,"toggleUnderline",(function(){return B})),n.d(o,"queryIsUnderlineActive",(function(){return _}));var i={};n.r(i),n.d(i,"spec",(function(){return $}));var a={};n.r(a),n.d(a,"spec",(function(){return q}));var c={};n.r(c),n.d(c,"spec",(function(){return W})),n.d(c,"plugins",(function(){return F})),n.d(c,"commands",(function(){return K})),n.d(c,"defaultKeys",(function(){return Y})),n.d(c,"queryIsCodeActiveBlock",(function(){return Z}));var u={};n.r(u),n.d(u,"spec",(function(){return X})),n.d(u,"plugins",(function(){return Q})),n.d(u,"defaultKeys",(function(){return ee}));var s={};n.r(s),n.d(s,"spec",(function(){return re})),n.d(s,"plugins",(function(){return oe}));var d={};n.r(d),n.d(d,"spec",(function(){return ce})),n.d(d,"plugins",(function(){return ue})),n.d(d,"commands",(function(){return se})),n.d(d,"defaultKeys",(function(){return de})),n.d(d,"indentListItem",(function(){return pe})),n.d(d,"outdentListItem",(function(){return me}));var l={};n.r(l),n.d(l,"spec",(function(){return ye})),n.d(l,"plugins",(function(){return we})),n.d(l,"defaultKeys",(function(){return je})),n.d(l,"commands",(function(){return ke})),n.d(l,"toggleTodoItemDone",(function(){return Ce})),n.d(l,"queryTodoItemAttrs",(function(){return De}));var f={};n.r(f),n.d(f,"spec",(function(){return Be})),n.d(f,"plugins",(function(){return _e})),n.d(f,"commands",(function(){return $e})),n.d(f,"updateImageNodeAttribute",(function(){return We}));var p={};n.r(p),n.d(p,"plugins",(function(){return Ge})),n.d(p,"commands",(function(){return Je})),n.d(p,"defaultKeys",(function(){return Ze})),n.d(p,"undo",(function(){return Xe})),n.d(p,"redo",(function(){return Qe}));var m={};n.r(m),n.d(m,"plugins",(function(){return tt})),n.d(m,"docChangedKey",(function(){return nt})),n.d(m,"selectionChangedKey",(function(){return rt}));var h=n(154),v=n(155),b=n(156),g=n(152),O=n(143),y=n(144),w=n(133),j=n(132),k=n(131),M=function(e){void 0===e&&(e={});return{type:"mark",name:D,schema:{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function(e){return"line-through"===e}}],toDOM:function(){return["s",0]}},markdown:{toMarkdown:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{s:{mark:"strike"}}}}},A=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?C:t;return function(e){var t,r=function(e){return e.marks.strike}(e.schema);return[Object(y.a)(/~([^~]+)~/g,r),Object(O.a)(/~([^~]+)~$/,r),n&&Object(j.b)((t={},t[n.toggleStrike]=Object(w.f)(r),t))]}},S={toggleStrike:E,queryIsStrikeActive:I},C={toggleStrike:"Mod-d"},D="strike";function E(){return function(e,t,n){return Object(w.f)(e.schema.marks.strike)(e,t,n)}}function I(){return function(e){return Object(k.k)(e.schema.marks.strike)(e)}}var P=function(e){void 0===e&&(e={});return{type:"mark",name:T,schema:{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:function(e){return e===T}}],toDOM:function(){return["u",0]}},markdown:{toMarkdown:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0}}}},N=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?L:t;return function(e){var t,r=function(e){return e.marks.underline}(e.schema);return[Object(O.a)(/~([^~]+)~$/,r),Object(y.a)(/~([^~]+)~/g,r),n&&Object(j.b)((t={},t[n.toggleUnderline]=Object(w.f)(r),t))]}},x={toggleUnderline:B,queryIsUnderlineActive:_},L={toggleUnderline:"Mod-u"},T="underline";function B(){return function(e,t,n){return Object(w.f)(e.schema.marks.underline)(e,t,n)}}function _(){return function(e){return Object(k.k)(e.schema.marks.underline)(e)}}var $=function(e){var t=(void 0===e?{}:e).content;return{type:"node",topNode:!0,name:"doc",schema:{content:void 0===t?"block+":t}}};var R=n(157),q=function(e){void 0===e&&(e={});return{type:"node",name:"text",schema:{group:"inline"},markdown:{toMarkdown:function(e,t){e.text(t.text)}}}};var V=n(158),U=n(159),z=n(136),H=n(138),W=function(e){void 0===e&&(e={});return{type:"node",name:G,schema:{attrs:{language:{default:""}},content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},markdown:{toMarkdown:function(e,t){e.write("```"+(t.attrs.language||"")+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parseMarkdown:{code_block:{block:G,noCloseToken:!0},fence:{block:G,getAttrs:function(e){return{language:e.info||""}},noCloseToken:!0}}}}},F=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,r=void 0===n||n,o=t.keybindings,i=void 0===o?Y:o;return function(e){var t,n=e.schema,o=J(n);return[r&&Object(z.c)(/^```$/,o),i&&Object(j.b)((t={},t[i.toCodeBlock]=Object(w.e)(o),t[i.moveUp]=Object(H.c)(o,"UP"),t[i.moveDown]=Object(H.c)(o,"DOWN"),t[i.insertEmptyParaAbove]=Object(k.a)(Z(),Object(k.h)(n.nodes.paragraph,"above",!1)),t[i.insertEmptyParaBelow]=Object(k.a)(Z(),Object(k.h)(n.nodes.paragraph,"below",!1)),t))]}},K={queryIsCodeActiveBlock:Z},Y={toCodeBlock:"Shift-Ctrl-\\",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},G="codeBlock",J=function(e){return e.nodes.codeBlock};function Z(){return function(e){var t=J(e.schema);return Boolean(Object(k.d)(t)(e.selection))}}var X=function(e){void 0===e&&(e={});return{type:"node",name:te,schema:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},markdown:{toMarkdown:function(e,t,n,r){for(var o=r+1;o<n.childCount;o++)if(n.child(o).type!==t.type)return void e.write("\\\n")},parseMarkdown:{hardbreak:{node:"hardBreak"}}}}},Q=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?ee:t;return function(e){var t,r=function(e){return e.nodes[te]}(e.schema),o=Object(w.c)(w.d,(function(e,t){return t&&t(e.tr.replaceSelectionWith(r.create()).scrollIntoView()),!0}));return[n&&Object(j.b)((t={},t[n.insert]=o,t))]}},ee={insert:"Shift-Enter"},te="hardBreak";var ne=n(160),re=function(e){void 0===e&&(e={});return{type:"node",name:ie,schema:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},markdown:{toMarkdown:function(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},parseMarkdown:{hr:{node:ie}}}}},oe=function(e){var t=(void 0===e?{}:e).markdownShortcut,n=void 0===t||t;return function(e){var t=function(e){return e.nodes.horizontalRule}(e.schema);return[n&&new z.a(/^(?:---|___\s|\*\*\*\s)$/,(function(e,n,r,o){if(!n[0])return null;var i=e.tr.replaceWith(r-1,o,t.createChecked());return Object(k.p)(e.schema.nodes.paragraph.createChecked(),i.selection.end)(i)}))]}},ie="horizontalRule";var ae=n(145),ce=function(e){void 0===e&&(e={});return{type:"node",name:le,schema:{content:"(paragraph) (paragraph | bulletList | orderedList)*",defining:!0,draggable:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}},markdown:{toMarkdown:function(e,t){e.renderContent(t)},parseMarkdown:{list_item:{block:le}}}}},ue=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?de:t;return function(e){var t,r=e.schema,o=fe(r),i=Object(H.d)(o,[r.nodes.bulletList,r.nodes.orderedList]),a=function(e){return Object(w.c)(Object(H.c)(o,e),Object(ae.d)(o,e))};return[n&&Object(j.b)((t={Backspace:Object(ae.a)(o),Enter:Object(ae.b)(o)},t[n.indent]=pe(),t[n.outdent]=me(),t[n.moveUp]=Object(k.a)(i,a("UP")),t[n.moveDown]=Object(k.a)(i,a("DOWN")),t[n.emptyCut]=Object(k.a)(i,Object(H.b)(o)),t[n.emptyCopy]=Object(k.a)(i,Object(H.a)(o)),t[n.insertEmptyListAbove]=Object(k.a)(i,Object(k.h)(o,"above",!0)),t[n.insertEmptyListBelow]=Object(k.a)(i,Object(k.h)(o,"below",!0)),t))]}},se={indentListItem:pe,outdentListItem:me},de={indent:"Tab",outdent:"Shift-Tab",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyListAbove:"Mod-Shift-Enter",insertEmptyListBelow:"Mod-Enter"},le="listItem",fe=function(e){return e.nodes.listItem};function pe(){return function(e,t,n){var r=fe(e.schema);return Object(ae.c)(r)(e,t,n)}}function me(){return function(e,t,n){var r=fe(e.schema);return Object(ae.e)(r)(e,t,n)}}var he=n(161),ve=n(142),be=n(147),ge=n(171),Oe=n(137),ye=function(e){var t=void 0===e?{}:e,n=t.nested,r=void 0===n||n,o=t.draggable,i=void 0===o||o,a=Object(ge.a)(Ae,{tag:"li",parsingPriority:51,content:0}),c=a.toDOM,u=a.parseDOM;return{type:"node",name:Ae,schema:{attrs:{done:{default:!1}},draggable:i,content:r?"(paragraph) (paragraph | todoList | bulletList | orderedList)*":"(paragraph) (paragraph | bulletList | orderedList)*",toDOM:c,parseDOM:u},markdown:{toMarkdown:function(e,t){e.write(t.attrs.done?"[x] ":"[ ] "),e.renderContent(t)},parseMarkdown:{todo_item:{block:Ae,getAttrs:function(e){return{"data-name":Ae,done:e.attrGet("isDone")||!1}}}}},options:{nested:r}}},we=function(e){var t=void 0===e?{}:e,n=t.nodeView,r=void 0===n||n,o=t.keybindings,i=void 0===o?je:o;return function(e){var t,n=e.schema,o=e.specRegistry.options.todoItem.nested,a=Se(n),c=function(e){return Object(w.c)(Object(H.c)(a,e),Object(ae.d)(a,e))},u=Object(H.d)(a,n.nodes.todoList);return[i&&Object(j.b)((t={},t[i.toggleDone]=Object(k.a)(u,Object(ae.h)(a,(function(e){return Object.assign({},e,{done:!e.done})}))),t.Enter=Object(ae.b)(a),t.Backspace=Object(ae.a)(a),t[i.indent]=o?Object(ae.c)(a):function(){},t[i.outdent]=Object(ae.e)(a),t[i.moveUp]=Object(k.a)(u,c("UP")),t[i.moveDown]=Object(k.a)(u,c("DOWN")),t[i.emptyCut]=Object(k.a)(u,Object(H.b)(a)),t[i.emptyCopy]=Object(k.a)(u,Object(H.a)(a)),t[i.insertEmptyTodoAbove]=Object(k.a)(u,Object(k.h)(a,"above",!0)),t[i.insertEmptyTodoBelow]=Object(k.a)(u,Object(k.h)(a,"below",!0)),t)),r&&be.a.createPlugin({name:Ae,containerDOM:["li",{"data-bangle-name":Ae}],contentDOM:["span",{}],renderHandlers:{create:function(e,t){var n=t.attrs,r=t.updateAttrs,o=(t.getPos,Object(Oe.d)(["span",{contentEditable:!1},["input",{type:"checkbox"}]])),i=o.querySelector("input");n.done&&i.setAttribute("checked",""),e.containerDOM.appendChild(o),e.containerDOM.appendChild(e.contentDOM),i.addEventListener("input",(function(e){Me("change event",i.checked),r({done:i.checked})}))},update:function(e,t){var n=t.attrs,r=e.containerDOM.querySelector("input"),o=n.done,i=r.hasAttribute("checked");o!==i?(Me("updating inputElement"),o?r.setAttribute("checked","true"):r.removeAttribute("checked")):Me("skipping update",o,i)},destroy:function(){}}})]}},je={toggleDone:ve.a.mac?"Ctrl-Enter":"Ctrl-I",indent:"Tab",outdent:"Shift-Tab",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyTodoAbove:"Mod-Shift-Enter",insertEmptyTodoBelow:"Mod-Enter"},ke={toggleTodoItemDone:Ce,queryTodoItemAttrs:De},Me=function(){},Ae="todoItem",Se=function(e){return e.nodes.todoItem};function Ce(){return function(e,t,n){var r=Se(e.schema);return Object(ae.h)(r,(function(e){return Object.assign({},e,{done:!e.done})}))(e,t,n)}}function De(){return function(e,t,n){var r=Se(e.schema);return Object(ae.f)(r)(e,t,n)}}var Ee=n(162),Ie=n(173),Pe=n.n(Ie),Ne=n(164),xe=n(174),Le=n(134),Te=n(150),Be=function(e){void 0===e&&(e={});return{type:"node",name:Re,schema:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){return["img",e.attrs]}},markdown:{toMarkdown:function(e,t){var n=e.esc(t.attrs.alt||""),r=e.esc(t.attrs.src)+(t.attrs.title?" "+e.quote(t.attrs.title):"");e.write("!["+n+"]("+r+")")},parseMarkdown:{image:{node:Re,getAttrs:function(e){return{src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null}}}}}}},_e=function(e){var t=void 0===e?{}:e,n=t.handleDragAndDrop,r=void 0===n||n;t.keybindings;return function(e){var t=e.schema,n=qe(t);return[new z.a(/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,(function(e,t,r,o){var i=t[1],a=t[2],c=t[3];if(a)return c||(c=i),e.tr.replaceWith(r,o,n.create({src:a,alt:i,title:c}))})),r&&new Le.Plugin({key:new Le.PluginKey("image-drop-paste"),props:{handleDOMEvents:{drop:function(e,t){if(null==t.dataTransfer)return!1;var n=He(t.dataTransfer,"image/*",!0);if(!n||0===n.length)return!1;t.preventDefault();var r=e.posAtCoords({left:t.clientX,top:t.clientY});return Ve(e,null==r?void 0:r.pos,n.map((function(e){return ze(e)}))),!0}},handlePaste:function(e,t,n){var r=t;if(!r.clipboardData)return!1;var o=He(r.clipboardData,"image/*",!0);return!(!o||0===o.length)&&(Ve(e,e.state.selection.from,o.map((function(e){return ze(e)}))).catch((function(e){return console.error(e)})),!0)}}})]}},$e={},Re="image",qe=function(e){return e.nodes.image};function Ve(e,t,n){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(xe.a)(Pe.a.mark((function e(t,n,r){var o,i,a,c,u,s,d;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object(Ne.a)(r);case 1:if((i=o()).done){e.next=14;break}return a=i.value,e.next=5,a;case 5:if(c=e.sent,u=qe(t.state.schema).create({src:c}),s=t.state.tr,(d=Object(Te.safeInsert)(u,n)(s))!==s){e.next=11;break}return e.abrupt("continue",12);case 11:t.dispatch(d);case 12:e.next=1;break;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e){return new Promise((function(t,n){var r=new FileReader;r.onerror=function(){n(new Error("Error reading file"+e.name))},"readAsDataURL"in r?(r.onload=function(e){t(e.target.result)},r.readAsDataURL(e)):(r.onload=function(n){var r=btoa(n.target.result);t("data:"+e.type+";base64,"+r)},r.readAsBinaryString(e))}))}function He(e,t,n){var r=function(e,t,n){var r,o=Array.from(e);if(""===t)return r=o.filter((function(e){return"file"===e.kind})),n?r:[r[0]];var i=t.toLowerCase().split(",").map((function(e){return e.split("/").map((function(e){return e.trim()}))})).filter((function(e){return 2===e.length})),a=function(e){if("file"!==e.kind)return!1;for(var t,n=e.type.toLowerCase().split("/").map((function(e){return e.trim()})),r=n[0],o=n[1],a=Object(Ne.a)(i);!(t=a()).done;){var c=t.value,u=c[0],s=c[1];if(r===u&&("*"===s||o===s))return!0}return!1};r=r=o.filter(a),!1===n&&(r=[r[0]]);return r}(e.items,t,n),o=[];return r.forEach((function(e){var t=null==e?void 0:e.getAsFile();null!=t&&o.push(t)})),o}var We=function(e){return void 0===e&&(e={}),function(t,n,r){if(!t.selection instanceof Le.NodeSelection||!t.selection.node)return!1;var o=t.selection.node;return o.type===qe(t.schema)&&(n&&n(t.tr.setNodeMarkup(t.selection.$from.pos,void 0,Object.assign({},o.attrs,e))),!0)}},Fe=n(196),Ke=n(148),Ye=n(139),Ge=function(e){var t=void 0===e?{}:e,n=t.historyOpts,r=void 0===n?{}:n,o=t.keybindings,i=void 0===o?Ze:o;return function(){var e;return new Ye.b("history",[Fe.a(r),i&&Object(Ke.a)((e={},e[i.undo]=Xe(),e[i.redo]=Qe(),e))])}},Je={undo:Xe,redo:Qe},Ze={undo:"Mod-z",redo:"Mod-y Shift-Mod-z"};function Xe(){return Fe.c}function Qe(){return Fe.b}var et="editorStateCounter",tt=function(){return function(){return new Ye.b(et,[new Ye.a({key:nt,state:{init:function(e,t){return 0},apply:function(e,t,n,r){return e.docChanged?t+1:t}}}),new Ye.a({key:rt,state:{init:function(e,t){return 0},apply:function(e,t,n,r){return r.selection.eq(n&&n.selection)?t:t+1}}})])}},nt=new Ye.c(et),rt=new Ye.c(et)},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var r=n(4),o=n(175),i=n(139),a=n(137),c=function(){},u=new WeakMap,s=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e),t.createPlugin=function(e){var n,r=e.name,o=e.containerDOM,c=e.contentDOM,u=e.renderHandlers;return new i.a({key:new i.c(r+"NodeView"),props:{nodeViews:(n={},n[r]=function(e,n,r,i){var s,d=Object(a.d)(o);return c&&(s=Object(a.d)(c)),new t({node:e,view:n,getPos:r,decorations:i,containerDOM:d,contentDOM:s,renderHandlers:u})},n)}})};var n=t.prototype;return n.update=function(e,t){return c("update node"),this._node.type===e.type&&(this._node===e&&this._decorations===t?(c("update node no change"),!0):(this._node=e,this._decorations=t,c("update node execute"),this.renderHandlers.update(this,this.getNodeViewProps()),!0))},n.selectNode=function(){this.containerDOM.classList.add("ProseMirror-selectednode"),this._selected=!0,c("select node"),this.renderHandlers.update(this,this.getNodeViewProps())},n.deselectNode=function(){this.containerDOM.classList.remove("ProseMirror-selectednode"),this._selected=!1,c("deselectNode node"),this.renderHandlers.update(this,this.getNodeViewProps())},n.ignoreMutation=function(e){return!!this._node.type.isAtom||"selection"!==e.type&&(!this.containerDOM.contains(e.target)&&e.target!==this.contentDOM)},n.destroy=function(){this.renderHandlers.destroy(this,this.getNodeViewProps()),this.containerDOM=void 0,this.contentDOM=void 0},t}(function(){var e=t.prototype;function t(e,t){var n=e.node,r=e.view,o=e.getPos,i=e.decorations,c=e.containerDOM,s=e.contentDOM,d=e.renderHandlers,l=void 0===d?function(e){var t=e.dom.parentNode;return u.get(t)}(r):d,f=(void 0===t?{}:t).selectionSensitive,p=void 0===f||f;if(this._node=n,this._view=r,this._getPos=o,this._decorations=i,this._selected=!1,!l)throw Object(a.b)("It appears the view =",r," was not associated with renderHandlers. You are either using nodeViews accidentally or have incorrectly setup nodeViews"),new Error("You either did not pass the renderHandlers correct or it cannot find render handlers associated with the view.");if(this.renderHandlers=l,this.containerDOM=c,this.contentDOM=s,this.contentDOM&&this.contentDOM.classList.add("bangle-nv-content"),this.containerDOM&&this.containerDOM.classList.add("bangle-nv-container"),this._node.type.isAtom&&this.contentDOM)throw new Error("An atom node cannot have a contentDOM");this.opts={selectionSensitive:p},this.renderHandlers.create(this,this.getNodeViewProps())}return e.getAttrs=function(){return this._node.attrs},e.getNodeViewProps=function(){var e=this;return{node:this._node,view:this._view,getPos:this._getPos,decorations:this._decorations,selected:this._selected,attrs:this._node.attrs,updateAttrs:function(t){var n,r,o;e._view.dispatch((n=e._getPos(),r=e._node,o=t,e._view.state.tr.setNodeMarkup(n,void 0,Object.assign({},r.attrs,o))))}}},Object(o.a)(t,[{key:"dom",get:function(){return this.containerDOM}}]),t}());function d(e,t){if(u.has(e))throw new Error("It looks like renderHandlers were already set by someone else.");u.set(e,t)}},148:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(132),o="undefined"==typeof window||window.BANGLE_DEBUG_KEYBINDINGS,i=new WeakMap;function a(e,t){var n=(void 0===t?{}:t).monitor,a=void 0===n?o:n,c=Object.entries(e).flatMap((function(e){var t=e[0],n=e[1];return t&&"undefined"!==t&&"null"!==t&&"false"!==t?t.split(" ").map((function(e){return[e,n]})):[]})).filter((function(e){e[0];return null!=e[1]})),u=Object.fromEntries(c),s=Object(r.b)(u);return a&&i.set(s,u),s}function c(){return a.apply(void 0,arguments)}},149:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(164),o=n(175),i=n(135),a=n(146),c=n(137),u=(console.log.bind(console,"SpecRegistry"),function(){function e(e,t){void 0===e&&(e=[]);var n=(void 0===t?{}:t).defaultSpecs,o=void 0===n||n,u=d(e);u.forEach(s);var l=new Set(u.map((function(e){return e.name})));if(u.length!==l.size)throw Object(c.b)("The specRegistry has one or more specs with the same name",u),new Error("Duplicate spec error, please check your specRegistry");if(o){var f=[];l.has("paragraph")||f.unshift(a.q.spec()),l.has("text")||f.unshift(a.s.spec()),l.has("doc")||f.unshift(a.f.spec()),u=[].concat(d(f),u)}this._spec=u,this._schema=function(e){for(var t,n,o=[],a=[],c=Object(r.a)(e);!(n=c()).done;){var u=n.value;if("node"===u.type)o.push([u.name,u.schema]);else if("mark"===u.type)a.push([u.name,u.schema]);else if("component"!==u.type)throw new Error(u.name+" unknown type: "+u.type);!0===u.topNode&&(t=u.name)}return new i.Schema({topNode:t,nodes:Object.fromEntries(o),marks:Object.fromEntries(a)})}(this._spec),this._options=Object.fromEntries(this._spec.filter((function(e){return e.options})).map((function(e){return[e.name,e.options]})))}return Object(o.a)(e,[{key:"spec",get:function(){return this._spec}},{key:"schema",get:function(){return this._schema}},{key:"options",get:function(){return this._options}}]),e}());function s(e){if(!e.name)throw Object(c.b)("The spec didn't have a name field",e),new Error("Invalid spec. Spec must have a name");if(!["node","mark","component"].includes(e.type))throw Object(c.b)("The spec must be of type node, mark or component ",e),new Error("Invalid spec type");if(["node","mark"].includes(e.type)&&!e.schema)throw Object(c.b)("The spec of type 'mark' or 'node' must have a schema field",e),new Error("Invalid spec schema")}function d(e){return function e(t){return Array.isArray(t)?t.flatMap((function(t){return e(t)})).filter(Boolean):t}(e)}},152:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return a})),n.d(t,"plugins",(function(){return c})),n.d(t,"commands",(function(){return u})),n.d(t,"createLink",(function(){return p})),n.d(t,"updateLink",(function(){return m})),n.d(t,"queryLinkAttrs",(function(){return h})),n.d(t,"queryIsLinkAllowedInRange",(function(){return v})),n.d(t,"queryIsLinkActive",(function(){return b})),n.d(t,"queryIsSelectionAroundLink",(function(){return g}));var r=n(134),o=n(137),i=n(131),a=function(e){var t=(void 0===e?{}:e).openOnClick;return{type:"mark",name:s,schema:{attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href")}}}],toDOM:function(e){return["a",Object.assign({},e.attrs,{rel:"noopener noreferrer nofollow"}),0]}},markdown:{toMarkdown:{open:function(e,t,n,r){return l(t,n,r,1)?"<":"["},close:function(e,t,n,r){return l(t,n,r,-1)?">":"]("+e.esc(t.attrs.href)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")"}},parseMarkdown:{link:{mark:"link",getAttrs:function(e){return{href:e.attrGet("href"),title:e.attrGet("title")||null}}}}},options:{openOnClick:void 0!==t&&t}}},c=function(){return function(e){var t,n=e.schema,a=e.specRegistry.options.link.openOnClick,c=function(e){return e.marks.link}(n);return[(t=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,new r.Plugin({props:{handlePaste:function(e,n,r){var i=n;if(!i.clipboardData)return!1;var a=i.clipboardData.getData("text/plain"),c=i.clipboardData.getData("text/html"),u=a&&!c;if(!u||e.state.selection.empty)return!1;var s=e.state,d=e.dispatch,l=Object(o.e)(t,a),f=1===l.length&&l.every((function(e){return e.match}));return!!f&&p(a)(s,d)}}})),d(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,c,(function(e){return{href:e}})),a&&new r.Plugin({props:{handleClick:function(e,t,n){var r=e.state.schema,o=Object(i.f)(e.state,r.marks.link);o.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(o.href))}}})]}},u={createLink:p,updateLink:m,queryLinkAttrs:h,queryIsLinkAllowedInRange:v,queryIsLinkActive:b,queryIsSelectionAroundLink:g},s="link";function d(e,t,n){return new r.Plugin({props:{transformPasted:function(r){return Object(i.o)(r,(function(r){if(!r.isText)return r;var i=r.text;return Object(o.e)(e,i).map((function(e){var o=e.start,i=e.end,a=e.match,c=e.subString,u=r.cut(o,i);if(a){var s=n instanceof Function?n(c):n;u=u.mark(t.create(s).addToSet(r.marks))}return u}))}))}}})}function l(e,t,n,r){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;var o=t.child(n+(r<0?-1:0));if(!o.isText||o.text!==e.attrs.href||o.marks[o.marks.length-1]!==e)return!1;if(n===(r<0?1:t.childCount-1))return!0;var i=t.child(n+(r<0?-2:1));return!e.isInSet(i.marks)}function f(e,t,n){return n=n&&n.trim(),Object(i.a)((function(t){return(n=e,function(e){var t=e.doc.nodeAt(n);return!!t&&t.isText})(t);var n}),(function(r,o){var i=r.schema.marks.link,a=r.tr.removeMark(e,t,i);if(n){var c=r.schema.marks.link.create({href:n});a.addMark(e,t,c)}return o&&o(a),!0}))}function p(e){return Object(i.a)((function(e){return v(e.selection.$from.pos,e.selection.$to.pos)(e)}),(function(t,n){var r=[t.selection.$from.pos,t.selection.$to.pos],o=r[0],i=r[1],a=t.schema.marks.link,c=t.tr.removeMark(o,i,a);if(e.trim()){var u=t.schema.marks.link.create({href:e});c.addMark(o,i,u)}return n&&n(c),!0}))}function m(e){return function(t,n){if(!t.selection.empty)return f(t.selection.$from.pos,t.selection.$to.pos,e)(t,n);var r=t.selection.$from,o=r.pos-r.textOffset,i=t.doc.nodeAt(o),a=o;return i&&(a+=i.nodeSize),f(o,a,e)(t,n)}}function h(){return function(e){var t=e.selection.$from,n=t.pos-t.textOffset,r=e.doc.resolve(n),o=e.doc.nodeAt(n),i=r.nodeAfter;if(i){var a=e.schema.marks.link.isInSet(i.marks||[]);return a?{href:a.attrs.href,text:o.textContent}:void 0}}}function v(e,t){return function(n){var r=n.doc.resolve(e),o=n.doc.resolve(t),i=n.schema.marks.link;if(r.parent===o.parent&&r.parent.isTextblock)return r.parent.type.allowsMarkType(i)}}function b(){return function(e){return!!e.doc.type.schema.marks.link.isInSet(e.selection.$from.marks())}}function g(){return function(e){var t=e.selection,n=t.$from,r=t.$to,o=n.nodeAfter;return!!o&&0===n.textOffset&&r.pos-n.pos===o.nodeSize&&!!e.doc.type.schema.marks.link.isInSet(o.marks)}}},154:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return u})),n.d(t,"plugins",(function(){return s})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleBold",(function(){return p})),n.d(t,"queryIsBoldActive",(function(){return m}));var r=n(143),o=n(144),i=n(133),a=n(131),c=n(132),u=function(e){void 0===e&&(e={});return{type:"mark",name:f,schema:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong",0]}},markdown:{toMarkdown:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{strong:{mark:f}}}}},s=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,i=void 0===n||n,a=t.keybindings,u=void 0===a?l:a;return function(e){var t,n=function(e){return e.marks.bold}(e.schema);return[i&&Object(o.a)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,n),i&&Object(r.a)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,n),u&&Object(c.b)((t={},t[u.toggleBold]=p(),t))]}},d={toggleBold:p,queryIsBoldActive:m},l={toggleBold:"Mod-b"},f="bold";function p(){return function(e,t,n){return Object(i.f)(e.schema.marks.bold)(e,t,n)}}function m(){return function(e){return Object(a.k)(e.schema.marks.bold)(e)}}},155:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return s})),n.d(t,"plugins",(function(){return d})),n.d(t,"commands",(function(){return l})),n.d(t,"defaultKeys",(function(){return f})),n.d(t,"toggleCode",(function(){return y})),n.d(t,"queryIsCodeActive",(function(){return w}));var r=n(143),o=n(144),i=n(133),a=n(131),c=n(132),u=n(134),s=function(e){void 0===e&&(e={});return{type:"mark",name:p,schema:{excludes:"_",parseDOM:[{tag:p}],toDOM:function(){return[p,0]}},markdown:{toMarkdown:{open:function(e,t,n,r){return g(n.child(r),-1)},close:function(e,t,n,r){return g(n.child(r-1),1)},escape:!1},parseMarkdown:{code_inline:{mark:p,noCloseToken:!0}}}}},d=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,u=void 0===n||n,s=t.escapeAtEdge,d=void 0===s||s,l=t.keybindings,p=void 0===l?f:l;return function(e){var t,n=function(e){return e.marks.code}(e.schema),s=[function(e){return e.selection.empty&&e.selection.$cursor}];return[u&&Object(o.a)(/(?:`)([^`]+)(?:`)/g,n),u&&Object(r.a)(/(?:`)([^`]+)(?:`)$/,n),p&&Object(c.b)((t={},t[p.toggleCode]=Object(i.f)(n),t)),d&&Object(c.b)({ArrowRight:Object(a.a)(s,v),ArrowLeft:Object(a.a)(s,b)})]}},l={toggleCode:y,queryIsCodeActive:w},f={toggleCode:"Mod-`"},p="code",m=function(e){return e.schema.marks.code};var h=function(e,t){if(t<0||t>e.doc.content.size)return!1;var n=m(e),r=e.doc.nodeAt(t);return!!r&&r.marks.some((function(e){return e.type===n}))};function v(e,t,n){var r=e.schema.marks.code,o=e.selection.$cursor,i=e.tr.storedMarks,a=O(e,r),c=e.doc.rangeHasMark(o.pos,o.pos,r),u=e.doc.rangeHasMark(o.pos,o.pos+1,r),s=!c&&u&&!(i&&i.length>0);if(!a&&s)return t&&t(e.tr.addStoredMark(r.create())),!0;var d=!(c||u||i&&0===i.length);return!(!a||!d)&&(t&&t(e.tr.removeStoredMark(r)),!0)}function b(e,t,n){var r=m(e),o=O(e,r),i=e.selection.$cursor,a=e.tr.storedMarks,c=h(e,i.pos),s=h(e,i.pos-1),d=h(e,i.pos-2),l=c&&!s&&Array.isArray(a),f=s&&!d&&(null===a||Array.isArray(a)&&!!a.length),p=(l&&Array.isArray(a)&&!a.length||!l&&null===a)&&!s&&d,v=!c&&s&&Array.isArray(a)&&!a.length;if(!o&&p){var b=e.tr.setSelection(u.Selection.near(e.doc.resolve(i.pos-1)));return t&&t(b.removeStoredMark(r)),!0}if(!o&&v)return t&&t(e.tr.addStoredMark(r.create())),!0;if(o&&f){var g=e.tr.setSelection(u.Selection.near(e.doc.resolve(i.pos-1)));return t&&t(g.addStoredMark(r.create())),!0}var y=0===i.index(i.depth-1);return o&&(l||!i.nodeBefore&&y)?(t&&t(e.tr.removeStoredMark(r)),!0):void 0}function g(e,t){var n,r=/`+/g,o=0;if(e.isText)for(;n=r.exec(e.text);)o=Math.max(o,n[0].length);for(var i=o>0&&t>0?" `":"`",a=0;a<o;a++)i+="`";return o>0&&t<0&&(i+=" "),i}function O(e,t){var n=e.selection,r=n.from,o=n.to;if(n.empty)return!!t.isInSet(e.tr.storedMarks||e.selection.$from.marks());var i=!1;return e.doc.nodesBetween(r,o,(function(e){i=i||t.isInSet(e.marks)})),i}function y(){return function(e,t,n){return Object(i.f)(e.schema.marks.code)(e,t,n)}}function w(){return function(e){return Object(a.k)(e.schema.marks.code)(e)}}},156:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return u})),n.d(t,"plugins",(function(){return s})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleItalic",(function(){return p})),n.d(t,"queryIsItalicActive",(function(){return m}));var r=n(143),o=n(144),i=n(133),a=n(131),c=n(132),u=function(e){void 0===e&&(e={});return{type:"mark",name:f,schema:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},markdown:{toMarkdown:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{em:{mark:f}}}}},s=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?l:t;return function(e){var t,a=function(e){return e.marks[f]}(e.schema);return[Object(o.a)(/_([^_]+)_/g,a),Object(o.a)(/\*([^*]+)\*/g,a),Object(r.a)(/(?:^|[^_])(_([^_]+)_)$/,a),Object(r.a)(/(?:^|[^*])(\*([^*]+)\*)$/,a),n&&Object(c.b)((t={},t[n.toggleItalic]=Object(i.f)(a),t))]}},d={toggleItalic:p,queryIsItalicActive:m},l={toggleItalic:"Mod-i"},f="italic";function p(){return function(e,t,n){return Object(i.f)(e.schema.marks[f])(e,t,n)}}function m(){return function(e){return Object(a.k)(e.schema.marks[f])(e)}}},157:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return s})),n.d(t,"plugins",(function(){return d})),n.d(t,"commands",(function(){return l})),n.d(t,"defaultKeys",(function(){return f})),n.d(t,"convertToParagraph",(function(){return h})),n.d(t,"jumpToStartOfParagraph",(function(){return v})),n.d(t,"jumpToEndOfParagraph",(function(){return b})),n.d(t,"queryIsTopLevelParagraph",(function(){return g})),n.d(t,"queryIsParagraph",(function(){return O}));var r=n(133),o=n(134),i=n(131),a=n(148),c=n(138),u=n(142),s=function(e){void 0===e&&(e={});return{type:"node",name:p,schema:{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},markdown:{toMarkdown:function(e,t){e.renderInline(t),e.closeBlock(t)},parseMarkdown:{paragraph:{block:"paragraph"}}}}},d=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?f:t;return function(e){var t,r=e.schema,o=m(r),u=Object(c.d)(o,r.nodes.doc);return[n&&Object(a.b)((t={},t[n.convertToParagraph]=h(),t[n.moveUp]=Object(i.a)(u,Object(c.c)(o,"UP")),t[n.moveDown]=Object(i.a)(u,Object(c.c)(o,"DOWN")),t[n.jumpToStartOfParagraph]=v(),t[n.jumpToEndOfParagraph]=b(),t[n.emptyCopy]=Object(i.a)(u,Object(c.a)(o)),t[n.emptyCut]=Object(i.a)(u,Object(c.b)(o)),t[n.insertEmptyParaAbove]=Object(i.a)(u,Object(i.h)(o,"above")),t[n.insertEmptyParaBelow]=Object(i.a)(u,Object(i.h)(o,"below")),t))]}},l={convertToParagraph:h,jumpToStartOfParagraph:v,jumpToEndOfParagraph:b,queryIsParagraph:O,queryIsTopLevelParagraph:g},f={jumpToEndOfParagraph:u.a.mac?"Ctrl-e":"Ctrl-End",jumpToStartOfParagraph:u.a.mac?"Ctrl-a":"Ctrl-Home",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter",convertToParagraph:"Ctrl-Shift-0"},p="paragraph",m=function(e){return e.nodes[p]};function h(){return function(e,t){return Object(r.e)(m(e.schema))(e,t)}}function v(){return function(e,t){var n=m(e.schema),r=Object(i.d)(n)(e.selection);if(!r)return!1;var a=r.start;return t(e.tr.setSelection(o.TextSelection.create(e.doc,a))),!0}}function b(){return function(e,t){var n=m(e.schema),r=Object(i.d)(n)(e.selection);if(!r)return!1;var a=r.node,c=r.start;return t(e.tr.setSelection(o.TextSelection.create(e.doc,c+a.content.size))),!0}}function g(){return function(e){var t=m(e.schema);return Object(c.d)(t,e.schema.nodes.doc)(e)}}function O(){return function(e){var t=m(e.schema);return Boolean(Object(i.d)(t)(e.selection))}}},158:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return u})),n.d(t,"plugins",(function(){return s})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"queryIsBlockquoteActive",(function(){return m})),n.d(t,"wrapInBlockquote",(function(){return h}));var r=n(136),o=n(133),i=n(132),a=n(138),c=n(131),u=function(e){void 0===e&&(e={});return{type:"node",name:f,schema:{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},markdown:{toMarkdown:function(e,t){e.wrapBlock("> ",null,t,(function(){return e.renderContent(t)}))},parseMarkdown:{blockquote:{block:f}}}}},s=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,o=void 0===n||n,u=t.keybindings,s=void 0===u?l:u;return function(e){var t,n=e.schema,u=p(n),d=m();return[o&&Object(r.e)(/^\s*>\s$/,u),s&&Object(i.b)((t={},t[s.wrapIn]=h(),t[s.moveUp]=Object(a.c)(u,"UP"),t[s.moveDown]=Object(a.c)(u,"DOWN"),t[s.emptyCopy]=Object(a.a)(u),t[s.emptyCut]=Object(a.b)(u),t[s.insertEmptyParaAbove]=Object(c.a)(d,Object(c.h)(n.nodes.paragraph,"above",!0)),t[s.insertEmptyParaBelow]=Object(c.a)(d,Object(c.h)(n.nodes.paragraph,"below",!0)),t))]}},d={queryIsBlockquoteActive:m,wrapInBlockquote:h},l={wrapIn:"Ctrl-ArrowRight",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},f="blockquote",p=function(e){return e.nodes[f]};function m(){return function(e){var t=p(e.schema);return Boolean(Object(c.d)(t)(e.selection))}}function h(){return Object(c.a)((function(e){return!m()(e)}),(function(e,t,n){var r=p(e.schema);return Object(o.g)(r)(e,t,n)}))}},159:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return c})),n.d(t,"plugins",(function(){return u})),n.d(t,"commands",(function(){return s})),n.d(t,"defaultKeys",(function(){return d})),n.d(t,"toggleBulletList",(function(){return f})),n.d(t,"queryIsBulletListActive",(function(){return p}));var r=n(132),o=n(136),i=n(138),a=n(145),c=function(e){void 0===e&&(e={});return{type:"node",name:l,schema:{content:"listItem+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}},markdown:{toMarkdown:function(e,t){e.renderList(t,"  ",(function(){return(t.attrs.bullet||"-")+" "}))},parseMarkdown:{bullet_list:{block:l}}}}},u=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,i=void 0===n||n,c=t.keybindings,u=void 0===c?d:c;return function(e){var t,n=e.schema,c=function(e){return e.nodes[l]}(n);return[u&&Object(r.b)((t={},t[u.toggle]=Object(a.g)(c,n.nodes.listItem),t)),i&&Object(o.e)(/^\s*([-+*])\s$/,c)]}},s={toggleBulletList:f,queryIsBulletListActive:p},d={toggle:"Shift-Ctrl-8"},l="bulletList";function f(){return function(e,t,n){return Object(a.g)(e.schema.nodes.bulletList,e.schema.nodes.listItem)(e,t,n)}}function p(){return function(e){var t=e.schema;return Object(i.d)(t.nodes.listItem,[t.nodes.bulletList])(e)}}},160:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return u})),n.d(t,"plugins",(function(){return s})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleHeading",(function(){return h})),n.d(t,"queryIsHeadingActive",(function(){return v}));var r=n(133),o=n(136),i=n(148),a=n(138),c=n(131),u=function(e){var t=(void 0===e?{}:e).levels,n=void 0===t?p:t;if(n.some((function(e){return"number"!=typeof e})))throw new Error("levels must be number");return{type:"node",name:f,schema:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:n.map((function(e){return{tag:"h"+e,attrs:{level:m(e)}}})),toDOM:function(e){return["h"+e.attrs.level,{},0]}},markdown:{toMarkdown:function(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t),e.closeBlock(t)},parseMarkdown:{heading:{block:f,getAttrs:function(e){return{level:m(e.tag.slice(1))}}}}},options:{levels:n}}},s=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,u=void 0===n||n,s=t.keybindings,d=void 0===s?l:s;return function(e){var t,n=e.schema,s=e.specRegistry.options[f].levels,l=function(e){return e.nodes[f]}(n),p=function(e){return Object(c.d)(l)(e.selection)},m=Object.fromEntries(s.map((function(e){return[d["toH"+e],Object(r.e)(l,{level:e})]})));return[d&&Object(i.b)(Object.assign({},m,(t={},t[d.moveUp]=Object(a.c)(l,"UP"),t[d.moveDown]=Object(a.c)(l,"DOWN"),t[d.emptyCopy]=Object(a.a)(l),t[d.emptyCut]=Object(a.b)(l),t[d.insertEmptyParaAbove]=Object(c.a)(p,Object(c.h)(n.nodes.paragraph,"above",!1)),t[d.insertEmptyParaBelow]=Object(c.a)(p,Object(c.h)(n.nodes.paragraph,"below",!1)),t)))].concat((u?s:[]).map((function(e){return Object(o.c)(new RegExp("^(#{1,"+e+"})\\s$"),l,(function(){return{level:e}}))})))}},d={toggleHeading:h,queryIsHeadingActive:v},l={toH1:"Shift-Ctrl-1",toH2:"Shift-Ctrl-2",toH3:"Shift-Ctrl-3",toH4:"Shift-Ctrl-4",toH5:"Shift-Ctrl-5",toH6:"Shift-Ctrl-6",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},f="heading",p=[1,2,3,4,5,6],m=function(e){return e=parseInt(e,10),Number.isNaN(e)?void 0:e};function h(e){return void 0===e&&(e=3),function(t,n,o){return v(e)(t)?Object(r.e)(t.schema.nodes.paragraph)(t,n,o):Object(r.e)(t.schema.nodes[f],{level:e})(t,n,o)}}function v(e){return function(t){var n=Object(c.d)(t.schema.nodes[f])(t.selection);if(!n)return!1;var r=n.node;return null==e||r.attrs.level===e}}},161:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return c})),n.d(t,"plugins",(function(){return u})),n.d(t,"commands",(function(){return s})),n.d(t,"defaultKeys",(function(){return d})),n.d(t,"toggleOrderedList",(function(){return f})),n.d(t,"queryIsOrderedListActive",(function(){return p}));var r=n(145),o=n(136),i=n(132),a=n(138),c=function(e){void 0===e&&(e={});return{type:"node",name:l,schema:{attrs:{order:{default:1}},content:"listItem+",group:"block",parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1===e.attrs.order?["ol",0]:["ol",{start:e.attrs.order},0]}},markdown:{toMarkdown:function(e,t){var n=t.attrs.order||1,r=String(n+t.childCount-1).length,o=e.repeat(" ",r+2);e.renderList(t,o,(function(t){var o=String(n+t);return e.repeat(" ",r-o.length)+o+". "}))},parseMarkdown:{ordered_list:{block:l}}}}},u=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?d:t;return function(e){var t,a=function(e){return e.nodes[l]}(e.schema);return[Object(o.e)(/^(1)[\.\)] $/,a,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order===+e[1]})),n&&Object(i.b)((t={},t[n.toggle]=Object(r.g)(a),t))]}},s={},d={toggle:"Shift-Ctrl-9"},l="orderedList";function f(){return function(e,t,n){return Object(r.g)(e.schema.nodes.orderedList,e.schema.nodes.listItem)(e,t,n)}}function p(){return function(e){var t=e.schema;return Object(a.d)(t.nodes.listItem,[t.nodes[l]])(e)}}},162:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return u})),n.d(t,"plugins",(function(){return s})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleTodoList",(function(){return f})),n.d(t,"queryIsTodoListActive",(function(){return p}));var r=n(136),o=n(145),i=n(132),a=n(138),c="todoList",u=function(e){void 0===e&&(e={});return{type:"node",name:c,schema:{group:"block",content:"todoItem+",toDOM:function(){return["ul",{"data-bangle-name":c},0]},parseDOM:[{priority:51,tag:'[data-bangle-name="todoList"]'}]},markdown:{toMarkdown:function(e,t){e.renderList(t,"  ",(function(){return"- "}))},parseMarkdown:{todo_list:{block:c}}}}},s=function(e){var t=void 0===e?{}:e,n=t.keybindings,a=void 0===n?l:n,u=t.markdownShortcut,s=void 0===u||u;return function(e){var t,n=e.schema,u=function(e){return e.nodes[c]}(n);return[s&&Object(r.e)(/^\s*(\[ \])\s$/,u),a&&Object(i.b)((t={},t[a.toggle]=Object(o.g)(u,n.nodes.todoItem),t))]}},d={toggleTodoList:f,queryIsTodoListActive:p},l={toggle:"Shift-Ctrl-7"};function f(){return function(e,t,n){var r=e.schema;return Object(o.g)(r.nodes[c],r.nodes.todoItem)(e,t,n)}}function p(){return function(e){var t=e.schema;return Object(a.d)(t.nodes.todoItem,t.nodes[c])(e)}}},165:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4),o=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t}(n(134).Selection)},170:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(146);function o(){return[].concat([r.b.spec(),r.d.spec(),r.m.spec(),r.r.spec(),r.n.spec(),r.v.spec()],[r.f.spec(),r.s.spec(),r.q.spec(),r.a.spec(),r.c.spec(),r.e.spec(),r.h.spec(),r.i.spec(),r.k.spec(),r.o.spec(),r.p.spec(),r.t.spec(),r.u.spec(),r.l.spec()])}function i(){return[r.b.plugins(),r.d.plugins(),r.m.plugins(),r.r.plugins(),r.n.plugins(),r.v.plugins(),r.q.plugins(),r.a.plugins(),r.c.plugins(),r.e.plugins(),r.h.plugins(),r.i.plugins(),r.k.plugins(),r.o.plugins(),r.p.plugins(),r.t.plugins(),r.u.plugins(),r.l.plugins(),r.j.plugins()]}},171:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(137);function o(e,t){var n=void 0===t?{}:t,o=n.tag,i=void 0===o?"div":o,a=n.content,c=n.ignoreAttrs,u=void 0===c?[]:c,s=n.parsingPriority,d=function(e){return JSON.stringify(Object(r.f)(e.attrs||{},(function(e,t){return!u.includes(t)})))};return{toDOM:function(t){var n=[i,{"data-bangle-name":e,"data-bangle-attrs":d(t)}];return void 0!==a&&("function"==typeof a?n.push(a(t)):n.push(a)),n},parseDOM:[{priority:void 0===s?51:s,tag:i+'[data-bangle-name="'+e+'"]',getAttrs:function(e){var t=e.getAttribute("data-bangle-attrs");return t?JSON.parse(t):{}}}]}}},172:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return d}));var r=n(0),o=(n(149),n(141)),i=(n(170),n(177)),a=n(137),c=function(){};function u(e){if(e.plugins&&"function"!=typeof e.plugins)throw new Error("plugins error: plugins must be a function");return Object(r.useState)((function(){return new o.b(e)}))[0]}function s(e,t){void 0===t&&(t=!1);var n=d(),i=Object(r.useState)(e.getState(n.state)),u=i[0],s=i[1];return Object(r.useEffect)((function(){c("Setup plugin",e);var r=s;t&&(r=Object(a.i)(s));var i=function(e,t){return new o.d({key:new o.e("withPluginState_"+e.key),view:function(){return{update:function(n,r){var o=n.state;if(r!==o){var i=e.getState(o);i!==e.getState(r)&&t(i)}}}}})}(e,r);return n._updatePluginWatcher(i),function(){t&&r.cancel(),n._updatePluginWatcher(i,!0)}}),[n,e,t]),u}function d(){return Object(r.useContext)(i.b)}},176:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return h}));var r=n(0),o=n.n(r),i=n(1),a=n.n(i),c=n(182),u=n(179),s=n(180),d=n(187);function l(e){var t=e.filePath,n=e.language,i=e.createEditor,a=e.defaultTab,c=void 0===a?"example":a,u=e.onEditorReady,s=void 0===u?function(){}:u,d=e.SideCar,l=Object(r.useRef)(i),m=Object(r.useState)(!1),h=m[0],v=m[1],b=Object(r.useCallback)((function(){return o.a.createElement(f,{createEditor:l.current,onReady:v})}),[l,v]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(p,{filePath:t,language:n,component:b,defaultTab:c}),h?s(h):null,h&&d?o.a.createElement(d,{editor:h}):null)}function f(e){var t=e.createEditor,n=e.onReady,i=Object(r.useRef)();return Object(r.useEffect)((function(){var e=t(i.current);return n(e),function(){e.destroy()}}),[t,n]),o.a.createElement("div",{ref:i})}function p(e){var t=e.filePath,n=e.language,r=e.component,i=e.defaultTab,a=void 0===i?"example":i;return o.a.createElement(u.a,{defaultValue:a,values:[{label:"Example",value:"example"},{label:"Source code",value:"src"}]},o.a.createElement(s.a,{value:"example"},o.a.createElement(d.a,null,r)),o.a.createElement(s.a,{value:"src"},o.a.createElement(m,{filePath:t,language:n})))}function m(e){var t=e.filePath,n=e.language,i=void 0===n?"js":n,a=Object(r.useState)(),u=a[0],s=a[1];return Object(r.useEffect)((function(){var e=!1;return function(e){return fetch(e).then((function(e){return e.text()}))}(t).then((function(t){e||s(t)})).catch((function(n){console.error(n),e||s("Error: Could not load source code at "+t)})),function(){e=!0}}),[s,t]),u?o.a.createElement(c.a,{className:"language-"+i},u):"loading..."}function h(e){var t="",n="";return e.split(/>\s*</).forEach((function(e){e.match(/^\/\w/)&&(n=n.substring("  ".length)),t+=n+"<"+e+">\r\n",e.match(/^<?\w[^>]*[^\/]$/)&&(n+="  ")})),t.substring(1,t.length-3)}p.propTypes={component:a.a.func.isRequired,language:a.a.string,filePath:a.a.string.isRequired}},177:function(e,t,n){"use strict";n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return S}));var r=n(0),o=n.n(r),i=n(23),a=n.n(i),c=n(1),u=n.n(c),s=n(4),d=n(219),l=0,f=new(function(e){function t(){return e.apply(this,arguments)||this}return Object(s.a)(t,e),t.prototype.get=function(t){var n=e.prototype.get.call(this,t);return n||(n=(l++).toString(),this.set(t,n),n)},t}(Object(d.a)(WeakMap))),p=n(141),m=n(147),h=n(137),v=n(183),b=n(169),g=function(){},O=function(e){function t(t){var n;return(n=e.call(this,t)||this).update=function(){n.setState((function(e,t){return{nodeViewProps:t.nodeView.getNodeViewProps()}}))},n.attachToContentDOM=function(e){if(e){var t=n.props.nodeView.contentDOM;e.contains(t)||(t.parentNode&&t.parentNode.removeChild(t),e.appendChild(t))}},t.nodeViewUpdateStore.set(t.nodeView,n.update),n.state={nodeViewProps:n.props.nodeView.getNodeViewProps()},n}Object(s.a)(t,e);var n=t.prototype;return n.getChildren=function(){return this.props.nodeView.contentDOM?this.state.nodeViewProps.node.isInline?o.a.createElement("span",{className:"bangle-nv-child-container",ref:this.attachToContentDOM}):o.a.createElement("div",{className:"bangle-nv-child-container",ref:this.attachToContentDOM}):null},n.render=function(){g("react rendering",f.get(this.props.nodeView));var e=this.props.renderNodeViews(Object.assign({},this.state.nodeViewProps,{children:this.getChildren()}));if(!e)throw Object(h.b)("renderNodeView prop must return a react element for the node",this.state.nodeViewProps.node),new Error('renderNodeView must handle rendering for node of type "'+this.state.nodeViewProps.node.type.name+'"');return e},t}(o.a.PureComponent);O.propTypes={nodeView:u.a.object.isRequired,renderNodeViews:u.a.func.isRequired,nodeViewUpdateStore:u.a.instanceOf(WeakMap).isRequired};var y={selected:u.a.bool.isRequired,node:u.a.instanceOf(v.c).isRequired,view:u.a.instanceOf(b.c).isRequired,getPos:u.a.func.isRequired,decorations:u.a.object.isRequired,attrs:u.a.object.isRequired,updateAttrs:u.a.func.isRequired},w=(Object.assign({},y,{children:u.a.oneOfType([u.a.element,u.a.arrayOf(u.a.element)]).isRequired}),function(){}),j=new WeakMap,k=function(e){return{create:function(t,n){w("create",f.get(t)),e((function(e){return[].concat(e,[t])}))},update:function(e,t){w("update",f.get(e));var n=j.get(e);n&&n()},destroy:function(t){w("destroy",f.get(t)),e((function(e){return e.filter((function(e){return e!==t}))}))}}};var M=function(){},A=o.a.createContext();function S(e){var t=e.id,n=e.state,i=e.children,c=e.focusOnInit,u=void 0===c||c,s=e.pmViewOpts,d=e.renderNodeViews,l=e.onReady,h=void 0===l?function(){}:l,v=Object(r.useRef)(),b=Object(r.useRef)(h),g=Object(r.useRef)({state:n,focusOnInit:u,pmViewOpts:s}),y=Object(r.useState)([]),w=y[0],M=y[1],S=Object(r.useState)(),D=S[0],E=S[1];return Object(r.useEffect)((function(){var e=!1;Object(m.b)(v.current,k((function(t){e||M((function(e){return t(e)}))})));var t=new p.a(v.current,g.current);return t.view._updatePluginWatcher=C(t),b.current(t),E(t),function(){e=!0,t.destroy()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{ref:v,id:t}),w.map((function(e){return a.a.createPortal(o.a.createElement(O,{debugKey:f.get(e),nodeViewUpdateStore:j,nodeView:e,renderNodeViews:d}),e.containerDOM,f.get(e))})),D?o.a.createElement(A.Provider,{value:D.view},i):null)}var C=function(e){return function(t,n){if(void 0===n&&(n=!1),!e.destroyed){var r=e.view.state,o=n?r.plugins.filter((function(e){return e!==t})):[].concat(r.plugins,[t]);r=r.reconfigure({plugins:o}),M("Adding watching to existing state",t),e.view.updateState(r)}}};S.propTypes={id:u.a.string,renderNodeViews:u.a.func,onReady:u.a.func,children:u.a.oneOfType([u.a.element,u.a.arrayOf(u.a.element)]),state:u.a.instanceOf(p.b).isRequired,pmViewOpts:u.a.object}},181:function(e,t,n){"use strict";var r=n(177);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b}));var o=n(172);n.d(t,"c",(function(){return o.a})),n.d(t,"d",(function(){return o.b})),n.d(t,"e",(function(){return o.c}))},183:function(e,t,n){"use strict";var r=n(135);n.d(t,"c",(function(){return r.Node})),n.d(t,"b",(function(){return r.Fragment})),n.d(t,"a",(function(){return r.DOMSerializer}))},219:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,n){return(a=i()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return a(e,arguments,r(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),o(i,e)})(e)}n.d(t,"a",(function(){return c}))}}]);